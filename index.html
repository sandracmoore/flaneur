<!DOCTYPE html><html><head><title>The Flâneur as Detective</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}#backstage .panel h2{margin:0}#backstage .panel h2 button{text-align:left;background:none;border:none;width:100%;font-weight:400;text-transform:uppercase;font-size:70%;letter-spacing:.075em;font-size:11px;padding:0 8px}#backstage .panel h2 button:before{content:"\25BA";display:inline-block;width:1.25em}#backstage .panel h2 button:hover{color:#495057}#backstage .panel.open h2 button:before{content:"\25BC"}
#backstage table.history td.actions{width:2.5em}#backstage table.history td.go{border-right:1px solid #000}
#backstage ul.tabs{list-style:none;margin:8px;padding:0;display:flex;border:1px solid #000;font-size:12px}#backstage ul.tabs li{flex-grow:1;border-right:1px solid #000;text-align:center}#backstage ul.tabs li:last-child{border-right:none}#backstage ul.tabs li button{color:#000;text-decoration:none;display:block;width:100%;height:28px;padding:8px;border:none;border-radius:0}#backstage ul.tabs li button.active{background:#000;color:#dee2e6}#backstage .tab-content{max-height:calc(100vh - $backstage-tab-height);overflow:auto}
.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}body.backstage-visible #backdrop{justify-content:flex-start;max-width:67vw}#backstage{position:fixed;top:0;right:0;bottom:0;width:33vw;max-height:100vh;font-size:18px;background:#dee2e6;color:#000;transform:translateX(100%);box-shadow:inset 2px 0 3px rgba(0,0,0,.25);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu Cantarell,Helvetica Neue,sans-serif;font-size:80%}#backstage:before{content:"";position:absolute;z-index:2;top:calc(50% - 25px);right:calc(100% - 4px);height:50px;width:4px;background:#dee2e6}@media screen and (max-width:425px){#backstage{width:calc(100vw - 25px)}}#backstage.open{transform:none}#backstage .toggle-visibility{position:absolute;z-index:1;top:calc(50% - 25px);right:100%;width:25px;height:50px;padding:0;background:#dee2e6;color:#000;border:none;border-top-left-radius:25px;border-bottom-left-radius:25px;border-top-right-radius:0;border-bottom-right-radius:0;box-shadow:inset 2px 0 3px rgba(0,0,0,.25);font-size:18px}#backstage button{color:#000;background:transparent;padding:8px;border-radius:16px;border:1px solid #000}#backstage button:hover{background:#e9ecef}#backstage p{padding:0 8px}#backstage li,#backstage p,#backstage td{font-size:12px}#backstage input,#backstage select{color:#000;background:transparent;border:1px solid #000;padding:8px}#backstage table{background:transparent;table-layout:fixed;border-collapse:collapse;width:calc(100% - 16px);margin:8px}#backstage th{text-align:left}#backstage td{position:relative;border:1px solid #000;padding:8px;vertical-align:top}#backstage td:first-child{border-left:none}#backstage td:last-child{border-right:none}#backstage td button,#backstage td input{background:none;border:none;border-radius:0;position:absolute;top:0;left:0;bottom:0;width:100%;padding:8px}#backstage textarea{background:transparent;border:1px solid #000;color:#000;padding:8px;width:100%;height:7.75em}#backstage .block{display:block;margin:8px;width:calc(100% - 16px)}#backstage .disabled{color:#868e96}#backstage .indented-input{margin-left:calc(10em + 8px);font-size:12px}#backstage .input-group{display:flex;align-items:center}#backstage .input-group label:first-child{text-align:right;margin-right:8px;width:10em}#backstage .input-group input,#backstage .input-group select{flex-grow:1}#backstage .segmented-button{display:flex}#backstage .segmented-button button{border-left:none;border-radius:0;margin:0;flex-grow:1}#backstage .segmented-button button:first-child{border-left:1px solid #000;border-top-left-radius:16px;border-bottom-left-radius:16px}#backstage .segmented-button button:last-child{border-top-right-radius:16px;border-bottom-right-radius:16px}#backstage .segmented-button .fixed{flex-grow:0;min-width:24px}#backstage .tab-content{max-height:calc(100vh - 28px);overflow:auto}
.fade-in{opacity:0;animation:fade-in 1s ease-out forwards}.fade-out{animation:fade-in 1s ease-out reverse forwards}.skip-animation{animation-delay:0s!important}@keyframes fade-in{0%{opacity:0}to{opacity:1}}
#page .warnings{list-style-type:none;padding-left:0;margin-left:0}
.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}#backdrop{min-height:100vh;align-items:center}#backdrop,#page{display:flex;justify-content:center}#page{flex-direction:column;width:40em;min-height:calc(100vh - 2em);max-width:calc(100vw - 2em);line-height:150%;margin:1em;padding:4em 4em 2em;position:relative}#page article{flex-grow:1;display:flex}#page article>:first-child{margin-top:0;width:100%}#page footer,#page header{display:flex}#page footer>div,#page header>div{flex-grow:1}#page footer p,#page header p{margin:.5em 0 0}#page footer .center,#page header .center{text-align:center}#page footer .right p,#page header .right p{text-align:right}#page header{margin-top:0}#page header.has-content{border-bottom:1px solid #000}#page header.has-content+article>article>div>p:first-child,#page header.has-content+article>div>p:first-child{margin-top:1em}#page footer{margin-bottom:0}#page footer.has-content{border-top:1px solid #000}#page hr{border:none}#page hr:after{content:"* \A0   * \A0   *";display:block;text-align:center}#page .error,#page .warning{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu Cantarell,Helvetica Neue,sans-serif;font-size:80%;background:#fff5f5;color:#c92a2a;padding:.5em;border-left:4px solid #ffa8a8;position:relative;margin-bottom:1em;overflow:auto}#page .error :first-child,#page .warning :first-child{margin-top:0}#page .error :last-child,#page .warning :last-child{margin-bottom:0}#page .error a,#page .warning a{color:#c92a2a}#page .warning{background:#fff9db;color:#e67700}#page .warning a{color:#e67700}#page .fork p{display:flex;flex-direction:column;width:100%}#page .fork p a{display:block;flex-grow:1;text-align:center;padding:.5em}@media screen and (max-width:768px){#page{margin:0;width:100vw;max-width:100vw;min-height:100vh;padding:1em}}#spinner{position:absolute;bottom:0;right:0;opacity:0;transition:opacity .25s ease-in-out;pointer-events:none}#spinner.visible{display:block;opacity:1}
*{box-sizing:border-box}body{margin:0;padding:0}img{max-width:100%;height:auto}input[type=text],select{padding:.25em}pre{white-space:pre-wrap}tw-storydata{display:none}</style></head><body><form id="cb-validation" action="javascript:void(0)"><button id="cb-validation-tester" hidden></button> <button id="cb-block-enter-key" hidden></button><div id="backdrop"><div id="page" aria-live="polite"><header><div class="left"></div><div class="center"></div><div class="right"></div></header><article></article><ul class="warnings"></ul><footer><div class="left"></div><div class="center"></div><div class="right"></div></footer><div id="spinner"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogICAgPHJlY3QgeD0iMzEiIHk9IjE0IiB3aWR0aD0iMzgiIGhlaWdodD0iNzIiIHJ4PSI0IiBmaWxsPSJ3aGl0ZSIgLz4KICAgIDxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjI4IiBmaWxsPSJ3aGl0ZSIgLz4KCTxyZWN0IHg9IjM1IiB5PSIxOCIgd2lkdGg9IjMwIiBoZWlnaHQ9IjY0IiByeD0iNCIgZmlsbD0id2hpdGUiIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2U9ImJsYWNrIiAvPgogICAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iMjAiIHN0cm9rZT0iYmxhY2siIGZpbGw9IndoaXRlIiBzdHJva2Utd2lkdGg9IjJweCIgLz4KCTxsaW5lIHgxPSI1MCIgeTE9IjUwIiB4Mj0iNTAiIHkyPSIzNyIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIycHgiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0KICAgICAgICAgICAgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIgogICAgICAgICAgICBiZWdpbj0iMHMiCiAgICAgICAgICAgIGR1cj0iMjBzIgogICAgICAgICAgICB0eXBlPSJyb3RhdGUiCiAgICAgICAgICAgIGZyb209IjAgNTAgNTAiCiAgICAgICAgICAgIHRvPSIzNjAgNTAgNTAiCiAgICAgICAgICAgIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIgogICAgICAgIC8+Cgk8L2xpbmU+Cgk8bGluZSB4MT0iNTAiIHkxPSI1MCIgeDI9IjQyIiB5Mj0iNTAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2UtbGluZWNhcD0icm91bmQiPgogICAgICAgIDxhbmltYXRlVHJhbnNmb3JtCiAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIKICAgICAgICAgICAgYmVnaW49IjBzIgogICAgICAgICAgICBkdXI9IjEyMHMiCiAgICAgICAgICAgIHR5cGU9InJvdGF0ZSIKICAgICAgICAgICAgZnJvbT0iMCA1MCA1MCIKICAgICAgICAgICAgdG89IjM2MCA1MCA1MCIKICAgICAgICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiCiAgICAgICAgLz4KCTwvbGluZT4KPC9zdmc+" width="40" height="40" alt=""></div></div></div></form><tw-storydata name="The Flâneur as Detective" startnode="1" creator="Twine" creator-version="2.3.8" ifid="F9C5BFE3-C083-4721-9F01-D4C8D0C6AC49" zoom="0.6" format="Chapbook" format-version="1.1.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-tag name="sad" color="red"></tw-tag>,<tw-tag name="dupin" color="purple"></tw-tag>,<tw-tag name="jackie" color="blue"></tw-tag>,<tw-tag name="pros" color="orange"></tw-tag>,<tw-tag name="walter" color="green"></tw-tag>,<tw-tag name="multiple" color="red"></tw-tag>,<tw-tag name="poirot" color="green"></tw-tag>,<tw-tag name="phyllis" color="yellow"></tw-tag>,<tw-tag name="v" color="red"></tw-tag>,<tw-tag name="seb" color="blue"></tw-tag><tw-passagedata pid="1" name="tutorial" tags="" position="74.6666666666667,276.33333333333337" size="100,100">Click the underlined text to [[proceed-&gt;tut1]]</tw-passagedata><tw-passagedata pid="2" name="introquote" tags="" position="621.3333333333334,144.66666666666669" size="100,100">&quot;Time forks perpetually towards immutable futures. In one of them, I am your enemy.&quot; 

&quot;The future already exists...but I am  your friend.&quot; 

[align right]
—Jorge Luis Borges, &lt;i&gt;&quot;The Garden of Forking Paths,&quot;&lt;/i&gt; (28)

[align left]
&quot;When it is a matter of evaluating a person&#39;s behavior, an intimate acquaintance with these interests will often be much more useful than an acquaintance with his personality...Thus the detective sees rather wide areas opening up to his self-esteem...He catches things in flights;this enables him to dream that he is like an artist. Everyone praises the swift crayon of the graphic artist. Balzac claims that artistry as such is tied to a quick grasp.&quot;

[align right]
—Walter Benjamin, &lt;i&gt;&quot;The Flâneur,&quot;&lt;/i&gt; (40-41)
&lt;br&gt;
[[next-&gt;combined]]</tw-passagedata><tw-passagedata pid="3" name="tut1" tags="" position="219.99999999999997,280.33333333333337" size="100,100">Sometimes there are [[multiple links-&gt;tut2.1]] in a passage. Perhaps they offer you [[different paths.-&gt;tut2.2]]</tw-passagedata><tw-passagedata pid="4" name="tut2.1" tags="" position="376,285.00000000000006" size="100,100">What is the point of a reverse button? There are no undos in life, just the choices you make and the [[consequences that follow.-&gt;first]] </tw-passagedata><tw-passagedata pid="5" name="tut2.2" tags="" position="371,140.33333333333331" size="100,100">The focus on different paths is not to walk every single one, but navigate naturally on the one you choose. We [[stroll-&gt;first]], in these times, not run. </tw-passagedata><tw-passagedata pid="6" name="combined" tags="" position="746.6666666666666,75" size="100,100">&quot;Time forks &lt;span style=&quot;color: white;&quot;&gt;perpetually&lt;/span&gt; to&lt;span style=&quot;color: white;&quot;&gt;wards im&lt;/span&gt;mutable futures. &lt;span style=&quot;color: white;&quot;&gt;In one of them, &lt;/span&gt;I am your enemy 

&lt;span style=&quot;color: white;&quot;&gt;&quot;The future already exists...&lt;/span&gt;but I am  your friend

&lt;span style=&quot;color: white;&quot;&gt;[align right]
—J&lt;/span&gt;or&lt;span style=&quot;color: white;&quot;&gt;ge Luis Borges, &lt;i&gt;&quot;&lt;/span&gt;The&lt;span style=&quot;color: white;&quot;&gt; Garden of Forking &lt;/span&gt;Path&lt;/i&gt;

[align left]
&lt;span style=&quot;color: white;&quot;&gt;&quot;When it &lt;/span&gt;is &lt;span style=&quot;color: white;&quot;&gt;matter of evaluating a person&#39;s behavior,&lt;/span&gt; an intimate acquaintance. &lt;span style=&quot;color: white;&quot;&gt;with these interests will often be much more useful than an acquaintance with his personality...Thus&lt;/span&gt; The detective sees&lt;span style=&quot;color: white;&quot;&gt; rather wide areas opening up to his self-esteem...He catches &lt;/span&gt;things in flight;&lt;span style=&quot;color: white;&quot;&gt;s;this enables him &lt;/span&gt; to dream &lt;span style=&quot;color: white;&quot;&gt;that he is like an artist. Everyone praises the swift crayon of the graphic artist. Balzac claims that artistry as such is tied &lt;/span&gt;to &lt;span style=&quot;color: white;&quot;&gt;a quick&lt;/span&gt;grasp:

[align right]
&lt;span style=&quot;color: white;&quot;&gt;—Walter Benjamin, &lt;i&gt;&quot;&lt;/span&gt;The Flâneur.&lt;/i&gt;&lt;span style=&quot;color: white;&quot;&gt; (40-41)
&lt;br&gt;
[[next-&gt;TEST START wakeup]] 


</tw-passagedata><tw-passagedata pid="7" name="TEST START wakeup" tags="" position="781,205.66666666666677" size="100,100">Wake up! 

The world is black and glowing red in your closed eyelids. You&#39;re lying in a bed of soft wool—or perhaps you&#39;re lying in a bed where the mattress is hard and lumpy—or perhaps your bed is really just a duvet, pushed in the corner of your flat, or apartment, or house, or shed. 

You won&#39;t know anything until you wake up! Open your [[eyes-&gt;eyes1]]!</tw-passagedata><tw-passagedata pid="8" name="eyes1" tags="" position="43,747.6666666666667" size="100,100">score:0
dupinscore: 0
poirotscore: 0
jackiescore: 0
prosscore: 0
walterscore: 0
phyllisscore: 0
vscore:0
sebscore: 0

--

The first thing you see is a [[frame]] of a [[woman-&gt;portrait]]</tw-passagedata><tw-passagedata pid="9" name="frame" tags="" position="74.48148139317834,1161.6666666666667" size="100,100">The frame, when you pick it up, is heavy gilt, and a little tarnished from lack of care. Beyond it, she smiles up at you, and her face is so familiar... The backing is rough as your fingers run over it, trying to unravel the [[mystery behind her smile.-&gt;dupinwoman]]</tw-passagedata><tw-passagedata pid="10" name="portrait" tags="" position="331.33333333333337,774" size="100,100">You can&#39;t stop thinking about her. From beyond the glass sheen, [[her wide eyes-&gt;vsebwoman]] are probing, one strand of hair falls across her [[face.-&gt;walterphylliswoman]]</tw-passagedata><tw-passagedata pid="11" name="vsebwoman" tags="" position="1024,1785" size="100,100">vscore: vscore+1
sebscore: sebscore+1

--

You cannot stop staring at her eyes. Eyes are the windows to the soul, so you hear. 

[[You know her, unfortunately.-&gt;seb1]]&lt;br&gt;
[[You wonder who she is-&gt;v1]]</tw-passagedata><tw-passagedata pid="12" name="walterphylliswoman" tags="" position="1163.6666666666665,1222.0000000000002" size="100,100">walterscore: walterscore+1
phyllisscore: phyllisscore+1
prosscore: prosscore+1
--

She is beautiful certainly. But is she [[kind?-&gt;phyllislolamurder]] Is she [[enigmatic?-&gt;portraitpros1]] Or is she [[dangerous?-&gt;portraitwalter]]</tw-passagedata><tw-passagedata pid="13" name="dupinwoman" tags="dupin" position="327.3333333333335,1157.6666666666667" size="100,100">dupinscore: dupinscore+1

--

You find a [[piece of scrap paper-&gt;woman letter]] on the back side. It is worn out and folded; clearly, aged. </tw-passagedata><tw-passagedata pid="14" name="Final" tags="" position="4619,1142.6667073567708" size="100,100">click the highest number below:

[[{jackiescore}-&gt;jackieending]]&lt;br&gt;
[[{poirotscore}-&gt;poirotending]]&lt;br&gt;
[[{dupinscore}-&gt;dupinending]]&lt;br&gt;
[[{prosscore}-&gt;prosending]]&lt;br&gt;
[[{walterscore}-&gt;walterending]]&lt;br&gt;
[[{phyllisscore}-&gt;phyllisending]]&lt;br&gt;
[[{vscore}-&gt;vending]]&lt;br&gt;
[[{sebscore}-&gt;sebending]]&lt;br&gt;
</tw-passagedata><tw-passagedata pid="15" name="woman letter" tags="multiple" position="614,2413.3333333333335" size="100,100">dupinscore: dupinscore+1
poirotscore: poirotscore+1
--
In beautiful script, someone has written, &lt;i&gt;I thank you for your great&lt;/i&gt; and here, the text is smudged—does it say &lt;i&gt;[[service-&gt;dupinservice]]&lt;/i&gt;? Or perhaps &lt;i&gt;[[kindness.-&gt;poirotsomeone]]&lt;/i&gt; Regardless, it continues: &lt;i&gt;I won&#39;t forget you—remember you may always call upon me for any assistance I can provide.&lt;/i&gt;.

Below, a scrawled signature.</tw-passagedata><tw-passagedata pid="16" name="dupinservice" tags="dupin" position="695.6666666666666,2543.3333333333335" size="100,100">dupinscore: dupinscore+1
--

Of course, you didn&#39;t do it for her. Why would you? It&#39;s all about the mind, it&#39;s all about—the [[cerebrality]] of it, you suppose.</tw-passagedata><tw-passagedata pid="17" name="poirotsomeone" tags="poirot" position="892.3333333333334,2136.6666666666665" size="100,100">poirotscore: poirotscore+1
jackiescore: jackiescore+1
--

You&#39;ve never particularly thought yourself as kind, just decent, like most human beings. Decency has never equalled being [[right-&gt;jackieright]], or [[morally just-&gt;poirotright]]. </tw-passagedata><tw-passagedata pid="18" name="phyllislolamurder" tags="phyllis" position="1415.333333333333,1237.0000000000002" size="100,100">phyllisscore: phyllisscore+1
--

Kindness is for the weak, you muse. That&#39;s why you&#39;ve never liked her—she&#39;s got those enormous limpid eyes that prey have. [[You can barely stand the sight of her.-&gt;pmurder1]]


</tw-passagedata><tw-passagedata pid="19" name="portraitwalter" tags="walter" position="1391.9999999999998,1453.666666666667" size="100,100">walterscore: walterscore+1
--

The portrait shakes, suddenly, as the boat hits a particularly rough wave. You let it fall; you took out the glass knowing that it would fall many, many times. What matters is that you [[always, inevitably, even as you war with yourself over the decision, place it back up.-&gt;wportrait1]] 


</tw-passagedata><tw-passagedata pid="20" name="portraitpros1" tags="pros" position="1154.6666666666665,756.6666666666666" size="100,100">prosscore: prosscore+1
--

You think to yourself that she is certainly a beautiful woman, but in your experience, beautiful women tend to cause a lot of trouble that they never seem to need to face.

[[Stare at the portrait some more.-&gt;portraitstare]]

[[You have a lot of work to do. Time to stop staring at women.-&gt;backgroundpros2]]</tw-passagedata><tw-passagedata pid="21" name="dupinending" tags="" position="4835.666666666666,884.3333740234378" size="100,100">[if dupinscore &lt;= 6]
More cerebral than most, but scathing at the idea of human intimacy. You wonder what it&#39;s like to be mundane.

{reveal link: &#39;Who are you? &#39;, text: &#39;The score is too close to tell; who you are is clearly a mystery even to yourself.&#39;}

[else]
You have never loved what stark daylight shows; if anything, you seek the company of a trusted friend when stalking the cobbled streets. For one who has fallen from wealth, money never meant much to you before and not particularly afterwards.

You scathe at the idea of being like others—you see them, you &lt;i&gt;see&lt;/i&gt; them for who they truly are, with all their scurrilous tendencies, so easily read and understood. You love the comfort of books more than the warm embrace of another; words, after all, contain more mysteries than people.

You are {reveal link: &#39;—who?&#39;, text: &#39; &lt;i&gt;&lt;b&gt; Auguste Dupin.&#39;}</tw-passagedata><tw-passagedata pid="22" name="cerebrality" tags="" position="838.9999999999999,2546.6666666666665" size="100,100">You just enjoy the puzzle of it more than you enjoyed [[helping her-&gt;ruminate]]. In the end, it was the same result, no? 
</tw-passagedata><tw-passagedata pid="23" name="portraitstare" tags="" position="1239.9999999999998,331.33333333333337" size="100,100">prosscore: prosscore+1
vscore: vscore+1
--

And yet, you can&#39;t seem to take your eyes off of her. She gets you to start thinking about all the women who [[have been present-&gt;pportrait]] in your life, and also the women who were [[never present, not at all.-&gt;vportrait]]

</tw-passagedata><tw-passagedata pid="24" name="backgroundpros2" tags="" position="1331.3333333333328,785" size="100,100">prosscore: prosscore+1

--

You stretch and get dressed. In your dresser you find yourself staring at a wide and varied selection of clothing, some of which obviously belong to you (and some of which do not.) What is this [[crisp suit and tie-&gt;suits]] What is this [[bright gauzy wear-&gt;phyllisclothes]]? </tw-passagedata><tw-passagedata pid="25" name="seb1" tags="seb" position="1320,1930.0000000000005" size="100,100">sebscore: sebscore+1
--

There is nobody you regret more in the world than [[her.-&gt;seb2]]



 </tw-passagedata><tw-passagedata pid="26" name="v1" tags="v" position="1322.6666666666665,1737.0000000000002" size="100,100">vscore: vscore+1
--

She&#39;s the last clue to your brother&#39;s disappearance. Months ago, he vanished, and from all of his possessions that you had to go through, that portrait of her was the only item that piqued your interest. Something about the enigmatic stare in her eyes. The frame he&#39;d put her in—so carefully chosen, with even the small gems inset in the sides complimenting the blue nature of her eyes. You think that you&#39;ve never seen your brother as [[desperately in love with a woman as this one-&gt;v2]], even though you&#39;d never seen her, or them together.   

</tw-passagedata><tw-passagedata pid="27" name="suits" tags="walter" position="1530.9999999999998,961.6666666666665" size="100,100">walterscore: walterscore+1
--
But when you look at yourself in the mirror, all you can think about is that this is the suit you wore when you last saw her. 

Maybe that&#39;s why you haven&#39;t worn it since. [[Too many bad memories-&gt;walt1]]. [[Too many good ones-&gt;walt1]]. 

</tw-passagedata><tw-passagedata pid="28" name="phyllisclothes" tags="" position="1564.3333333333333,681" size="100,100">phyllisscore: phyllisscore+1
--

It&#39;s light and airy, and very comfortable to put on. You feel very free in it, but a little indulgent, like you want to lounge around the house and run a household. You take the portrait, glare at it for a moment, and then place it facedown.

On the dresser, you find a note you&#39;ve [[written yourself.-&gt;phyllischores]]</tw-passagedata><tw-passagedata pid="29" name="phyllischores" tags="" position="1771.3333333333335,667.3333333333333" size="100,100">It&#39;s a to-do list, which you&#39;re now immensely thankful for. The first item on your list is:

[[Go shopping for groceries-&gt;humblegroceries]]

[[Remind the butler of the need to shop for groceries-&gt;richgroceries]]
</tw-passagedata><tw-passagedata pid="30" name="humblegroceries" tags="seb" position="1966.333333333334,715.6666666666666" size="100,100">prosscore: prosscore+1
sebscore: sebscore+1
jackiescore: jackiescore+1
walterscore: walterscore+1
--

Off to the market, [[then.-&gt;ajourney]]</tw-passagedata><tw-passagedata pid="31" name="richgroceries" tags="phyllis" position="1912.3333333333335,439.6666666666665" size="100,100">phyllisscore: phyllisscore+1
poirotscore: poirotscore+1
sebscore: sebscore+1
dupinscore: dupinscore+1

--

After you inform him of all the upcoming groceries you&#39;ll need for the next week, you decide that it&#39;s high time you take a little time for yourself. [[Self care-&gt;pdress1]], after all, is important. </tw-passagedata><tw-passagedata pid="32" name="ajourney" tags="" position="2149.666666666667,710.6666666666665" size="100,100">There are two grocery stores in town. There&#39;s one that you&#39;re [[intimately familiar with-&gt;pgrocery]] and one in which you have [[no idea what to expect.-&gt;sebgrocery]] 
</tw-passagedata><tw-passagedata pid="33" name="ruminate" tags="multiple" position="1020.6666666666664,2551.6666666666665" size="100,100">vscore: vscore+1
sebscore: sebscore+1
walterscore: walterscore+1
prosscore: prosscore+1

--

Is there something wrong with you, that you cannot stop staring at it? She is beautiful but many women are beautiful. You pocket the note, which you&#39;d been meaning to put in your wallet for a while.

Angrily, you put away the picture and finally turn around to the [[rest of the room.]]</tw-passagedata><tw-passagedata pid="34" name="rest of the room." tags="" position="1212.3333333333333,2539.9999999999995" size="100,100">After getting dressed in your everyday clothes, you decide it&#39;s high time you get some fresh air, either through the [[window-&gt;dupinwindow]] or in a [[walk.-&gt;jackiewalk]]</tw-passagedata><tw-passagedata pid="35" name="jackiewalk" tags="jackie" position="1672.333333333333,2698.333333333333" size="100,100">vis1: false
jackiescore: jackiescore+1
--
You&#39;re not used to being outside at this time of day, you admit, but you&#39;ll [[make do.-&gt;walk]]

</tw-passagedata><tw-passagedata pid="36" name="huffreligion" tags="walter" position="2064,2810" size="100,100">vis1: true
walterscore: walterscore+1
--
You haven&#39;t been to church in a very [[long time-&gt;walk]], you muse. </tw-passagedata><tw-passagedata pid="37" name="pros" tags="pros" position="1754.0000000000002,2419.9999999999995" size="100,100">vis1: true
prosscore: prosscore+1
--

You always feel bad for the beggars, yes, but it&#39;s not like you can do much for them. There&#39;s not much that you can even [[do for yourself.-&gt;walk]]
</tw-passagedata><tw-passagedata pid="38" name="dupinwealth" tags="dupin" position="1995.6666666666665,2620" size="100,100">dupinscore: dupinscore+1

--

You certainly remember what wealth felt like. As you let the breeze caress your face, a [[scream splits the air.-&gt;dupindeath]]</tw-passagedata><tw-passagedata pid="39" name="dupindeath" tags="" position="2235.6666666666665,2619.9999999999995" size="100,100">It&#39;s just around the corner, and you&#39;re sprinting before you know it—it&#39;s not in your nature to not be curious. As you pass startled onlookers, you see it: a [[murder.-&gt;deathdescribed]]</tw-passagedata><tw-passagedata pid="40" name="deathdescribed" tags="dupin" position="2442.333333333333,2681.6666666666665" size="100,100">dupinscore: dupinscore+1

--

The woman is facedown, and her hair spills around her in viscous, blood-matted strands, still [[oozing sluggishly-&gt;observe1]] out of her wound. You cannot see any footprints or [[signs of struggle-&gt;observe1]] but you can tell that there is something more to the [[story-&gt;observe1]]. </tw-passagedata><tw-passagedata pid="41" name="dupinwindow" tags="dupin" position="1692.333333333333,2843.333333333333" size="100,100">vis1: false
dupinscore: dupinscore+1
--
It&#39;s lovely outside, in the sort of way that you usually sleep through. You have a good view of the street, which is lovely and almost empty, save the occasional walker; you hear a little bit of disturbance outside, but nothing overly dramatic. 

[[Read your paper.-&gt;dupininvest]]&lt;br&gt;
[[Go outside to see what happened.-&gt;poirotinvest]]</tw-passagedata><tw-passagedata pid="42" name="poirotinvest" tags="" position="1949,2949.9999999999995" size="100,100">poirotscore: poirotscore+1
--

You wait for the wail of sirens to die down before you emerge. There&#39;s yellow tape everywhere; as you make to dip below them, one of the police officers stops you. &quot;Excuse me,&quot; she says. &quot;This is an [[active crime scene.&quot;-&gt;poirot1]]
</tw-passagedata><tw-passagedata pid="43" name="dupininvest" tags="" position="1950.6666666666665,3126.666666666666" size="100,100">dupinscore: dupinscore+1
--
[if vis1]
As you read the paper, you skim the headlines. [[Protest]] happening in the Hall of Justice, new opening of a [[dress store]] downtown, the ascension of a local high school boy to the [[NFL draft-&gt;nfl]], the interview of a male [[entrepreneur]] as he plans to create a chain of tea stores...You skim through all of them in the blink of an eye, before landing on the [[obituaries-&gt;dupin1]] section. 

[else]
The obituaries section drops out of the picture and [[catches your eye.-&gt;dupin1]]

</tw-passagedata><tw-passagedata pid="44" name="observe1" tags="dupin" position="2649,2676.6666666666665" size="100,100">dupinscore: dupinscore+1

--

In fact, you know [[who killed her.-&gt;observe2]]</tw-passagedata><tw-passagedata pid="45" name="observe2" tags="dupin" position="2834,2664.9999999999995" size="100,100">dupinscore: dupinscore+1

--

It&#39;s obvious—you can tell from the way the body was angled that the wound came from above, that she had simply just [[crumpled to the ground-&gt;observe3]]. An expert shot, then, but definitely not enough of a mess to have been produced from a long-range weapon then. The exit wound is in the back—a [[vendetta shot-&gt;observe3]], then; the killer had wanted to see her face as she died. Someone who knew the exact path she would take today. Ex-partner then, or someone else who had wronged her. You can tell from her clothes that she is a [[governmental worker-&gt;observe3]]; this broadens it up a little bit. She&#39;s wearing expensive shoes, expensive jewelry, but no wedding ring. And most importantly, pinned to her lapel is a little [[green leaf pin-&gt;observe3]] that you&#39;ve seen on so many posters and in the pictures on newspapers. </tw-passagedata><tw-passagedata pid="46" name="observe3" tags="dupin" position="3007.3333333333335,2658.3333333333326" size="100,100">dupinscore: dupinscore+1

--

When the police come, it&#39;s easy to see that they suspect you&#39;re the main culprit. The way you are just standing there, gazing with a cool, calculating look, makes the policemen start scrabbling for their guns. You oblige, raising your hands and complying in every way. But after you tell them your name, they relax. Word of you has spread, you know, after solving that case. &lt;i&gt;Her&lt;/i&gt; case. The woman in the portrait. 

[[Sometimes, notoriety can be helpful.-&gt;observe4]]</tw-passagedata><tw-passagedata pid="47" name="walk" tags="" position="1840.6666666666663,2683.3333333333335" size="100,100">[if vis1]
There&#39;s nothing else to do but keep walking. That is, until you hear [[the scream.-&gt;deathdescribed]]

[else]

The view outside is breathtaking. If you squint a bit, you could make out the tall spires of the local [[church-&gt;huffreligion]]. Or perhaps the corner of the town&#39;s [[Hall of Justice-&gt;pros]]. You can hear faint shouts over there; there&#39;s a protest happening, a new climate change bill or something or the other that you don&#39;t really give a damn about. It&#39;s clear to you that there is a sharp divide between one side of the town and the other—one side is for the rich, the [[wealthy-&gt;dupinwealth]], while the other is for the [[beggars-&gt;jackiebeg]]. You can see clearly which side you&#39;re on.

</tw-passagedata><tw-passagedata pid="48" name="jackiebeg" tags="jackie" position="1902.333333333333,2403.333333333333" size="100,100">jackiescore: jackiescore+1
dupinscore: dupinscore+1
vscore: vscore+1

--
You try not to think of yourself as a beggar, &lt;i&gt;really&lt;/i&gt;. Just, someone who&#39;s fallen on [[hard times.-&gt;jackie1]]</tw-passagedata><tw-passagedata pid="49" name="observe4" tags="" position="3194,2658.3333333333326" size="100,100">&quot;Your thoughts, then?&quot; asks the man who is clearly more in charge than the rest of them. He&#39;s not high enough for you to know his name, though. 

&quot;Search the protestors,&quot; you respond to him. &quot;Especially anyone opposing the bill that she might&#39;ve worked for. Your shooter is likely among that very short list.&quot;

&quot;Eh? [[How do you know?-&gt;observe5]]&quot;</tw-passagedata><tw-passagedata pid="50" name="observe5" tags="" position="3359,2661.666666666666" size="100,100">When you tell him your observations, he is shocked. His companion, next to him, laughs. &quot;Keep your ear to the ground more,&quot; he said. &quot;Didn&#39;t you hear of the Councilwoman&#39;s case when she was blackmailed? This one over here solved it instantly.&quot;

And then, to you, &quot;Sorry, he&#39;s new. [[Appreciate your help, as always.-&gt;appreciation]]&quot; </tw-passagedata><tw-passagedata pid="51" name="appreciation" tags="" position="3535.6666666666665,2668.3333333333326" size="100,100">You remember how she looked at you when you&#39;d told her not to worry about the blackmailing. The blatant gratefulness in her eyes. Something about her demeanor told you that it was not her idea to send you the framed photograph—it looked standard, like the type of photo her office often sent out to folks. But the letter, that had been all her. 

The dead woman—you&#39;ll most likely never know [[her name.-&gt;appreciation1]]</tw-passagedata><tw-passagedata pid="52" name="appreciation1" tags="" position="3704,2659.9999999999995" size="100,100">You think to yourself that perhaps it&#39;s time for you to speak again with her. Not to call upon that favor, but for some other, intangible reason.

It&#39;s not like you to be so affected by the sight of someone dead. Maybe it&#39;s because of the lack of a companion by your side. Maybe it&#39;s the sunlight, so harshly bright on a scene that you normally only examine at dark. But you find yourself [[wanting to look into living eyes.-&gt;livingeyes]] </tw-passagedata><tw-passagedata pid="53" name="jackie1" tags="jackie" position="2075.666666666667,2436.6666666666665" size="100,100">jackiescore: jackiescore+2
--
You continue walking. You&#39;ve always loved to walk—well, more appropriately, you had to learn to walk when you realized your family could never afford a car. 

But you never cared. You genuinely never cared about being rich, or clambering your way up the social ranks. [[Until her.-&gt;jackie2]]</tw-passagedata><tw-passagedata pid="54" name="livingeyes" tags="" position="3889,2664.9999999999995" size="100,100">Most times, cases like these are exciting. You&#39;re not sure why, but this one makes you wish you&#39;d stuck to [[your books.-&gt;Final]] </tw-passagedata><tw-passagedata pid="55" name="jackieending" tags="" position="4817.333333333334,1216.0000406901042" size="100,100">[if jackiescore &lt;= 6]
You&#39;ve never been the type to be unhappy with your lot in life, as little as it is. But when others interfere...well...

{reveal link: &#39;Who are you? &#39;, text: &#39;The score is too close to tell; who you are is clearly a mystery even to yourself.&#39;}

[else]
You consider loyalty to be your most redeeming trait. The moment you fell in love, that was it—you were loyal for life. So when others attempt to trample on your happiness—what makes you any less worthy for trying to be happy? Your lack of money and circumstance? 

You forget, sometimes, that an abundance of loyalty leads to being blind. But once you&#39;re in, you&#39;re in (what&#39;s that saying? In for a penny, in for a pound?). God forgive you for the acts you do for love. 

You are {reveal link: &#39;—who?&#39;, text: &#39; &lt;i&gt;&lt;b&gt; Jacqueline de Vellefort.&#39;}</tw-passagedata><tw-passagedata pid="56" name="poirotending" tags="" position="4822.333333333333,591.0000406901041" size="100,100">[if poirotscore &lt;= 6]
You may not look like it, but you are in fact one of the cleverest detectives alive. Perhaps underestimation is your strongest suit...

{reveal link: &#39;Who are you? &#39;, text: &#39; The score is too close to tell; who you are is clearly a mystery even to yourself.&#39;}

[else]
Let&#39;s think, momentarily, of the many things you could&#39;ve been. A military leader; you certainly had the polished mustache for it. Or perhaps a makeup artist; you&#39;ve found that you&#39;ve a talent for disguise. Perhaps in a life, you could&#39;ve even been a fashion icon (imagine that!).

Instead, you are a detective. Perhaps ego plays some part in it; one cannot see so much disdain in the world and still remain interested in crimes without believing yourself to be above it. But above all, you enjoy the looks on people&#39;s faces when you solve the crime in front of them. In the end, that&#39;s what keeps you going.

You are{reveal link: &#39;—who? &#39;, text: &#39; &lt;i&gt;&lt;b&gt; Hercule Poirot.&#39;}</tw-passagedata><tw-passagedata pid="57" name="prosending" tags="" position="4797.333333333333,1527.6667073567708" size="100,100">[if prosscore &lt;= 6]

Well, you&#39;re not the best at your job, but when being the best at your job means the misery of so many, it&#39;s not great incentive for rising in the ranks. 

{reveal link: &#39;Who are you? &#39;, text: &#39;The score is too close to tell; who you are is clearly a mystery even to yourself.&#39;}

[else]

You entered this job bright-eyed because you wanted to help fight for those who are not educated enough to fight through the complicated legalese of the courts. At least, that&#39;s how it started. 

Now, you&#39;re just doing your job. There&#39;s not much to do here other than drink endless cups of coffee as you continue your existence.  You&#39;re doing it the best you can, even when the procedures seem roundabout and inefficient—even when the crimes are small but the punishment is high and, conversely, the crime is high but the punishment is small. What matters most is that cases are closed—right?

Yeah, you can&#39;t help but taste the bitterness of a lost dream.

You are {reveal link: &#39;—who?&#39;, text: &#39; &lt;i&gt;&lt;b&gt; The Country Prosecutor (Tawfiq Hakim).&#39;}</tw-passagedata><tw-passagedata pid="58" name="walterending" tags="" position="4806.666666666666,462.6667073567707" size="100,100">[if walterscore &lt;= 6]
Are you a villain or a hero? Well, that&#39;s up for you to decide. 

{reveal link: &#39;Who are you? &#39;, text: &#39;The score is too close to tell; who you are is clearly a mystery even to yourself.&#39;}

[else]
Let&#39;s be real, the reason you&#39;re good at your job isn&#39;t because you&#39;re a nice guy who genuinely wants people to pay you money to assure their fortune. No, your job is sharking. And you&#39;re damn good at it. 

But you have your weak spots. Sure, if anyone asks you, your weak spot is a feisty blonde with enough curves to make a whole parabola. But you find that who you are has a tendency to change under duress. Good thing you tend to avoid such events that could shake your very foundations. Right?

It&#39;s not a matter of what you do, in the end. It&#39;s what you get away with. And it&#39;s what you allow yourself to get away with. 

You are {reveal link: &#39;—who?&#39;, text: &#39; &lt;i&gt;&lt;b&gt; Walter Huff.&#39;}</tw-passagedata><tw-passagedata pid="59" name="phyllisending" tags="" position="4824,707.6667073567711" size="100,100">[if phyllisscore &lt;= 6]
All you know is that you&#39;ve never been happy on earth, that there&#39;s always been an itching for something more. But don&#39;t most people function like that?

{reveal link: &#39;Who are you? &#39;, text: &#39;The score is too close to tell; who you are is clearly a mystery even to yourself.&#39;}

[else]
Some call you a &lt;i&gt;femme fatale&lt;/i&gt;. You prefer just the terme &lt;i&gt;fatale&lt;/i&gt;. Because that&#39;s all you aspire to be—Death, in every iteration. Married to death, death&#39;s best friend, death&#39;s lover. It&#39;s a fascination that you can&#39;t quite explain. 

It isn&#39;t that you lack kindness. You understand what it is to be altruistic. You have participated in it, on occasion. But there&#39;s this palpable itch that you cannot scratch unless partaking in the act of murder. It used to concern you, as a younger and more impressionable child. It concerns you no longer. Why be fair to the world when nothing in the world is fair to you? When the only way up—is against? 

Nobody can ever say that you didn&#39;t love something. Their mistakes were always just assuming it was them that you loved. 

You are {reveal link: &#39;—who?&#39;, text: &#39; &lt;i&gt;&lt;b&gt; Phyllis Nirdlinger.&#39;}</tw-passagedata><tw-passagedata pid="60" name="vending" tags="" position="4824,1074.3333740234375" size="100,100">[if vscore &lt;= 6]
Things tend to get a little hazy for you. It seems as if the entire world is hidden behind some veil. 

{reveal link: &#39;Who are you? &#39;, text: &#39; The score is too close to tell; who you are is clearly a mystery even to yourself.&#39;}

[else]

You are a man of the mask. You have accepted that now, although you did not always accept it. You are both brother and brother. In fact, there&#39;s not much to say about you, because there was so little of you to begin with—your soul has been eclipsed since birth, and there was never anything left to overwrite. 

Identity is, after all, what you make of it. 

You are{reveal link: &#39;—who? &#39;, text: &#39; &lt;i&gt;&lt;b&gt; V.&#39;}</tw-passagedata><tw-passagedata pid="61" name="sebending" tags="" position="4822.333333333334,1364.3333740234375" size="100,100">[if sebscore &lt;= 6]
You know that you are nothing more than what you leave behind. Or who you leave behind. 

{reveal link: &#39;Who are you? &#39;, text: &#39; The score is too close to tell; who you are is clearly a mystery even to yourself.&#39;}

[else]

The problem with writers, you know, is that they are by nature self-obsessed. You are no different, embarrassingly so. Everything you write is about yourself, and people have caught on. Some criticize, some adore. 

The problem is, such egocentrism lends itself to a disposition much unpleasant in a relationship, platonic, romantic, genetic. Before you know it, you have found yourself on your deathbed, with nobody in your side. In your delirium, you know there is only one thing to do:

Rewrite.

You are{reveal link: &#39;—who? &#39;, text: &#39; &lt;i&gt;&lt;b&gt; Sebastian Knight.&#39;}</tw-passagedata><tw-passagedata pid="62" name="jackie2" tags="" position="2239,2419.9999999999995" size="100,100">jackiescore: jackiescore+1
--

When you recieved the photograph of the both of you in the mail, you&#39;d cherished it as a reminder of your [[childhood friendship-&gt;jackie3]]. The letter, albeit stilted, was still something you found charming. Of course you could always call on her. And she knew, she must have known, that she could&#39;ve called on you for anything (but she never would have, in the way that most [[imbalances-&gt;jackie3]] exist). 

But now, you keep it as a [[reminder-&gt;jackie3]]. So that you can look at her face and &lt;i&gt; seethe.&lt;/i&gt;

</tw-passagedata><tw-passagedata pid="63" name="jackie3" tags="" position="2402.3333333333335,2419.9999999999995" size="100,100">jackiescore: jackiescore+1
--

Before long, you find yourself in front of the large townhouse that she calls hers. You know where the spare key is—buried between the two frog legs. You doubt she remembers. You hear that the more powerful a person is, the fewer keys they carry, with the president carrying none. You think that she only has one key, and one that she guards carefully, because it can open anything: [[her money.-&gt;jackie4]]
</tw-passagedata><tw-passagedata pid="64" name="jackie4" tags="" position="2524,2416.6666666666665" size="100,100">jackiescore: jackiescore+1
--

And so you let yourself into her townhouse. It&#39;s the way you remember it; she really hasn&#39;t changed things since [[her parents died-&gt;jackie5]] all those years ago. There, over there, is the same fireplace with the mantel that you two painted with acrylic and her mother threw a fit. Over there is the grand piano where she would play piano while you were expected to sit and listen in awe at her skill. (Honestly, you mostly [[remember being bored.-&gt;jackie5]]) And there, through the crack of that large oaken door, you can see a slash of the sunroom, where you sat with your fiancé and watched with incredulity as she tried to [[seduce him away-&gt;jackie5]] from you. 

</tw-passagedata><tw-passagedata pid="65" name="jackie5" tags="" position="2764,2423.333333333333" size="100,100">jackiescore: jackiescore+1
--

She won&#39;t be in any of those places, though, you know. She&#39;ll be in her study, reading those papers that she never signs unread. She&#39;ll be in her study, with her little chin cupped in her fair hand, presenting her head as a target. You climb soundlessly up the stairs. You slip your hand into your purse and [[curl your fingers around the handle of the gun-&gt;jackie6]]. Two flights up, then hallway to the right. The golden plaque reads her father&#39;s name, still. 

</tw-passagedata><tw-passagedata pid="66" name="jackie6" tags="" position="2932.3333333333335,2418.333333333333" size="100,100">When you open the door, she is not in fact at the desk, where you expect her to be. Instead, she&#39;s staring out the window, sunlight pooling over her face. She looks at you, startled, and then with regretful fear. 

&quot;Please,&quot; she says. &quot;You don&#39;t have to [[do this.-&gt;jackie7]]&quot;

</tw-passagedata><tw-passagedata pid="67" name="jackie7" tags="" position="3077.3333333333335,2416.666666666666" size="100,100">&quot;You know I do,&quot; you say. &quot;You can&#39;t take everything from me and expect to get away with it.&quot;

&quot;He tried to &lt;i&gt;rob&lt;/i&gt; me, J.&quot; She has the audacity to look affronted, and there&#39;s even a pretty sheen of tears in her eyes. Perhaps she is heartbroken, after all. [[She deserves it.-&gt;jackie8]]

</tw-passagedata><tw-passagedata pid="68" name="jackie8" tags="" position="3224,2419.9999999999995" size="100,100">&quot;It wasn&#39;t enough though,&quot; you say, trembling. &quot;You just had to get Simon jailed. You couldn&#39;t have let me be happy. You&#39;re not used to letting others be happy, aren&#39;t you?&quot;

&quot;Please,&quot; she pleads, her fingers outstretched. It reminds you of when you were children, how you would hold hands while skipping through the meadows. But it also reminds you of the last time you held Simon&#39;s hand, as his leg bled out, and he wavered between death and a fate worse than it: being away from you. 

So you [[shoot her.-&gt;jackie9]]

</tw-passagedata><tw-passagedata pid="69" name="jackie9" tags="" position="3280.666666666667,2423.3333333333326" size="100,100">You shoot her, and her mouth opens in a [[little shocked &#39;O,&#39;-&gt;jackie10]] so pretty and delicate like the rest of her. But then her body catches up to the [[ballistic shock-&gt;jackie10]] and she crumples, [[ugly in death-&gt;jackie10]] like all are. The gunshot was not loud, but you imagine that the police will come anyway. 

</tw-passagedata><tw-passagedata pid="70" name="jackie10" tags="" position="3537.3333333333335,2428.3333333333326" size="100,100">But it&#39;s all right. It&#39;s all to plan. They will come in shouting and find you kneeled before your [[former best friend&#39;s dead corpse-&gt;jackie11]], dress soaked hem-deep in blood, and you will feel the bite of handcuffs. They will take you [[to the courts-&gt;jackie11]], where you will sit meek as milk while they deal out your sentence—and she&#39;s an affluent white woman, [[the sentence will be high-&gt;jackie11]]—and you will be carted off to jail. It&#39;s okay. [[It&#39;s all according to plan.-&gt;jackie11]] 
</tw-passagedata><tw-passagedata pid="71" name="jackie11" tags="" position="3692.3333333333335,2428.333333333333" size="100,100">So you sit, and you touch her hand. You think of her smile in the picture she sent—of both of your smiles, so happy and beguiling from the very start, and of the life in her lovely eyes. And you reach out and you close the lids of that last accusing stare, and you [[pray for all forgiveness.-&gt;Final]] </tw-passagedata><tw-passagedata pid="72" name="dupin1" tags="" position="2264,3083.333333333333" size="100,100">dupinscore: dupinscore+1
--

What catches your eye is the picture. For a moment, you cannot believe your eyes—you startle, badly, in a way that doesn&#39;t often happen to you. You contemplate waking up your roommate, but then decide against it immediately. Instead, you [[read the obituary.-&gt;dupin2]] 

</tw-passagedata><tw-passagedata pid="73" name="poirot1" tags="" position="2142.3333333333335,2941.666666666666" size="100,100">poirotscore: poirotscore+1
--

&quot;That&#39;s all right,&quot; you say. &quot;You&#39;ll need me to solve it anyway.&quot;

She gives you a skeptical look and you smile at her patiently to wait it out. They always give you a look like this; they see your fuddy-duddy clothes, your unassuming demeanor, and you can see the calculations go through their mind: tabloid? suspect? witness?, [[without ever landing on the correct answer.-&gt;pinvest2]]

</tw-passagedata><tw-passagedata pid="74" name="Protest" tags="" position="1797.333333333333,3146.666666666666" size="100,100">vis1: true
--

It&#39;s obvious that they&#39;re protesting the newest climate change bill that the city was trying to pass. What side they&#39;re protesting for is [[beyond you-&gt;dupininvest]], however. </tw-passagedata><tw-passagedata pid="75" name="dress store" tags="" position="1890.6666666666665,3288.333333333333" size="100,100">vis1: true
--

There&#39;s a new dress store opening up in York and Avenue. You haven&#39;t [[bought new clothes-&gt;dupininvest]] in forever, however. </tw-passagedata><tw-passagedata pid="76" name="nfl" tags="" position="2040.6666666666663,3288.333333333333" size="100,100">vis1: true
--

You&#39;ve seen that kid throwing the ol&#39; pigskin around multiple times in the day. He&#39;s a dedicated one, even if you suspect that his reliance on his right leg is going to result in [[some nasty ACL tear.-&gt;dupininvest]] </tw-passagedata><tw-passagedata pid="77" name="entrepreneur" tags="" position="2190.6666666666665,3288.333333333333" size="100,100">vis1: true
--

He&#39;s got that sleazy entrepreneur smile on, but you know that his tea is actually just mass-bought and packaged into more-attractive packaging. He&#39;s a [[glorified graphic designer-&gt;dupininvest]], that&#39;s all. </tw-passagedata><tw-passagedata pid="78" name="dupin2" tags="" position="2420.6666666666665,3079.9999999999995" size="100,100">dupinscore: dupinscore+1
--

She was thirty-two when she died and she died in a car crash. The body, you read between the lines, was badly burned enough that she was declared dead upon the scene rather than rushed to any hospital. She is survived by her father and brother (the obituary does not quote either of them), but the majority of her fortune will be going to a local women&#39;s shelter that she apparently volunteered frequently at, when she wasn&#39;t busy coding the sequel to &lt;i&gt;Lost Upon Arrival&lt;/i&gt; her hit mystery video game that propelled her into fame. She and her husband were in the processes of getting divorced when she died (that detail must be inferred, as it hems and haws over whether or not to put &quot;loving husband and father&quot; and instead puts &quot;dedicated father of their child&quot;). 

You need to make [[two calls, first.-&gt;dupin3]]

</tw-passagedata><tw-passagedata pid="79" name="dupin3" tags="" position="2590.6666666666665,3063.3333333333335" size="100,100">dupinscore: dupinscore+1
--

You call her husband after you finish reading it, folding the newspaper and smoothing it in your lap. You know he&#39;ll pick up when he sees the caller ID; his voice is guarded when he answers. &quot;It&#39;s you,&quot; he says. &quot;What do you want? I&#39;m not in the mood for your interrogations right now.&quot;

&quot;What about my condolences?&quot;

&quot;Those I&#39;d appreciate if [[I believed them.-&gt;dupin4]]&quot;

</tw-passagedata><tw-passagedata pid="80" name="dupin4" tags="" position="2745.6666666666665,3066.6666666666665" size="100,100">dupinscore: dupinscore+1
--

You allow yourself a slight smile. &quot;You know, I was really surprised to see that you two were divorcing.&quot; Actually, you&#39;d never been surprised; there&#39;d always been a certain tense nature between the two of them. &quot;How&#39;s the kid?&quot;

He pauses. &quot;Devastated.&quot;

The kid&#39;s not even two. &quot;How is she really?&quot;

John sighs. You may not like him as a person—he&#39;s quite boring and mundane, like most humans—but he&#39;s certainly a dedicated father. &quot;[[Confused, of course.-&gt;dupin5]] What do you even tell a kid when her mother dies in a horrible accident? I&#39;ve just been telling her that Mommy&#39;s on vacation in Miami. She certainly takes enough trips for it to be plausible, what with work.&quot;

</tw-passagedata><tw-passagedata pid="81" name="dupin5" tags="" position="2889,3069.9999999999995" size="100,100">dupinscore: dupinscore+1
--

&quot;Shame about that sequel to &lt;i&gt;Lost Upon Arrival&lt;/i&gt;.&quot;

There&#39;s a pause and then he says, &quot;You&#39;re a real fucking asshole, I hope you know that. I couldn&#39;t give a damn about the sequel. I&#39;m not after her fucking money, no matter what her weasel of a lawyer says. He can go screw himself. I know I&#39;m a suspect in her case, but that&#39;s no excuse to not treat me like a grieving father. I was with that woman for twelve years, you know that? Through all her ups and downs, I checked her in and took care of her when she got out...and what&#39;s it got me? Number one on her suspects list. [[Don&#39;t call me again.-&gt;dupin6]]&quot; 

</tw-passagedata><tw-passagedata pid="82" name="dupin6" tags="" position="3040.6666666666665,3071.6666666666665" size="100,100">dupinscore: dupinscore+1
--

When he inevitably hangs up on you, as you&#39;d suspected would be the case, you make your second call. It&#39;s to the head of the detectives at the local police agency, and he picks up sounding harried. &quot;We&#39;ve got a situation, can you make it quick?&quot;

&quot;Yes, I&#39;ve got an update on the case of Addie Whitehouse, who died recently in a car crash? You think her husband orchestrated the murder, because the body was too burned upon impact to be an actual dead body. And you&#39;re right, it wasn&#39;t her body—I&#39;d suspect that if you reached out to the latest morgues, they&#39;d report that one of the unidentified bodies are missing (the ones that nobody checks because nobody wants to pay to bury them). But anyway, she&#39;s actually not dead. I&#39;d talk to either her lawyer or the mental facility she checked in in her mid-twenties; she recently had a child, I&#39;d suspect that PPD has something to do with her recent behavior, and it&#39;s far enough out that [[nobody&#39;s actively thinking of it as suspect.&quot;-&gt;dupin7]]

</tw-passagedata><tw-passagedata pid="83" name="dupin7" tags="" position="3179,3076.6666666666665" size="100,100">dupinscore: dupinscore+1
--

There&#39;s a long pause and then the detective half-sighs, half-laughs in that exasperated way that most people have when they have no other idea how else to react. Some react in wonder, but you&#39;ve worked with this detective long enough for that reaction to be out of the picture. &quot;All right. [[Thanks for the tip.-&gt;dupin8]]&quot;

</tw-passagedata><tw-passagedata pid="84" name="dupin8" tags="" position="3327.3333333333335,3083.3333333333335" size="100,100">dupinscore: dupinscore+1
--

Before he hangs up, you say, &quot;Oh, and detective?&quot;

The detective waits.

&quot;When you reach her, tell her to [[give me a call-&gt;dupin9]], won&#39;t you?&quot;

&quot;Will do.&quot;

</tw-passagedata><tw-passagedata pid="85" name="dupin9" tags="" position="3474,3085.0000000000005" size="100,100">Another day, another case solved in the comfort of your own apartment. You slide the newspaper onto the coffee table for your roommate to read when he inevitably drags himself out of bed. You&#39;re a little hungry; you think about eating food, but find yourself instead walking to your room and going back to the [[picture frame.-&gt;dupin10]]

</tw-passagedata><tw-passagedata pid="86" name="dupin10" tags="" position="3629,3071.6666666666674" size="100,100">You could never forget a woman who has the audacity to send you a picture of herself. That was Addie: audacious to the max. You&#39;d only met her once or twice, and you&#39;d pointed out all the flaws in &lt;i&gt;Lost Upon Arrival&lt;/i&gt;, only for her to laugh and take it all in stride. 

&quot;Just wait for the sequel then,&quot; she&#39;d said with a wink. 

You&#39;d meant to talk to her sooner—the bottom dropping out of your stomach when you&#39;d found out about her death made it amply clear that you had unfinished business with her. Learning of her struggles and her flaws didn&#39;t negate that feeling at all. It&#39;s quite a dramatic response, faking your own death, but you admit that sometimes you [[also entertain the thought.-&gt;dupin11]]

</tw-passagedata><tw-passagedata pid="87" name="dupin11" tags="" position="3797.3333333333335,3068.3333333333344" size="100,100">&quot;But she&#39;s alive,&quot; you murmur. You place the frame facedown on the table; you&#39;ll turn it back up once she re-emerges and [[decides that she&#39;s ready to re-enter your life.-&gt;Final]]
</tw-passagedata><tw-passagedata pid="88" name="jackieright" tags="" position="1269,2271.666666666666" size="100,100">jackiescore: jackiescore+1
--

You tear up, unexpectedly, at the letter. You two had not talked for many years before you&#39;d found out about her death, but—what&#39;s the saying? Time makes the heart grow fonder. You cannot help but remember how sweet she was to you in your youth. Others treated you with thinly-veiled pity, would always make mentions about your poverty, but [[she never said a word.-&gt;jright2]] 

</tw-passagedata><tw-passagedata pid="89" name="poirotright" tags="" position="1330.6666666666667,2086.6666666666665" size="100,100">poirotscore: poirotscore+1
--

In fact, her words make you think of someone you haven&#39;t thought of in a long time. A young woman, whose death and the following events made you think about what was decent and what was kind. She was an heiress who had been brutalized in her murder—but curiously enough it was not her death that stuck with you. In your profession, such cruelty becomes part and parcel, unfortunately.

No, [[it was the after.-&gt;pright2]]

</tw-passagedata><tw-passagedata pid="90" name="poirot2" tags="" position="2132.3333333333335,3109.9999999999995" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="91" name="pinvest2" tags="" position="2314,2929.9999999999995" size="100,100">poirotscore: poirotscore+1
--

But in the end, it&#39;s Detective Langston, who was a close friend of Arthur, who spots you and saves you from having to argue your way onto the crime scene. &quot;I&#39;m glad you&#39;re here,&quot; he says, looking relieved.

It&#39;s a dead man. That surprises you, because the scream you heard was distinctively female—and there you see her, wrapped in a bright yellow shock blanket. You look at her, assess her in a split second, and then turn back to the dead body. Facedown. 

&quot;Excuse me,&quot; you ask Langston. &quot;But do you happen to have a [[copy of the morning&#39;s paper?&quot;-&gt;pinvest3]]


</tw-passagedata><tw-passagedata pid="92" name="pinvest3" tags="" position="2484,2921.666666666666" size="100,100">poirotscore: poirotscore+1
--

He gives you a bit of a bewildered look but complies. You tuck the paper under your arm, and crouch down by the dead man. There is no shock in his blank eyes, but the rest of his face is contorted in uncomprehending agony, frozen by rigor mortis. The [[gleam of a wedding ring-&gt;pinvest4]] on his hand. You take it off and examine the rest of his hand, at the even tan and the curled form. [[You sniff deeply-&gt;pinvest4]], smelling bits of coffee still caught in his mustache, and there&#39;s a Cayden&#39;s Coffee cup next to him, [[spilling coffee.-&gt;pinvest4]] Actually there&#39;s two, but the other one&#39;s a foot away, like someone dropped it in shock.

That&#39;s enough here. [[You head then to the woman.-&gt;pinvest4]]

</tw-passagedata><tw-passagedata pid="93" name="pinvest4" tags="" position="2675.6666666666665,2918.3333333333326" size="100,100">poirotscore: poirotscore+1
--

She&#39;s unassuming looking, with red hair messily swept away from her face, in jeans, a plaid shirt, sensible shoes. You know well enough, however, to not let her unassuming appearance [[trick you-&gt;pinvest5]]. When you introduce yourself, no flash of recognition shows on her face. 

&quot;Katherine,&quot; she says in response. &quot;Katherine Welles.&quot; She blinks, rapidly. &quot;I&#39;ve already told the police everything I know.&quot;

You&#39;re not the police, that&#39;s the problem. &quot;That&#39;s all right, I&#39;m just here to consult,&quot; you say. &quot;You&#39;re [[related to Mr. Welles, then?&quot;-&gt;pinvest5]]

</tw-passagedata><tw-passagedata pid="94" name="pinvest5" tags="" position="2834,2921.666666666666" size="100,100">poirotscore: poirotscore+1
--

&quot;He&#39;s my husband,&quot; she says. &quot;We wanted to take a walk around the neighborhood and talking—well, I was asking him what his goals were in this town. He&#39;s potentially opening up a tea shop here—it&#39;s part of a franchise, the new Allergen Tea lines. I...&quot; She stares down at the ground. &quot;I&#39;m sorry. Everything just seems to be moving so fast.&quot; 

&quot;I understand,&quot; you say. &quot;Tell me, Mrs. Welles. How long as your husband been [[having an affair?&quot;-&gt;pinvest6]]

</tw-passagedata><tw-passagedata pid="95" name="pinvest6" tags="" position="2984,2913.3333333333326" size="100,100">poirotscore: poirotscore+1
--

She looks shocked, and then schools her face into a flabberghasted expression. &quot;Excuse me? I—John would never—I don&#39;t even understand how you got that conclusion from what we&#39;ve been talking about.&quot;

&quot;Forgive me. Let me tell you how I came to this process. I am in the habit of reading the paper, you know, and I know that he and Cayden&#39;s Coffee have long been in talks of merging the site in this town. It doesn&#39;t make sense to have both a coffee and a tea shop in this sort of town, don&#39;t you think? Judging from the lack of a ring-tan on his ring finger, I imagine that he&#39;s not the type to wear a wedding ring. I imagine you&#39;ve gotten quite sick of it as well.&quot;

&quot;[[What are you trying to say?-&gt;pinvest7]]&quot; she asked, slowly. 

</tw-passagedata><tw-passagedata pid="96" name="pinvest7" tags="" position="3154,2911.6666666666665" size="100,100">poirotscore: poirotscore+1
--

&quot;You both have gotten Cayden&#39;s Coffee—but that your orders seem to be mixed up. The one next to him is coffee, while the other is green tea, the one that he likes. [[One is poisoned, the other is not-&gt;pinvest8]]. What&#39;s surprising is that it is the coffee that was poisoned—and I imagine that if we are to go through the records of Cayden&#39;s coffee, it would be the type of coffee you regularly order.&quot;

&quot;Goodness!&quot; she says. &quot;[[Someone was trying to poison me?-&gt;pinvest8]]&quot;

</tw-passagedata><tw-passagedata pid="97" name="pinvest8" tags="" position="3312.3333333333335,2903.3333333333326" size="100,100">poirotscore: poirotscore+1
--

&quot;That would be the easy answer, yes. It would be very simple indeed if this was a woman trying to murder her lover&#39;s wife. But we both know that&#39;s not the real answer Mrs. Welles.&quot;

The shock blanket slips from her shoulders. Her eyes narrow. &quot;I think I&#39;d like my lawyer,&quot; she says.

&quot;Of course,&quot; [[you acquiesce.-&gt;pinvest9]]

</tw-passagedata><tw-passagedata pid="98" name="pinvest9" tags="" position="3449,2896.666666666666" size="100,100">poirotscore: poirotscore+1
--

There&#39;s no point, you think. It&#39;ll be all too easy for the poison to be traced back to the coffee, all too easy for it to be traced back to Mrs. Welles. You drop by Detective Langston, explain to him that it was Mrs. Welles who poisoned the coffee, because her husband&#39;s lover ran the coffee shop. He nods, taking you at value, though you know that it will be more of a process to verify and you will be called upon in the future for witness, for all the other histrionics of justice. 

This was not a complicated crime, [[it&#39;s a particularly messy crime-&gt;pinvest10]]. It&#39;s nothing at all like the crimes you regularly deal with, that baffle the mind with their convolution. [[And yet...-&gt;pinvest10]]


</tw-passagedata><tw-passagedata pid="99" name="pinvest10" tags="" position="3609,2898.3333333333326" size="100,100">poirotscore: poirotscore+1
--

She reminds you of a young woman you knew, once. Who had loved so fiercely that it turned to hate. Whose crime, in the end, was being wrong by others and loving to a fault. You still think about her sometimes, the women in the portrait, the one you could not give salvation. It&#39;s not the detective&#39;s duty to bestow redemption. But you&#39;ve never had any children, and if you did, you wish they were as wickedly passionate and smart as her, if not quite as murderous. 

You do wish, dearly, that [[she was still alive.-&gt;Final]] </tw-passagedata><tw-passagedata pid="100" name="jright2" tags="" position="1434,2283.3333333333326" size="100,100">jackiescore: jackiescore+1
--

When you met your husband (oh, your husband! Never does a day go back when you do not think about him, up there waiting for you after his long and tortured journey), you had been deliriously happy. Yes, you two were poor, but it was enough. You two decided to marry as soon as possible; a week before the wedding, invites were sent. You sent her an email, inviting her to the wedding and [[rhapsodizing about your happiness.-&gt;jright3]]

Her response: &quot;My dear, I cannot make it due to my business engagements but I am so terribly happy for you. In my deep regret of missing this happy occasion, I have included [[a wedding gift-&gt;jright3]] that I hope will help you along in the beginning of married life.&quot;

</tw-passagedata><tw-passagedata pid="101" name="jright3" tags="" position="1570.6666666666667,2271.6666666666656" size="100,100">jackiescore: jackiescore+1
--

It had been a check for 10,000. [[Freely given.-&gt;jright4]] You&#39;d almost torn it up, but then was glad that you didn&#39;t. 

</tw-passagedata><tw-passagedata pid="102" name="jright4" tags="" position="1724,2274.9999999999995" size="100,100">jackiescore: jackiescore+1
--

You always intended on calling upon her one of these days, but then your husband was diagnosed—then it was a crush of misery and bucket lists and long nights of sobbing. Then, afterwards, the winding road of going through the five stages of grief, then afterwards, [[nothing but emptiness.-&gt;jright5]]
</tw-passagedata><tw-passagedata pid="103" name="jright5" tags="" position="1880.6666666666667,2259.9999999999995" size="100,100">jackiescore: jackiescore+1
--

One day, two months ago, you picked up the newspaper only to find her face and portrait splashed on the front. &lt;i&gt;SOCIALITE AND HEIRESS OF DOYLE HOTELS [[FOUND DEAD IN HOME.-&gt;jright6]]&lt;/i&gt; 

They don&#39;t put pictures of her murder up, but you can&#39;t but help imagine it from the sensational journalistic imagery. &lt;i&gt;Found strangled in the privacy of her master bedroom&lt;/i&gt;, it says, with the implications in dots. Thinking of her terror in her last moments enrages you; from her kindness, you&#39;d always wanted her [[to die in comfort.-&gt;jright6]]

</tw-passagedata><tw-passagedata pid="104" name="jright6" tags="" position="2069,2298.333333333333" size="100,100">jackiescore: jackiescore+1
--

Weeks pass. It quickly becomes clear that the beneficiary of her estate, one of her father&#39;s lawyers, is uninterested in channeling his energies into finding out who her murderer is. In your dingy little apartment, filled with too many memories for comfort, you seethe. [[You find new purpose.-&gt;jright7]]

</tw-passagedata><tw-passagedata pid="105" name="jright7" tags="" position="2227.3333333333335,2284.9999999999995" size="100,100">jackiescore: jackiescore+1
--

And so, today, as you stare at her portrait, at her spidery handwriting thanking you, you are tearing up. Today, after all, is the day. This portrait, right here, that&#39;s the only thing that you&#39;ve brought from your home. Everything else has been abandoned back in the apartment that once belonged to two; you travelled light in your haste to get [[to the city where she died.-&gt;jright8]]

</tw-passagedata><tw-passagedata pid="106" name="jright8" tags="" position="2390.666666666667,2281.6666666666665" size="100,100">jackiescore: jackiescore+1
--

It&#39;s late at night when you finally emerge from the apartment, dressed in nondescript black clothing and with only a small purse on your side and a piece of paper in your hand. You take the subway down to the south side of town, to a [[block of houses that are all of motley style-&gt;jright9]], but are uniformed by the bars on the windows. You reach 221, and you [[knock on the door.-&gt;jright9]] 

</tw-passagedata><tw-passagedata pid="107" name="jright9" tags="" position="2577.3333333333335,2293.333333333333" size="100,100">jackiescore: jackiescore+1
--

You&#39;ve memorized his schedule, so you know he&#39;s outside, on the other side. You also know exactly how you look—small, disarming, so you tuck your hair behind your ear and bite your lip nervously. You&#39;re wearing red lipstick, just as she was when she died. 

As expected, he could not help but open the door. He&#39;s a raggedy-looking man, with a twitchy face. &quot;May I help you?&quot; he asks. 

[[&quot;Mr. Laggen?&quot; you ask.-&gt;jright10]]

</tw-passagedata><tw-passagedata pid="108" name="jright10" tags="" position="2760.666666666667,2274.9999999999995" size="100,100">jackiescore: jackiescore+1
--

&quot;Yes,&quot; he says. The guarded look is present on his face. When you tell him your name, it does not change and he says, &quot;Sorry, I think you have the wrong person.&quot;

And finally, finally it molds into shock as you press the barrel of a small pearl-crusted gun into his belly. &quot;I think I don&#39;t, Mr. Laggen. Now, [[won&#39;t you let me inside?&quot;-&gt;jright11]]

</tw-passagedata><tw-passagedata pid="109" name="jright11" tags="" position="2937.3333333333335,2274.9999999999995" size="100,100">jackiescore: jackiescore+1
--

He&#39;s shaking as he lets you inside. Good, you think. Let him feel a fraction of the fear she did.

&quot;Are you going to kill me?&quot; he asks first. 

&quot;[[Maybe,-&gt;jright12]]&quot; you say, as if you haven&#39;t already made up your mind. His home is excessively sad. The walls are barren, the couch looks like it also functions as a bed. [[&quot;Do you think I have any reason to kill you?&quot;-&gt;jright12]]

</tw-passagedata><tw-passagedata pid="110" name="jright12" tags="" position="3109,2261.666666666666" size="100,100">jackiescore: jackiescore+1
--

There it is, the flash of guilt in his eyes. 

&quot;Why&#39;d you kill her?&quot; [[you ask, cooly-&gt;jright13]], the pearl-handled gun levelled at him. 

&quot;You&#39;re going to kill me, aren&#39;t you? [[Why should I tell you anything?&quot;-&gt;jright13]]

</tw-passagedata><tw-passagedata pid="111" name="jright13" tags="" position="3262.3333333333335,2258.333333333333" size="100,100">&quot;Because I deserve to know!&quot; you shout, your voice sudden and loud. It makes you flinch, even as it makes him flinch, and you force yourself to quiet. &quot;Don&#39;t you want someone to know, before you die and I control your narrative, what it was that you meant?&quot; Why you killed her, you think, vengefully. And did worse, before she died. 

You can see him think it over. Killers are the worst of narcissists, you say, even as you look at your gun, your hands too [[steady to be anything better than him.-&gt;jright14]]

</tw-passagedata><tw-passagedata pid="112" name="jright14" tags="" position="3432.3333333333335,2279.9999999999995" size="100,100">jackiescore: jackiescore+1
--

&quot;I loved her too much,&quot; he was saying, his eyes roving. &quot;She was getting married, did you know? You look like me, you know. Were you even invited?&quot;

&quot;That doesn&#39;t matter,&quot; you say cooly, even though you weren&#39;t. 

&quot;But you love her too,&quot; he says, accusatory. &quot;In another life, you might&#39;ve done the same as I. There&#39;s nothing left for you, isn&#39;t there? &lt;i&gt;You understand&lt;/i&gt;.&quot; There is hunger and desperation in his eyes; he seems manic, swaying with the force of his emotion.  

&quot;I do,&quot; you say, [[and shoot him.-&gt;jright15]]

</tw-passagedata><tw-passagedata pid="113" name="jright15" tags="" position="3614,2264.9999999999995" size="100,100">jackiescore: jackiescore+1
--

Of course the neighbors call the police at the first sound of the shot. You don&#39;t bother running; they find you, they arrest you. 

You can&#39;t imagine killing for anything [[less than love.-&gt;Final]] </tw-passagedata><tw-passagedata pid="114" name="pright2" tags="" position="1492.3333333333333,2081.666666666666" size="100,100">poirotscore: poirotscore+1
--

You remember getting the call in the middle of your breakfast. You put down your buttered croissant and answer. It&#39;s Langston. &quot;We&#39;d like your opinion down in the station,&quot; he says, in that restrained way of his that promises a good case. Of course you go. 

The first thing you see is a young woman in the interview woman. As you and Langston stand behind the two-way mirror, you ask, &quot;What&#39;s she here for?&quot;

&quot;[[Murder of a man,-&gt;pright3]]&quot; says Langston. 

</tw-passagedata><tw-passagedata pid="115" name="pright3" tags="" position="1657.3333333333333,2076.666666666666" size="100,100">poirotscore: poirotscore+1
--

&quot;Why&#39;d she kill him?&quot; you ask. 

&quot;That&#39;s what we&#39;re trying to solve.&quot; Langston shrugs. &quot;So far as we can tell, [[she has no motive.-&gt;pright4]] She&#39;s not killed anyone before; she was waiting for us at the crime scene. Told us she wanted to turn herself in. Hasn&#39;t said much since, no matter what we say.&quot;

&quot;Financial status? [[Marital status?-&gt;pright4]]&quot;

&quot;That&#39;s what we thought too. Her husband died of cancer, just a year ago. Financially she&#39;s not doing great, but not significantly in debt.&quot; He hands a folder to you. &quot;Check it out for yourself.&quot;

</tw-passagedata><tw-passagedata pid="116" name="pright4" tags="" position="1810.6666666666667,2078.3333333333326" size="100,100">poirotscore: poirotscore+1
--

It&#39;s a slim file, relatively. There&#39;s not much on the young woman outside, just a list of her recent financial transactions (a pair of small, decorative guns—one of which was used to kill the deceased Laggen, the other of which was confiscated on her person. There&#39;s a note that her husband died less than a year after they got married, due to cancer complications. Nothing else of note. 10,000, marked &lt;i&gt; wedding gift&lt;/i&gt;. What catches your eye is [[the name of the benefactor.-&gt;pright5]]

&quot;We thought she might be a psychopath, who enjoys killing others. But she winces at the idea of killing anyone else. The only other thing she told us was that she was not guilty for any other murders, and that even this one she felt no remorse for.&quot;

You tap the folder. &quot;[[Can I talk to her?-&gt;pright5]]&quot;

</tw-passagedata><tw-passagedata pid="117" name="pright5" tags="" position="1970.6666666666667,2079.9999999999995" size="100,100">poirotscore: poirotscore+1
--

Langston startles. &quot;Already? Why, all right then.&quot; 

You are brought out of the viewing room, given a cursory pat down, and then led into the interrogation room. There, the woman looks up. She&#39;s got dark hair, an open face that is dusted with shadows around her cheeks and under her eyes. She watches you with unreadable eyes as you hem and haw, and finally [[sit down across from her.-&gt;pright6]]

</tw-passagedata><tw-passagedata pid="118" name="pright6" tags="" position="2140.666666666667,2071.6666666666665" size="100,100">poirotscore: poirotscore+1
--

&quot;Tell me,&quot; you say, &quot;why you killed Mr. Laggen.&quot;

No response, as was to be expected. 

&quot;All right then. In that case, tell me [[how Linnet Ridgeway died.-&gt;pright7]]&quot;

Her eyes flick up, startled. 

</tw-passagedata><tw-passagedata pid="119" name="pright7" tags="" position="2334.0000000000005,2059.9999999999995" size="100,100">poirotscore: poirotscore+1
--

&quot;I wouldn&#39;t know,&quot; she says cooly, stiffly. Her voice is slightly hoarse from disuse.

&quot;Well, to me it seems fairly clear-cut what happened here. You and Mr. Laggen were in cahoots to kill Ms. Ridgeway, but once she died, guilt and fear crept in. You killed your co-conspirator, but couldn&#39;t find any of the money anywhere.&quot;

With each word, she swells up with fury. And then, once you finish, [[she explodes.-&gt;pright8]]

</tw-passagedata><tw-passagedata pid="120" name="pright8" tags="" position="2574.0000000000005,2084.9999999999995" size="100,100">poirotscore: poirotscore+1
--
&quot;I would never kill Lin!&quot; she cries out, looking infuriated. &quot;I, why, the outrage! I have no idea where you came from the base of that accusation...Besides, the real murderer of Lin hasn&#39;t [[even been found yet.-&gt;pright9]]&quot; The last one is said a little sulkily. 

[[&quot;Has he?&quot;-&gt;pright9]] Your voice is gentle, but knowing. She looks up at you, startled, with dark eyes. 

</tw-passagedata><tw-passagedata pid="121" name="pright9" tags="" position="2835.666666666667,2116.6666666666665" size="100,100">poirotscore: poirotscore+1
--

&quot;I&#39;m sure I don&#39;t know what you&#39;re saying,&quot; she deflects. 

&quot;To me, it looks like you&#39;re facing a life sentence because you chose to murder someone who killed someone you cared about, when nobody else seemed to be effectively searching for the murderer. I admire the fact that you believe you&#39;ve found him—of course, I have no empirical evidence to prove that you&#39;re right. The detectives are searching his house as we speak, however. People as obsessed as him tend to have trophies.&quot;

She stares at you, unblinkingly. 

&quot;What I cannot understand, my dear, is why you chose to kill him rather than turn him over to justice, or why even now you refuse to talk about his culpability. Is it because you are afraid of prolonging the trial?&quot;

Your voice softens. &quot;[[I&#39;m sorry about your husband.-&gt;pright10]]&quot;

</tw-passagedata><tw-passagedata pid="122" name="pright10" tags="" position="3130.666666666667,2111.6666666666665" size="100,100">poirotscore: poirotscore+1
--
Her mouth opens. Closes. And then finally, she says in a voice as soft as a sigh on the wind, &quot;I have nobody, sir. If you would ask them to make it painless, I&#39;d be much obliged. But I&#39;ll confess to nothing other than killing Mr. Laggen. Call it cruelty. Call it irrational. Isn&#39;t that what all killing is, in the end?&quot;

&quot;Then why did you not take your life in the end? [[Harder to die by the justice system,-&gt;pright11]] is it not?&quot;

</tw-passagedata><tw-passagedata pid="123" name="pright11" tags="" position="3387.3333333333335,2101.6666666666665" size="100,100">poirotscore: poirotscore+1
--

A month later, she is sentenced to death. You have no idea how long she will languish in the row; you do know, however, that she will not fight it. You could tell she was that type from the very moment you saw her: the obstinate kind, the [[all-consumed type.-&gt;pright12]] Just like you, except you were consumed by the desire to uncover crime and unpick the intricacies of mysteries. She was consumed by love—for her lost husband, for her lost friend. [[How do you tell someone like that to keep on going?-&gt;pright12]]

</tw-passagedata><tw-passagedata pid="124" name="pright12" tags="" position="3579,2089.9999999999995" size="100,100">poirotscore: poirotscore+1
--

You tuck your hands into your pocket. You remember asking her, all those weeks ago, why she would allow herself to be captured by the police. There had been two guns, after all. One for Laggen. And one, presumably, for herself. 

Her eyes had told you everything. The desperation in them. Because she had to tell someone, anyone—she needed that last, final human connection that she&#39;d been deprived of for months. She needed to look someone in the eye and tell them she was guilty.

[[That look still haunts you.-&gt;Final]]</tw-passagedata><tw-passagedata pid="125" name="vportrait" tags="v" position="1450.333333333333,241.00000000000006" size="100,100">vscore: vscore+1
--

Or all the people in your life, to say it more generally, even though the portrait you hold in your hand is a portrait of your mother. You&#39;ve lost so many—your mother, your [[brother...-&gt;vseb1]] Your apartment looks wrong with all your knowledge of death. 

 </tw-passagedata><tw-passagedata pid="126" name="pportrait" tags="pros" position="1446.9999999999998,87.66666666666667" size="100,100">prosscore: prosscore+1
--

It&#39;s actually a little embarrassing, the amount of emotion she wells up in you, when you consider that she&#39;s not actually anyone you know at all, but instead a famous actress from your dad&#39;s childhood that you had a crush on. It&#39;s not your fault; he watched a lot of old television when you were young and told you: &quot;This is my favorite actress,&quot; while your mother put her hands on her hips and said, &quot;She&#39;s me if I lost thirty pounds and got a boob job,&quot; and he would laugh uproariously. 

So she reminds you of good times, that&#39;s all. But she&#39;s got the [[chastisting glare of a mother.-&gt;pportrait2]] 

</tw-passagedata><tw-passagedata pid="127" name="pgrocery" tags="pros" position="2417.666666666667,805.9999999999999" size="100,100">prosscore: prosscore+1
--

You go grocery shopping here every week for your staples. They sell the American staples that you&#39;ve learned to like over the years you&#39;ve spent here—and you always make sure to stock up on Twinkies, your guiltiest of pleasures—but they also carry the best pita and fresh &lt;i&gt;kushari&lt;/i&gt; made by the shopowner every morning. You pick all of those up, along with another dozen eggs. It&#39;s not the busiest of stores—right now, there&#39;s a couple arguing about what milk to get, and one [[girl milling around in the magazine aisle with her hood up.-&gt;pgrocery1]]

</tw-passagedata><tw-passagedata pid="128" name="sebgrocery" tags="seb" position="2414.666666666667,630.6666666666665" size="100,100">sebscore: sebscore+1
--

As you walk to the grocery store, you think to yourself: it isn&#39;t really your fault that you don&#39;t know what this grocery store stocks. Or that you haven&#39;t gone grocery shopping in a while, too caught up in writing and indolence.

[[It&#39;s her fault.-&gt;sebgrocery2]] The girl in the portrait. 

</tw-passagedata><tw-passagedata pid="129" name="pportrait2" tags="" position="1598.6666666666665,87.66666666666669" size="100,100">prosscore: prosscore+1
--

You started your job because of a woman, and perhaps that was the biggest mistake in your life. It was your mother who [[suggested that you take the job, you know?-&gt;pportrait3]]  

You admit it freely: you have never been the best at your job. How many times, exactly, have you hit the snooze button and called in sick an hour later? 

</tw-passagedata><tw-passagedata pid="130" name="pportrait3" tags="" position="1773.6666666666665,81" size="100,100">prosscore: prosscore+1
--

You place the portrait down and crack your neck. The coffee machine splutters sadly as you force it to crank out yet another cup of coffee—you didn&#39;t get much sleep last night, you were up so late arguing with trolls on Reddit.

You don&#39;t really know why you bother to waste so much mental energy on them, other than the fact that it [[makes you feel something.-&gt;pportrait4]] Anything. 

7:00. [[Time to walk to work.-&gt;pportrait4]]

</tw-passagedata><tw-passagedata pid="131" name="pportrait4" tags="" position="1938.6666666666665,67.66666666666666" size="100,100">prosscore: prosscore+1
--

As you stroll to the Hall of Justice, tie flung over your shoulder, you contemplate why again you don&#39;t have a car. Surely, that&#39;s better than the subtle, covert looks you have to deal with on your daily walk to work.

It is, unfortunately, [[a very white town.-&gt;pportrait5]] 

</tw-passagedata><tw-passagedata pid="132" name="pportrait5" tags="" position="2087,67.66666666666666" size="100,100">prosscore: prosscore+1
--

&quot;Morning,&quot; grunts the security guard to the man in front of who shows his badge. He does not say anything to you, just nods you through, but that&#39;s okay. You consider you both to have a mutually ambivalent relationship; if he started saying morning to you, you would have to start saying morning to him, and then suddenly you&#39;d be having coffee together and calling him &quot;Bob&quot; (you actually have no idea what his name is, but he looks like one of the millions of Roberts populating this town) and that&#39;s worse than [[any future you could imagine.-&gt;pportrait6]]

It makes you shudder as you go to the elevator, and then laugh as you [[walk to your desk.-&gt;pportrait6]]

</tw-passagedata><tw-passagedata pid="133" name="pportrait6" tags="" position="2243.6666666666665,79.33333333333331" size="100,100">prosscore: prosscore+1
--

The pile of cases on your desk is already teetering precariously, and it just plain falls over when your boss slaps a case on top. She ignores the fluttering mess of papers and says, &quot;Top priority. Get on it.&quot; 

[[You really hate this job.-&gt;pportrait7]]

</tw-passagedata><tw-passagedata pid="134" name="pportrait7" tags="" position="2435.333333333333,77.66666666666663" size="100,100">prosscore: prosscore+1
--

Sighing, you open the case. The first thing there is a picture of a girl, whose sight arrests you—she&#39;s pretty, striking even, but it&#39;s those eyes that startle you. Those dark, penetrating eyes. 

And what&#39;s even more arresting is the charge. She was recently arrested for murder of her boyfriend, the [[son of one of the city council members.-&gt;pportrait8]]

&lt;i&gt;Ah&lt;/i&gt;, you think. 

</tw-passagedata><tw-passagedata pid="135" name="pportrait8" tags="" position="2595.333333333333,77.66666666666663" size="100,100">prosscore: prosscore+1
--

No wonder they want to rush this through. The boyfriend&#39;s death was so new that it hasn&#39;t even hit the newspapers—in fact, you rather think that today&#39;s newspaper in fact has an article about how he recently got scouted for the NFL, definitely because of his star quarterback status (and definitely not because of [[his father&#39;s connections-&gt;pportrait9]]). His death is a whole blow to the town. Of course they&#39;d want to blame someone who can&#39;t fight back. 

</tw-passagedata><tw-passagedata pid="136" name="pportrait9" tags="" position="2758.6666666666665,75.99999999999994" size="100,100">prosscore: prosscore+1
--
But you can&#39;t help it—you read through the rest of the file, curious to see why she killed him. What you see, however, is vehement testimony on her part that she didn&#39;t kill him. That she loved him. That they were going to marry and run away, with a strong indication that the controlling figures in both of their lives didn&#39;t agree. That her brother-in-law said no, and his father had [[different dreams for him.-&gt;pportrait10]]  

</tw-passagedata><tw-passagedata pid="137" name="pportrait10" tags="" position="2932,65.99999999999994" size="100,100">prosscore: prosscore+1
--

Maybe she did kill him, you reasoned. To protect him from the pressure he was facing. Maybe she&#39;s lying about loving him, maybe she&#39;s a cold-hearted murderer hiding behind a pretty, desperate [[(or just pretty desperate?)-&gt;pportrait11]] face. 

</tw-passagedata><tw-passagedata pid="138" name="pportrait11" tags="" position="3100.3333333333335,75.99999999999994" size="100,100">prosscore: prosscore+1
--

But you think, a little more sourly, that it is far more likely that she is being used as as scapegoat. She&#39;s not white, that&#39;s for sure—and the city council here is filled with powerful white men and women. What&#39;s the life of one teenage girl to them? 

It&#39;s moments like these in your job that make you [[want to quit.-&gt;pportrait12]]

</tw-passagedata><tw-passagedata pid="139" name="pportrait12" tags="" position="3255.3333333333335,79.33333333333326" size="100,100">prosscore: prosscore+1
--

For a minute you fantasize it: going up to your boss and flinging your quitting papers in her face. &quot;I quit!&quot; you&#39;d shout. And then, because that&#39;s not enough, you imagine going to every shitty judge in the precinct and flinging your quitting papers in their faces as well. &quot;That&#39;s for your schedules!&quot; you&#39;d shout. &quot;That&#39;s for all the people whose lives you&#39;ve used me to hurt, for all the times I&#39;ve been personally inconvenienced by your whims! That&#39;s for a [[lifetime in a career I now hate!&quot;-&gt;pportrait13]]

</tw-passagedata><tw-passagedata pid="140" name="pportrait13" tags="" position="3435.3333333333335,70.99999999999991" size="100,100">prosscore: prosscore+1
--

Of course, you [[don&#39;t do that.-&gt;pportrait14]]

</tw-passagedata><tw-passagedata pid="141" name="pportrait14" tags="" position="3587,77.66666666666657" size="100,100">prosscore: prosscore+1
--

But it&#39;s a hazy golden idea, and it leaves you a little dreamy for the rest of the day, as you finish filling out the forms for the prosecution of Rim. It follows you home as you pack up and take the walk back to your shoddy little apartment, as people cross the street as to not walk on the same sidewalk as you. 

The portrait of your dad&#39;s favorite actress is still up. You place it facedown; you can&#39;t stand the sight of those dark eyes, not when you imagine them in the eyes of a haunted teen in jail. [[It wasn&#39;t because of you,-&gt;pportrait15]] you tell yourself as you chop up carrots and onions for your dinner stock. 

</tw-passagedata><tw-passagedata pid="142" name="pportrait15" tags="" position="3772,89.33333333333323" size="100,100">prosscore: prosscore+1
--

Tomorrow will be another day like today. [[You can&#39;t wait.-&gt;Final]]</tw-passagedata><tw-passagedata pid="143" name="pgrocery1" tags="" position="2587.666666666667,792.6666666666665" size="100,100">prosscore: prosscore+1
--

When you get to the register, the shopowner gives you her sweet gummy smile and rings you up. &quot;How are you doing, dear?&quot; she asks you. This is one of the few times in the week that you get to speak in your native tongue, and you relish your conversation with her, which exercises a [[rather languid portion of your brain.-&gt;pgrocery2]]

</tw-passagedata><tw-passagedata pid="144" name="pgrocery2" tags="" position="2764.3333333333335,802.6666666666665" size="100,100">prosscore: prosscore+1
--
After you pay for your groceries (with the traditional discount given for your copious and very blatantly flirty flattery of the shopowner&#39;s graying hair), you turn around to leave and bump into the girl from the magazine aisle, who is also making to leave. At the contact, her hood falls away from her face and as you start fumbling out an apology, you find yourself momentarily dumbstruck by the beauty of her face, which is perfectly symmetrical and almost opalescent in its [[quiet, sad demeanor.-&gt;pgrocery3]] 

</tw-passagedata><tw-passagedata pid="145" name="pgrocery3" tags="" position="2946,809.3333333333331" size="100,100">prosscore: prosscore+1
--

&quot;It&#39;s all right,&quot; she says quietly, and leaves the store before you can say anything else. 

The shopkeeper starts [[laughing at you.-&gt;pgrocery4]]

</tw-passagedata><tw-passagedata pid="146" name="pgrocery4" tags="" position="3127.6666666666665,814.3333333333331" size="100,100">prosscore: prosscore+1
--

&quot;&lt;i&gt;Ostatha&lt;/i&gt;,&quot; you protest as she continues laughing at the dumbstruck look on your face. 

&quot;Ah, that girl,&quot; she says. &quot;Never a day without amusement for me when I see how the silly men around her goggle.&quot; 

&quot;Who was she?&quot; You feel your prosecutor voice come out, blandly questioning while [[also being unyielding.-&gt;pgrocery5]] It took you a decade to perfect that voice.

At that, she [[quickly sobers up.-&gt;pgrocery5]]

</tw-passagedata><tw-passagedata pid="147" name="pgrocery5" tags="" position="3342.6666666666665,819.3333333333331" size="100,100">prosscore: prosscore+1
--

&quot;Her name is Rim,&quot; says the shopkeeper, with a far more grim look on her face. &quot;She&#39;s a living example that great beauty comes with great toil. A sweet girl, but surrounded by trouble.&quot;

&quot;What do you mean?&quot;

&quot;Well, she was set to run away with her boyfriend, except her brother-in-law disagreed! And then next thing you know, her boyfriend has showed up dead and now everyone and their mother is accusing her of foul play.&quot;

That girl? Murder? &quot;[[Do you believe them?-&gt;pgrocery6]]&quot; you ask the shopkeeper.

</tw-passagedata><tw-passagedata pid="148" name="pgrocery6" tags="" position="3514.333333333333,815.9999999999998" size="100,100">prosscore: prosscore+1
--

She looks thoughtful, for a moment. &quot;I am no great detective,&quot; she says finally. &quot;I am nothing more than a nosy old woman who is fond of her regular customers, among whom Rim is included. But that girl glowed when she spoke of her boyfriend and of her love for him.&quot;

She shakes her finger at you. &quot;And there&#39;s no glow now, mark you! Especially not towards the likes of you old men.&quot; 

You&#39;re a good thirty years younger than the shopkeep, but [[you understand.-&gt;pgrocery7]]

</tw-passagedata><tw-passagedata pid="149" name="pgrocery7" tags="" position="3685.9999999999995,805.9999999999998" size="100,100">prosscore: prosscore+1
--

When you get home, the case of Rim is still on your mind. The sadness in her eyes. The grace in her step. It embarrasses you that you find her attractive, considering her age and her current status as [[potential criminal.-&gt;pgrocery8]] You wonder with horror if you might end up being the prosecutor on her case. 

</tw-passagedata><tw-passagedata pid="150" name="pgrocery8" tags="" position="3870.9999999999995,807.6666666666664" size="100,100">prosscore: prosscore+1
--

You turn the portrait on your bedside table facedown. You don&#39;t think you can look at [[dark sad eyes any longer.-&gt;Final]]</tw-passagedata><tw-passagedata pid="151" name="vseb1" tags="" position="1613.6666666666663,241.00000000000006" size="100,100">vscore: vscore+1
--
You think a lot about the distance between you and your brother sometimes. How you&#39;d idolized him in the way [[that younger brothers always do-&gt;vseb2]]; how that led to the distance only lengthening between the two of you. After all, the easiest way to knock a statue from its pedestal is to come close enough to see all the blemishes, the rough carves, the [[flawed marble surface.-&gt;vseb2]]

</tw-passagedata><tw-passagedata pid="152" name="vseb2" tags="" position="1778.6666666666663,236.00000000000006" size="100,100">vscore: vscore+1
--

So you&#39;ve always contented yourself with the books he wrote. You told yourself that this was better than knowing him—that knowing his works made your [[connection all the more intimate.-&gt;vseb3]] You fiercely ignore the fact that his work was shared by millions. 

</tw-passagedata><tw-passagedata pid="153" name="vseb3" tags="" position="1955.333333333333,256.33333333333314" size="100,100">vscore: vscore+1
--
Millions, hundreds of thousands, thousands, hundreds. [[What does it matter,-&gt;vseb4]] so long as it was shared? 

</tw-passagedata><tw-passagedata pid="154" name="vseb4" tags="" position="2108.6666666666665,247.9999999999998" size="100,100">vscore: vscore+1
--

(Sometimes you content yourself with reading what other people recounted about him. Contentitude didn&#39;t come from agreement, however. It came from &lt;i&gt;[[wrong, wrong, wrong.-&gt;vseb5]]&lt;/i&gt;) 

(Your apartment [[still looks wrong-&gt;vseb5]], however.)

</tw-passagedata><tw-passagedata pid="155" name="vseb5" tags="" position="2258.6666666666665,254.66666666666643" size="100,100">vscore: vscore+1
--

You realize the photograph, which you had set facedown onto the dresser, was not your mother but [[your brother&#39;s mother, the mother of your brother, was your (brother&#39;s) mother, was Mother.-&gt;vseb6]]

</tw-passagedata><tw-passagedata pid="156" name="vseb6" tags="" position="2453.6666666666665,247.99999999999972" size="100,100">vscore: vscore+1
--

This is not [[your apartment.-&gt;vseb7]] 

</tw-passagedata><tw-passagedata pid="157" name="vseb7" tags="" position="2628.6666666666665,232.99999999999972" size="100,100">vscore: vscore+1
--

You need confirmation, so you grab the framed portrait back off of the dresser and flip it over eagerly. 

You look down at the photograph and then shudder when you realize that it has turned into him. There [[is your brother-&gt;vseb8]], glaring at you—and then you drop it out of horror and it smashes on the ground, a million shards of glass everywhere. The photograph of the woman slides out. You had caught [[only sight of yourself-&gt;vseb8]] in the glass, in the sudden flash of sunlight that renders glass into mirror. 

</tw-passagedata><tw-passagedata pid="158" name="vseb8" tags="" position="2793.6666666666665,239.66666666666637" size="100,100">vscore: vscore+1
--
It sends a shudder through your body. You haven&#39;t looked in mirrors in a long time. You&#39;re standing in front of the only mirror left in the house, which you&#39;ve covered in a jacket. You&#39;re too afraid of what you&#39;ll see. Why would you need a mirror, when all you need to see is the apartment around you? See the traces of your brother all around: the clothes in the dresser are his— the phone, which rings constantly yet is dusty from never being picked up, is called by only his acquaintances—the books he wrote are still open, leafed to the passages that you think were his favorites. 

You may not be in your own apartment. [[You may be exactly in your own apartment.-&gt;vseb9]]

</tw-passagedata><tw-passagedata pid="159" name="vseb9" tags="" position="2967,219.6666666666664" size="100,100">vscore: vscore+1
--

You think, maybe you&#39;re afraid of looking in the mirror because you&#39;re afraid of confirming everything you already know. You&#39;re afraid of touching your face and finding only the smooth cloth of a mask, and even more so, of what [[lies underneath the mask.-&gt;vseb10]]

</tw-passagedata><tw-passagedata pid="160" name="vseb10" tags="" position="3150.3333333333335,222.99999999999972" size="100,100">vscore: vscore+1
--

And your mind whispers, &lt;i&gt;you know who it is. You know he&#39;s there.&lt;/i&gt;

Bracing yourself, you sweep the cloth off of the mirror. And it is epiphany, seeing yourself for the first time, for the last time, and [[all the times in between.-&gt;Final]]</tw-passagedata><tw-passagedata pid="161" name="sebgrocery2" tags="" position="2591.3333333333335,627.3333333333331" size="100,100">sebscore: sebscore+1
--

That&#39;s the [[easy answer-&gt;sebgrocery3]], at least. The hard answer—well. It is, after all, the hard answer. 

</tw-passagedata><tw-passagedata pid="162" name="sebgrocery3" tags="" position="2778,623.9999999999998" size="100,100">sebscore: sebscore+1
--

As you arrive to the grocery store, you are first overwhelmed by the abundance. Everything is so well-stocked, to the [[point of indulgence.-&gt;sebgrocery4]] You don&#39;t even know what you eat regularly, so you grab some things that look safe. [[Bagels.-&gt;sebgrocery4]] Peanut butter. A whole branch of tomatoes. Toilet paper. Potato chips. 

</tw-passagedata><tw-passagedata pid="163" name="sebgrocery4" tags="" position="2973,622.3333333333331" size="100,100">sebscore: sebscore+1
--

Looking down at your basket, you admit it&#39;s an eclectic selection for the strangest of shoppers. But she&#39;d always done all of the grocery shopping. 

In fact, she&#39;d [[done most of the things.-&gt;sebgrocery5]] She&#39;d handled the agents, the publishers, the bookstores, the fans. She&#39;d handled the grocery lists, the cooking, the cleaning. But in your defense—you handled the love, the affection, [[up until you hadn&#39;t.-&gt;sebgrocery5]]

</tw-passagedata><tw-passagedata pid="164" name="sebgrocery5" tags="" position="3146.3333333333335,623.9999999999998" size="100,100">sebscore: sebscore+1
--

The bagels seem to swim before your eyes. You can&#39;t help but think about the test you got back from the doctor&#39;s. You can&#39;t help but think about how numb it made you feel, until all you wanted was [[something to set you afire.-&gt;sebgrocery6]]

</tw-passagedata><tw-passagedata pid="165" name="sebgrocery6" tags="" position="3343,620.6666666666664" size="100,100">sebscore: sebscore+1
--

The thing is, you care about mortality but not in the way that people assume. People assume you want to live. But it&#39;s not that—it&#39;s that you&#39;re afraid of dying, you&#39;re afraid of your identity vanishing into the ether. Perhaps that&#39;s why you&#39;re a writer, so that your [[words can scar-&gt;sebgrocery7]] into people&#39;s souls long after you&#39;re gone.

But you know that for Clare, it wasn&#39;t your writing that left the scars. It was [[just you, plain and simple.-&gt;sebgrocery7]]

</tw-passagedata><tw-passagedata pid="166" name="sebgrocery7" tags="" position="3534.6666666666665,612.333333333333" size="100,100">sebscore: sebscore+1
--
You know that people think that you abandoned Clare for some woman you found more attractive. You know that&#39;s why Clare refuses to talk to you; because of the abhorrent way you treated her. 

You know you&#39;re undeserving of forgiveness. But you want it anyway. You wonder if that means you want her. 

[[&quot;Mr?&quot;-&gt;sebgrocery8]]

</tw-passagedata><tw-passagedata pid="167" name="sebgrocery8" tags="" position="3709.6666666666665,605.6666666666664" size="100,100">sebscore: sebscore+1
--

It&#39;s the cashier. You suspect from the overly-patient look on her face that she&#39;s been saying your name for a while. When you look up, her face morphs into horror. &quot;Oh—no, sir, are you okay?&quot;

You touch your face. [[It&#39;s wet with tears.-&gt;sebgrocery9]]

</tw-passagedata><tw-passagedata pid="168" name="sebgrocery9" tags="" position="3899.6666666666665,618.9999999999998" size="100,100">sebscore: sebscore+1
--

&quot;I&#39;m quite all right,&quot; you say, finding your voice to be gentle, very gentle. And then you place the shopping basket on the linoleum floor, and then you walk out under the spotty fluorescent lights, under the gaze of the concerned cashier, and emerge outside to be swept away by the life of a city, back to a portrait of a girl [[you barely know anymore.-&gt;Final]] </tw-passagedata><tw-passagedata pid="169" name="pdress1" tags="" position="2069,466.3333333333332" size="100,100">phyllisscore: phyllisscore+1
--

You heard that there&#39;s a new dress store opening up today, and you always have a vested interest in supporting small businesses. (You also enjoy their worship of you as a wealthy, benevolent patron.) So you take out your sunglasses from where they were tucked in the collar of your white worsted shirt and take the [[Mercedes-Benz for a spin.-&gt;pdress2]]

 </tw-passagedata><tw-passagedata pid="170" name="pdress2" tags="" position="2262.3333333333335,454.6666666666666" size="100,100">phyllisscore: phyllisscore+1
--

The dress shop, which you find after a few missed turns, is a cute little thing tucked between the much larger attorney firm on its right and the coffee shop on its left. Between the two towering storefronts, it looks small and squished. As someone who regularly wears four-inch heels in order not to look up so high, [[you sympathize.-&gt;pdress3]]

</tw-passagedata><tw-passagedata pid="171" name="pdress3" tags="" position="2442.3333333333335,457.99999999999983" size="100,100">phyllisscore: phyllisscore+1
--

The bell chimes merrily when you enter, and a girl in a sweet rose-colored dress stands up from where she&#39;d been sitting on a stool by the cash register. &quot;Welcome to Amy&#39;s Closet,&quot; she says cheerily. &quot;I&#39;m Amy! [[How can I help you?-&gt;pdress4]]&quot;

</tw-passagedata><tw-passagedata pid="172" name="pdress4" tags="" position="2596.3333333333335,451.3333333333331" size="100,100">phyllisscore: phyllisscore+1
--

&quot;Why, this is your store?&quot; Your hand drifts to rest lightly over your heart and you smile at her, artfully slipping off the sunglasses and tucking them back into your collar. &quot;How charming. I always enjoy a good female entrepreneur myself.&quot;

You enjoy the way she blushes and shifts from one foot to another. &quot;Well, it&#39;s been a lot of work, but I can&#39;t say I&#39;m not loving it,&quot; she says. &quot;Anything in particular you&#39;re looking for?&quot;

&quot;Hm, yes,&quot; you say. &quot;[[Do you happen to have any wedding dresses?-&gt;pdress5]]&quot; 

She continues smiling, but you see her eyes flick from your face to your [[wedding ring-&gt;pdress5]], prominently displayed on your ring finger, and back. 

</tw-passagedata><tw-passagedata pid="173" name="pdress5" tags="" position="2764.666666666667,459.66666666666634" size="100,100">phyllisscore: phyllisscore+1
--

&quot;Silly me,&quot; you say. &quot;I meant a dress to attend a wedding.&quot;

&quot;Oh!&quot; she says brightly, smile even wider now from relief. &quot;Actually yes, we just got in some lovely pastel florals—as well as some darker florals, seeing as it&#39;s almost fall. You&#39;d look lovely in this antique gold wrap dress we have as well—you must be what, small? Extra small? I&#39;m sure we can find it in your size—&quot;

&quot;I was thinking something red, actually,&quot; you interrupt. &quot;Bright red.&quot; [[Blood red.-&gt;pdress6]]

</tw-passagedata><tw-passagedata pid="174" name="pdress6" tags="" position="2948.0000000000005,456.3333333333329" size="100,100">phyllisscore: phyllisscore+1
--

She blinks a little. Poor little Amy, so new to customer service. &quot;Oh,&quot; she says. &quot;Um, we have a few red dresses.&quot; She brings them out, one by one—the first one is obviously too sexy, a strappy sleeveless little thing. The other one looks like it was made for a child. But the last one—shapeless, meant to be cinched at the waist and artfully boxy in all other areas. [[That one, you cannot get your eyes off.-&gt;pdress7]] When you emerge from the dressing room, Amy blanches but gives you a thumbs up. 

</tw-passagedata><tw-passagedata pid="175" name="pdress7" tags="" position="3134.6666666666665,464.66666666666623" size="100,100">phyllisscore: phyllisscore+1
--

&quot;I&#39;ll take this one,&quot; you say, keeping it on because you like the way the scarlet bleeds against your pale skin. &quot;Could I also see your selection of black dresses?&quot;

&quot;For a cocktail party?&quot;

&quot;[[For a funeral.-&gt;pdress8]]&quot;

</tw-passagedata><tw-passagedata pid="176" name="pdress8" tags="" position="3329.666666666667,466.3333333333329" size="100,100">phyllisscore: phyllisscore+1
--

&quot;Oh,&quot; says Amy, eyes wide. &quot;I&#39;m so sorry for your loss.&quot;

She does not pry further, but instead rushes to bring out dresses that she thinks would be suitable for you. You find yourself selecting a satin one with a lace veil. The veil puts you in mind of a wedding dress, which is [[wickedly delightful to you.-&gt;pdress9]]

</tw-passagedata><tw-passagedata pid="177" name="pdress9" tags="" position="3518,457.99999999999955" size="100,100">phyllisscore: phyllisscore+1
--

You can tell that Amy is unsettled by your choices. [[But what can she do?-&gt;pdress10]] So you keep smiling, keep giving little quick sighs about how much of a drag weddings are and how sad funerals are, until she&#39;s commiserating with you about the ritualism plaguing our nation. 

Silly, empty Amy. [[You eat girls like her for breakfast.-&gt;pdress10]]

</tw-passagedata><tw-passagedata pid="178" name="pdress10" tags="" position="3701.333333333333,459.6666666666662" size="100,100">phyllisscore: phyllisscore+1
--
When you leave Amy&#39;s Closet, wallet significantly lighter and in a much more entertained mood after plying Amy with enough compliments on her store to leave her tomato-red, you are confident that you have pulled off your facade perfectly. To her, you&#39;re just another [[eccentric rich woman-&gt;pdress11]] with little social intelligence (or perhaps intelligence in general). The perfect patron. 

</tw-passagedata><tw-passagedata pid="179" name="pdress11" tags="" position="3918,459.6666666666662" size="100,100">phyllisscore: phyllisscore+1
--
When you get home, your good mood sours. Someone has turned the portrait face up. You toss your purchases onto the bed and put your hands on your hips, chewing your lip in annoyance. You&#39;d imagine it was your husband, but he&#39;s not home yet. It&#39;s most likely the household staff—or even worse, the daughter. 

You don&#39;t touch it. But—

&lt;i&gt;Soon,&lt;/i&gt; you think viciously, staring at her face. &lt;i&gt;You will see your husband soon. Our husband. Just you wait.&lt;/i&gt;

Behind you, the red dress [[gleams like sin.-&gt;Final]]</tw-passagedata><tw-passagedata pid="180" name="pmurder1" tags="" position="1560.333333333333,1238.666666666667" size="100,100">phyllisscore: phyllisscore+1
--

The past Mother&#39;s Day, she took you aside. For a moment you were viciously pleased—you&#39;d never wanted to be her mother figure, but it&#39;s even better if you hadn&#39;t wanted to and she&#39;d considered you her mother figure anyway. But then what next came out of her mouth infuriated you. 

&quot;I just wanted to ask you if you were okay with [[driving me to the cemetery,-&gt;pmurder2]]&quot; she said with big, teary eyes. &quot;I&#39;d ask Father, but he&#39;s working today.&quot; 

</tw-passagedata><tw-passagedata pid="181" name="pmurder2" tags="" position="1711.9999999999998,1235.3333333333337" size="100,100">phyllisscore: phyllisscore+1
--

&quot;Of course, sweetheart,&quot; you had said, between clenched teeth. &quot;It&#39;d be my honor to.&quot;

You&#39;d sat in the car with your sunglasses on as she&#39;d knelt before the tombstone and wept freely from her big stupid eyes. And, you think, that was the moment you decided to kill &lt;i&gt;Lola&lt;/i&gt; instead of her father, like you had planned. You&#39;re not sure why that particular moment, but you think it comes from her [[emotions surrounding death.-&gt;pmurder3]]

 </tw-passagedata><tw-passagedata pid="182" name="pmurder3" tags="" position="1875.333333333333,1245.3333333333337" size="100,100">phyllisscore: phyllisscore+1
--

Because she sees death as a great evil, as someone who took away her mother. 

She doesn&#39;t see Death for what it is: [[Perfect.-&gt;pmurder4]]

</tw-passagedata><tw-passagedata pid="183" name="pmurder4" tags="" position="2023.6666666666663,1240.3333333333337" size="100,100">phyllisscore: phyllisscore+1
--

So you hatch the plan. You buy the wig. You buy the train tickets, you read books about martial arts and how to produce strength in a small body, you lay awake in bed once you have performed your wifely duties and ruminate on how best to rid the man beside you of his spawn. You think, perhaps this will be an opportunity for you to have a child. You&#39;re still young enough—and maybe it&#39;d help him, to have a child to raise that [[both of you could love.-&gt;pmurder5]]

</tw-passagedata><tw-passagedata pid="184" name="pmurder5" tags="" position="2178.666666666666,1240.3333333333337" size="100,100">phyllisscore: phyllisscore+1
--

(Honestly, you&#39;re definitely not looking forward to helping him through the grieving process. But a [[wife is a wife.-&gt;pmurder6]]) 

</tw-passagedata><tw-passagedata pid="185" name="pmurder6" tags="" position="2335.3333333333326,1240.3333333333337" size="100,100">phyllisscore: phyllisscore+1
--

On the day when it&#39;s supposed to happen, you wake up in a great mood. The sun is shining brilliantly, the birds are singing—you take that as heaven&#39;s sanctioning of your actions. Not that you really want to go to heaven, anyway. But you&#39;re humming as you get dressed, humming as you kiss your husband goodbye, humming as you drive Lola [[to the train station in the evening.-&gt;pmurder7]] She was supposed to visit her mother&#39;s sister. 

</tw-passagedata><tw-passagedata pid="186" name="pmurder7" tags="" position="2486.999999999999,1242.0000000000005" size="100,100">phyllisscore: phyllisscore+1
--

You take the [[wrong turns.-&gt;pmurder8]] 

</tw-passagedata><tw-passagedata pid="187" name="pmurder8" tags="" position="2660.3333333333326,1248.6666666666672" size="100,100">phyllisscore: phyllisscore+1
--

You pull up into the darkest of alleys. You turn to her and her lips are bloodless. You know she knows. She knows about you. 

&quot;Lola darling,&quot; you sing, and [[point the gun at her.-&gt;pmurder9]] 

</tw-passagedata><tw-passagedata pid="188" name="pmurder9" tags="" position="2810.3333333333326,1248.6666666666672" size="100,100">phyllisscore: phyllisscore+1
--

&quot;I knew it,&quot; she said, trembling. &quot;I always knew that you killed my mother so that you could marry my father—that it was you, but everyone just thought you had been so brave. &lt;i&gt;Poor woman,&lt;/i&gt; they used to say, &lt;i&gt;she was practically frostbitten when she found the doctors, but she didn&#39;t care, she only cared about her friend&lt;/i&gt;. 

Despite the gun, despite her fear, she&#39;s shouting at you. &quot;I knew it was you this entire time! Even when my father fell in love with you—I knew it, and God knows it, and you [[won&#39;t get away with this-&gt;pmurder10]], you bitch.&quot;

You almost like her, in that moment. But, [[the plan is a plan.-&gt;pmurder10]] 

</tw-passagedata><tw-passagedata pid="189" name="pmurder10" tags="" position="2971.999999999999,1243.6666666666672" size="100,100">phyllisscore: phyllisscore+1
--

&quot;You should be jealous,&quot; you say, 

&quot;What?&quot; she exclaims. She&#39;s not crying. Good girl. Instead, her face is aflame with fury and her teeth are gritted. &quot;Jealous of what?&quot;

&quot;That you get to see your mother again.&quot; Your voice is half a sigh, and her face drains. &quot;That you get to meet my one true love, Death.&quot;

&quot;Please,&quot; she says, once.

[[&quot;Turn around, Lola.&quot;-&gt;pmurder11]]

</tw-passagedata><tw-passagedata pid="190" name="pmurder11" tags="" position="3171.999999999999,1255.333333333334" size="100,100">phyllisscore: phyllisscore+1
--

She does, trembling. You lower the gun, tuck it into your bag. You won&#39;t need it for the next part, which you&#39;ve practiced on enough test dummies that your arms hurt for days.

&quot;Give him a kiss for me,&quot; you say, and [[break her neck.-&gt;pmurder12]] 

</tw-passagedata><tw-passagedata pid="191" name="pmurder12" tags="" position="3365.3333333333326,1238.6666666666672" size="100,100">phyllisscore: phyllisscore+1
--
You have to conceal your smile when you read the newspaper the next day over breakfast. In the master bedroom, your husband is disconsolate. He has not stopped weeping since he heard. You&#39;d comforted him all night, but emerged once you decided you need food. The household staff murmurs their sympathies and you scrub at your red-rimmed eyes and refuse to speak (for fear that [[you might laugh-&gt;pmurder13]]). 

Eyewitnesses state that they saw a young woman with long brown hair (just like Lola) board the station. A man even said that he&#39;d talked to her, he swore (you had made sure that you only talked to him in shadow, but it&#39;s funny what eyewitnesses can trick themselves into thinking), and she&#39;d told him that she&#39;d forgotten her bag inside. As a gentleman, he&#39;d gone inside to get it for her. When he emerged back outside, [[she was gone.-&gt;pmurder13]] 

Her body was found, neck broken. People assumed that she&#39;d leaned out for too much fresh air. And some assumed she was suicidal. 

</tw-passagedata><tw-passagedata pid="192" name="pmurder13" tags="" position="3578.666666666666,1252.0000000000005" size="100,100">phyllisscore: phyllisscore+1
--
So, you keep her portrait up, for her father. You keep the flowers in the vase fresh—personally. The sight of her face no longer bothers you; instead it amuses you, even brings you joy, to know that she and her mother are [[finally, truly, happy.-&gt;Final]]</tw-passagedata><tw-passagedata pid="193" name="seb2" tags="" position="1487.3333333333335,1923.3333333333337" size="100,100">sebscore: sebscore+1
--

Well, that&#39;s not strictly true. On your deathbed, you find that you regret some things a few more than her. You regret never [[eating the sugared violets your mother gave you-&gt;seb3]]. You regret how you [[broke Clare&#39;s heart.-&gt;seb3]] You regret the last book you published. (More humorously, you regret hiring Mr. Goodman. What a shit secretary) 

</tw-passagedata><tw-passagedata pid="194" name="seb3" tags="" position="1662.3333333333335,1918.3333333333337" size="100,100">sebscore: sebscore+1
--

But you regret her, mostly because you regret the way the blood [[stained your hands.-&gt;seb4]]

</tw-passagedata><tw-passagedata pid="195" name="seb4" tags="" position="1829.0000000000002,1920.0000000000005" size="100,100">sebscore: sebscore+1
--

You never would&#39;ve thought yourself capable of such violence. Anyone who&#39;d met you in college or beyond would&#39;ve described  you as such a mild-mannered man. 

But you are a son of your mother as well as your father, and both were [[bloodthirsty in their own ways.-&gt;seb5]] 

</tw-passagedata><tw-passagedata pid="196" name="seb5" tags="" position="1995.6666666666667,1913.3333333333337" size="100,100">sebscore: sebscore+1
--

Your mother, lovingly called a whore by a community of ignorants, was thirsty for the bloodlust. So they say. You only remember her as a tired, sweet-looking woman who talked to you with a tremble in her voice. You can&#39;t often relate bloodlust and terminal illness together in anyone other than yourself, but you think: [[I got it from her.-&gt;seb6]]

Your father, you remember more clearly. But you remember the tick in his jaw whenever he got angry. True anger belonged to him and him alone: the way it swelled inside of him and eclipsed every other thought made him a single-minded fellow. But you think: [[I got it from him.-&gt;seb6]]

</tw-passagedata><tw-passagedata pid="197" name="seb6" tags="" position="2192.3333333333335,1903.333333333334" size="100,100">sebscore: sebscore+1
--

So, when you looked at the blood on your hands, you told yourself that it was not your fault, but theirs. And then you felt immediately guilty for that. But it seems like every tragedy in your life—your disease, your propensities for unfulfilling relationships—could be [[traced back to your genes, who you truly are.-&gt;seb7]] Right?

</tw-passagedata><tw-passagedata pid="198" name="seb7" tags="" position="2365.666666666667,1900.0000000000007" size="100,100">sebscore: sebscore+1
--

[[Right.-&gt;seb8]]

</tw-passagedata><tw-passagedata pid="199" name="seb8" tags="" position="2590.666666666667,1905.000000000001" size="100,100">sebscore: sebscore+1
--

You don&#39;t even really remember killing her. You just remember, more starkly, how it felt when she sent another man to tell you that it was over. You don&#39;t actually remember stealing into her house, threatening her, killing her. All you remember is your wasted body on top of her corpse, how the knife felt in your hands, how her dead eyes had stared into yours. She had never looked at you so intimately before. 

It&#39;s a nice memory. It felt like [[winning a game.-&gt;seb9]] 

</tw-passagedata><tw-passagedata pid="200" name="seb9" tags="" position="2787.3333333333335,1900.000000000001" size="100,100">sebscore: sebscore+1
--

&quot;Where is he?&quot; you whisper.

&quot;Your brother is on his way,&quot; the nurse is saying to you. &quot;You must hold out.&quot; 

You think [[she&#39;s lying.-&gt;seb10]] 

</tw-passagedata><tw-passagedata pid="201" name="seb10" tags="" position="3034,1908.3333333333344" size="100,100">sebscore: sebscore+1
--

You would&#39;ve liked to see him one last time. You wonder if he will understand, when the truth comes out, as it always does. If he will think of you any differently. He is the only one that you sent for [[when on your deathbed.-&gt;seb11]]

</tw-passagedata><tw-passagedata pid="202" name="seb11" tags="" position="3224.0000000000005,1911.6666666666677" size="100,100">sebscore: sebscore+1
--

But everyone has a propensity for disappointing you. [[Even yourself.-&gt;seb12]] 

</tw-passagedata><tw-passagedata pid="203" name="seb12" tags="" position="3427.3333333333335,1915.0000000000011" size="100,100">sebscore: sebscore+1
--

And then you see It in the distance and It fills you with fear: Checkmate. And there are queens everywhere, all on the board, and their targets are all you. And they are women, and they are disappointed and angry and afraid, and all you feel is terror and brightness, so bright, and [[then-&gt;seb13]]

</tw-passagedata><tw-passagedata pid="204" name="v2" tags="" position="1485.9999999999998,1737.0000000000002" size="100,100">vscore: vscore+1
--

It takes you a while to track her down, unfortunately. Mr. Goodman, your brother&#39;s secretary, is belligerent at best and odious in the norm. Your talk with him proves to be fruitless, and he presses his mask into your hands with a wink and a tap to his own face, which you stuff into your pocket with nary a thought otherwise. Next, it&#39;s a quick and thorough investigation of your brother&#39;s correspondence. And then, almost a chat with Clare, his ex-lover, before you decide not to. She looks too serene. In the end, it&#39;s the help of a private detective that you stumble upon who [[whittles your list down to three.-&gt;v3]]

</tw-passagedata><tw-passagedata pid="205" name="v3" tags="" position="1660.9999999999998,1715.3333333333335" size="100,100">vscore: vscore+1
--

In the end, the very end, the end where all things begin, it turns out to be Nina Reshnoy. You find her in a tall arching house, with her face buried in a patch of violets. 

&quot;May I help you?&quot; She has a long, languid voice that matches her perfectly; the sun on her fair face is almost blinding. The smile on her face is [[indolently amused.-&gt;v4]]

</tw-passagedata><tw-passagedata pid="206" name="v4" tags="" position="1855.9999999999998,1712.0000000000002" size="100,100">vscore: vscore+1
--

&quot;Are you Nina Reshnoy?&quot; you ask. 

&quot;[[Why is who I am of consequence to you-&gt;v5]]?&quot; she replies. 

</tw-passagedata><tw-passagedata pid="207" name="v5" tags="" position="2040.9999999999998,1715.3333333333335" size="100,100">vscore: vscore+1
--
&quot;Well, you see, I&#39;m in search of my brother,&quot; you explain. She quirks her lovely head and then smiles when you tell her his name. &quot;He disappeared, and I think you might be my only lead. [[He had a portrait of you.-&gt;v6]] One pretty well-taken care of. And if you could give me any insight, I&#39;d much appreciate it.&quot;

</tw-passagedata><tw-passagedata pid="208" name="v6" tags="" position="2267.6666666666665,1712.0000000000002" size="100,100">vscore: vscore+1
--

&quot;Insight,&quot; she muses. &quot;Let me try my best, then. Your brother, when I met him, if I am who you say I am and then, of course, know him perhaps more intimately than you do–your brother, if you can imagine him, was a foppish young intellectual [[prone to long rambles and nervous fits.-&gt;v7]] I got sick of him, if that is the insight you want—that I did not love him as much as he loved me.&quot;

You are trembling with the rage by the time she finishes. The quirk to her lips is [[impossibly lovely-&gt;v7]] when she smiles at your rage. She taps her fingers against the ground. &quot;Did you want me to say that I adored him?&quot;

&quot;[[You lie,-&gt;v7]]&quot; you say with certainty. 


</tw-passagedata><tw-passagedata pid="209" name="v7" tags="" position="2470.666666666667,1703.666666666667" size="100,100">vscore: vscore+1
--

&quot;Does she?&quot; says a strong, alive voice behind you. But before you can turn around, you are first struck by Nina&#39;s face—if that is Nina, for her features are melding, warping, shaping, until she is someone you recognize and do not know at all, both at once. 

The voice behind you is very similar. [[You know who it is before you turn around.-&gt;v8]]

</tw-passagedata><tw-passagedata pid="210" name="v8" tags="" position="2665.666666666667,1713.666666666667" size="100,100">vscore: vscore+1
--

It is your brother, [[but impossibly so.-&gt;v9]] Your brother, both weak and frail as he must&#39;ve been on the cusp of—Your brother, strong and hale like you remember him in your youth. Your brother, smiling and frowning and more alive in this one moment than in all your memory.

</tw-passagedata><tw-passagedata pid="211" name="v9" tags="" position="2860.666666666667,1718.666666666667" size="100,100">vscore: vscore+1
--

&quot;I&#39;m disappointed,&quot; says Sebastian, and your stomach drops. &quot;I didn&#39;t disappear, little brother. [[I sent you a note,-&gt;v10]] to which you never responded.&quot;

[[You remember no note.-&gt;v10]] You tell him so. 

</tw-passagedata><tw-passagedata pid="212" name="v10" tags="" position="3045.666666666667,1717.0000000000002" size="100,100">vscore: vscore+1
--

He gives you a knowing look. &quot;Well, well. Things get lost, sometimes, if people don&#39;t look for them.&quot; 

&quot;If people are given no reason to look for them,&quot; you say, suddenly angry with this brother who is beyond anger. 

As if to fuel your flames, he shakes his head. &quot;I&#39;m disappointed [[you found me.-&gt;v11]]&quot;

</tw-passagedata><tw-passagedata pid="213" name="v11" tags="" position="3185.666666666667,1712.0000000000002" size="100,100">vscore: vscore+1
--

You splutter, outraged that he would dismiss all of your hard work. But before you can stumble out an explanation of how 

&quot;Don&#39;t you understnd?&quot; he says, cupping your face. You can feel his fingers, you cannot feel his fingers, and you are struck by the (in)substantiality of it all. &quot;I left for you. I left so that you didn&#39;t have to worry about me, so that you could become your own person.&quot; 

His hand drops from your face and clasped between his fingers is the mask Mr. Goodman gave you, the one that you [[did not realize was on your face at all.-&gt;v12]]

</tw-passagedata><tw-passagedata pid="214" name="v12" tags="" position="3382.3333333333335,1710.3333333333335" size="100,100">vscore: vscore+1
--

And then, before your stunned eyes, he walks over to the woman—her face is changing, constantly morphing, but you catch a hint of Nina&#39;s smirk and a blink of Clare&#39;s kind eyes. He does not say goodbye; you suppose you lost that prerogative along with the lost note. They touch hands, they share a smile, and just like that, they are gone. So is the house. So is the patch of violets, though their scene remains. 

And you are alone, and there has been nothing more worse. Or more exciting. You wonder what the note had said; the sinking feeling in your stomach tells [[you you already know.-&gt;v13]]

</tw-passagedata><tw-passagedata pid="215" name="v13" tags="" position="3572.3333333333335,1717.0000000000002" size="100,100">vscore: vscore+1
--
You strike the pieces from the board. You reset, then, [[for a new game.-&gt;Final]] </tw-passagedata><tw-passagedata pid="216" name="walt1" tags="" position="1669.333333333333,964.9999999999998" size="100,100">walterscore: walterscore+1
--

You met her first because you were working for her father. Isn&#39;t that sick? You went to her door, looking for her father, and she answered instead, a pretty young slip of a thing. She&#39;d demurred when you asked her if her father was interested in life insurance, and then looked up and said boldly, hotly, &quot;I don&#39;t know if he&#39;s interested, but I sure am not! Profiting off my father&#39;s death is the last thing I&#39;d want to do.&quot;

You remember quirking your eyes. &quot;In my opinion, [[it&#39;s the kindest thing  father can do.-&gt;walt2]]&quot;


</tw-passagedata><tw-passagedata pid="217" name="walt2" tags="" position="1852.6666666666663,959.9999999999998" size="100,100">walterscore: walterscore+1
--

That startled her, you could tell. &quot;What do you mean?&quot;

&quot;Well, a man who takes out life insurance when he&#39;s got nobody to provide for? That&#39;s a fair bit embarrassing and greedy. But a man who has a daughter and takes out life insurance in a job that&#39;s relatively safe? That&#39;s a man who worries about his child. That&#39;s a man who wants his daughter to be provided for in every instance.&quot;

She nibbles cutely on her lip. &quot;I&#39;ll mention it to him,&quot; she finally says. &quot;Do you have a business card I can give him?&quot; 

You do. When you give it to her, she scrunches up her face and says your name, and you think with a little bit of embarrassment that it sounds damn good in her mouth. 

&quot;I&#39;m Lola,&quot; she says, and shakes your hand. [[You drive home afterwards humming, your fingers tapping against the wheel.-&gt;walt3]]

</tw-passagedata><tw-passagedata pid="218" name="walt3" tags="" position="2034.333333333333,961.6666666666664" size="100,100">walterscore: walterscore+1
--
When her father comes around to the building, you don&#39;t immediately realize that he&#39;s her father. He comes with this bombshell blonde, a real zinger of a lady, but who looks around the insurance building with such disdain that you write her off as a bad idea. He asks for you by name; puzzled, you sit him down in your office. 

It becomes clearer when he speaks. &quot;My daughter mentioned you dropped by,&quot; he said, and suddenly you can see Lola, in the pale seafoam watery blue of his eyes, in the quirk of his smile. &quot;When life insurance came up, well. My wife, Phyllis, [[insisted that I go for it.-&gt;walt4]] She frets too much, this one.&quot;

The wife nods, and you dislike her even more. Worrywart wives, those are the worst. You&#39;ve got a few buddies with wives like that, who can&#39;t stay out past 10 without a barrage of freaked-out calls begging for them to come home. It&#39;s eminently clear that[[ Phyllis falls under this category.-&gt;walt4]] 

</tw-passagedata><tw-passagedata pid="219" name="walt4" tags="" position="2189.333333333333,966.6666666666665" size="100,100">walterscore: walterscore+1
--
So you sign him up for a life insurance and don&#39;t think much more of it. Until days later, when the daughter comes traipsing in with a handsome young man on her arm. &quot;Hello,&quot; she says with enough cheer to light up the office. &quot;This is Nino Sachetti.&quot; She doesn&#39;t label it, but it&#39;s clear to anyone from the way that they look at each other that they&#39;re an item. 

They&#39;re two dumb kids, you remind yourself as you help them fill out a minor insurance policy. [[It&#39;s as good of a reminder as any that she&#39;s barely an adult.-&gt;walt5]] 

 </tw-passagedata><tw-passagedata pid="220" name="walt5" tags="" position="2320.9999999999995,966.6666666666665" size="100,100">walterscore: walterscore+1
--
You didn&#39;t understand, until later, why the whole encounter [[made you feel funny.-&gt;walt6]]

</tw-passagedata><tw-passagedata pid="221" name="walt6" tags="" position="2479.333333333333,956.6666666666665" size="100,100">walterscore: walterscore+1
--

You just remember coming out of your office on one of those rainy days, thinking that it was fortunate that you had remembered to bring an umbrella, and found her, soaked to the skin, sitting on the steps outside. &quot;Hello,&quot; she said, blinking up at you as the water ran out of her eyes. 

&quot;Lola,&quot; you said, startled. &quot;Good lord, you must be freezing.&quot; Without thinking much of it, you give her your umbrella, and then it&#39;s your turn to have frigid streams of water running down your face and into your eyes. She takes it with a murmur of thanks, staring hard at the ground before looking up at you. 

[[&quot;I think my stepmother killed my father for the life insurance. And now she&#39;s dating my boyfriend, and I need your help.&quot;-&gt;walt7]]

</tw-passagedata><tw-passagedata pid="222" name="walt7" tags="" position="2632.6666666666665,968.3333333333331" size="100,100">walterscore: walterscore+1
--
So, so. You become co-conspirators. That in itself is already a fascinating prospect—you never considered yourself co-conspirator material. 

In becoming co-conspirators, however, you end up spending a lot of time with her. Enough to notice the slight curl that never gets properly tucked behind her ear. Enough to admire the way her lips push out into a half-pout, half-moue when she&#39;s frustrated. [[And she&#39;s single now,-&gt;walt8]] your brain rationalizes, before delving into a series of math equations to figure out if she&#39;s too young. 

[[You know what that means.-&gt;walt8]]

</tw-passagedata><tw-passagedata pid="223" name="walt8" tags="" position="2792.6666666666665,958.333333333333" size="100,100">walterscore: walterscore+1
--

However, you also know what it means when she says, &quot;Phyllis is going out with my boyfriend,&quot; and continually forgets the prefix of ex-, or stumbles over Nino&#39;s name. [[It&#39;s enough to scare off any guy.-&gt;walt9]] 


</tw-passagedata><tw-passagedata pid="224" name="walt9" tags="" position="2941,958.333333333333" size="100,100">walterscore: walterscore+1
--
Phyllis and Nino like to take out spins in a fast little car. You two figure out their schedule pretty fast and then, one night, you two follow them. You remember the car ride better than anything—the way you could barely keep your eyes on the road, you were too busy looking at Lola&#39;s intent stare. The way the gravel rattled against the rims of the car wheels. You think that&#39;ll be burned into your brain forever. 

You followed them, and as such, you both were there to overhear it when Nino says, &quot;I know what you&#39;ve done,&quot; to Phyllis. 

And because of your vantage point, you both are able to see [[when he pulls a gun on Phyllis.-&gt;walt10]]

</tw-passagedata><tw-passagedata pid="225" name="walt10" tags="" position="3134.3333333333335,969.9999999999997" size="100,100">walterscore: walterscore+1
--

&quot;You killed her father, didn&#39;t you,&quot; he says. &quot;Do you even know what you&#39;ve done to Lola in your greed?&quot;

Phyllis is very still. And then she hisses out, &quot;&lt;i&gt;Yes.&lt;/i&gt;&quot;

&quot;I want you to turn yourself in.&quot; His hands are shaking; Geez, he really is a kid. &quot;[[I want you to turn yourself in, so that all the money goes to Lola.-&gt;walt11]]&quot;

</tw-passagedata><tw-passagedata pid="226" name="walt11" tags="" position="3282.666666666667,976.6666666666662" size="100,100">walterscore: walterscore+1
--

&quot;So that&#39;s what this was all about?&quot; purrs Phyllis, and she takes a step forward. You almost want to scream at the kid to run. &quot;The money, the money. You want the money to pass from me to Lola so you can, what? Marry her and take your share?&quot;

He&#39;s shaking his head almost instantly and she takes another step forward while he&#39;s distracted. &quot;No,&quot; he says, frantic. &quot;No, no. I just want her to be happy, you hear me? You know that life insurance wasn&#39;t meant for you. [[You know he did it for her.-&gt;walt12]]&quot;

Phyllis snarls at that last sentence. 
</tw-passagedata><tw-passagedata pid="227" name="walt12" tags="" position="3439.3333333333335,976.6666666666661" size="100,100">walterscore: walterscore+1
--

The worst part is, you&#39;re next to Lola. You can see the way she reacts to his words; her face takes on this imperceptible glow. Her fingers twitch, her cheeks flush. 

&quot;You don&#39;t want to kill me, Nino,&quot; says Phyllis.

&quot;I don&#39;t,&quot; he says. &quot;[[I will, however, for her.-&gt;walt13]]&quot;

For once, you finally agree with him.

</tw-passagedata><tw-passagedata pid="228" name="walt13" tags="" position="3569.3333333333335,981.6666666666661" size="100,100">walterscore: walterscore+1
--

Besides you, Lola stirs. Before you can stop her, she&#39;s running out like the little fool she is, shouting, &quot;Nino, don&#39;t! She&#39;s not worth it!&quot; You go pelting after her, shouting. 

And when Nino turns, Phyllis strikes, fast as a cobra. She snatches the gun away from him, but instead of aiming it back at him, she aims for Lola, her face contorted in rage. 

You&#39;re in front of Lola before you know what else to do. The shot rips through your gut, [[sends you tumbling to the ground.-&gt;walt14]] 

</tw-passagedata><tw-passagedata pid="229" name="walt14" tags="" position="3552.666666666667,1116.666666666666" size="100,100">walterscore: walterscore+1
--

You&#39;re not quite aware of what happens afterwards. You know that Nino and Lola recede to vague shapes on a dim background; you hear Phyllis howl and then that howl reduced to muffled shrieking. They have gagged her, you assume. 

But [[you don&#39;t know anything.-&gt;walt15]] Not until she comes back into your view. 

</tw-passagedata><tw-passagedata pid="230" name="walt15" tags="" position="3686.9999999999995,1126.666666666666" size="100,100">walterscore: walterscore+1
--

&quot;Oh Walter!&quot; Her face is stricken. Tears run freely from her face and fall onto yours; it reminds you of when you had given her your umbrella, in the rain. You smile. You hold her hand and whisper the truth, because that&#39;s what people do before they die. 

You can see Nino, over her shoulder, his hands outreached like he wants to hold her but is unsure if he can. Her hand flails behind her, finds him, grabs. She&#39;s staring at you, but [[she&#39;s holding his hand when your vision fades to black.-&gt;walt16]]

That&#39;s how things ended up, you guess. 

</tw-passagedata><tw-passagedata pid="231" name="walt16" tags="" position="3696.9999999999995,964.9999999999993" size="100,100">walterscore: walterscore+1
--
The embarrassing part is: You don&#39;t actually die. You&#39;ve just got the scar, and the resulting mortification. She came to the hospital, when you were healing, and though she didn&#39;t say anything, you saw the ring on her finger. 

&quot;I will always be indebted to you,&quot; she told you. 

&quot;Great. [[I&#39;m cashing in that favor now,-&gt;walt17]]&quot; you tell her, and her face scrunches up in confusion. 

</tw-passagedata><tw-passagedata pid="232" name="walt17" tags="" position="3835.333333333333,986.666666666666" size="100,100">walterscore: walterscore+1
--
You regret telling her so harshly to stay away from you. But you were stinging and sore (and most importantly, healing from a bullet wound that you&#39;d taken for her). So yeah, you&#39;re not proud of it, and the injured look on her face hurt you just as much as it hurt her.

Part of it is embarrassment because she rejected you for another guy, sure. But part of it is embarrassment that you were attracted to her in the first place—you&#39;ve never been that sort of guy, to clearly start and finish on the losing end. Especially a kid like her. You think to yourself: it&#39;s best that it never worked out. You could never have stood that naivete for too long. 

But standing in front of the mirror, wearing the suit that you were shot in, you think, perhaps.

Perhaps [[it&#39;s time to pick up the phone.-&gt;Final]]</tw-passagedata><tw-passagedata pid="233" name="wportrait1" tags="" position="1628.6666666666665,1458.666666666667" size="100,100">walterscore: walterscore+1
--

[[You remember loving her-&gt;wportrait2]], once.

[[You remember loving people other than her-&gt;wportrait2]], once. 


</tw-passagedata><tw-passagedata pid="234" name="wportrait2" tags="" position="1866.9999999999998,1460.3333333333337" size="100,100">walterscore: walterscore+1
--

You still remember the violent rejection that your body had after the death—after the murder. You remember vomiting, of shaking, of sweating, and eventually of crying. 

But most importantly, you remember going to church. Not immediately afterwards. Weeks afterwards. When love had turned to hate, and you had fallen, unforgivably, [[for the daughter of the man you killed.-&gt;wportrait3]] 

 </tw-passagedata><tw-passagedata pid="235" name="wportrait3" tags="" position="2097,1475.3333333333337" size="100,100">walterscore: walterscore+1
--

Well, in reality you don&#39;t actually remember going to church. You just remember being in your bed—and then suddenly, you were at church, having worked your way along a path you thought long-forgotten. Sweating and pale, you made your way to the confessional box. 

[[&quot;Father?&quot; you whisper.-&gt;wportrait4]]

</tw-passagedata><tw-passagedata pid="236" name="wportrait4" tags="" position="2328.666666666667,1483.666666666667" size="100,100">walterscore: walterscore+1
--

&quot;I am here, my son.&quot;

You collapse in relief. 

&quot;Father,&quot; you whisper; you seem unable to lift your voice higher. &quot;I fear [[I have done something irreparable.-&gt;wportrait5]]&quot;

</tw-passagedata><tw-passagedata pid="237" name="wportrait5" tags="" position="2502.0000000000005,1490.3333333333335" size="100,100">walterscore: walterscore+1
--

The day after your confession, you asked Phyllis if you could meet her. That day was the day you kissed Lola, shy-quick in a way you imagine kissing a bird would be: a kiss poised for flight.

Yes, you asked Phyllis to meet you. [[And you told Lola of your plan.-&gt;wportrait6]] 

</tw-passagedata><tw-passagedata pid="238" name="wportrait6" tags="" position="2697.0000000000005,1478.6666666666667" size="100,100">walterscore: walterscore+1
--
You still remember the snarl on her face as she lunged for you. The blast of the gun as you shot her. The way you cradled her body as she died, her face in a triumphant smile; the way you wept even as you praised God that she was dead.  

Lola couldn&#39;t look you in the eye as they carted away Phyllis&#39;s body. You didn&#39;t blame her. You also wouldn&#39;t know what to say to [[someone who killed a woman and then wept because of his love for her-&gt;wportrait7]], especially the day after you kissed him. 

</tw-passagedata><tw-passagedata pid="239" name="wportrait7" tags="" position="2912.0000000000005,1477.0000000000002" size="100,100">walterscore: walterscore+1
--

&quot;You cannot change the past, my son,&quot; the priest had told you after you cried and shivered and wept out your sins. It had taken him a while to say this; he had apparently been ruminating over the particular weight of your sins. 

And yet, his voice lacked any judgment, even as you wondered if the man behind the golden shield harbored any disgust. &quot;You seem to have fallen into the trap of loving too much, and letting that blind you from the sin of your ways. But you have cleared your eyes now—I trust that you will find yourself on a better path. Is a building irreparable when it has crumbled due to an earthquake? I think the answer from everyone, including Him above, is no. The earthquake was sent to test the foundations. My child—your foundation has fallen. You must build yourself up once more, from the bottom of morals back to high ground.&quot;

You&#39;re going to jail, now. For manslaughter, on two counts. [[A father and his wife.-&gt;wportrait8]] That&#39;s all they are to you, now, as they are beyond all other meaning. 

</tw-passagedata><tw-passagedata pid="240" name="wportrait8" tags="" position="3108.666666666667,1490.3333333333337" size="100,100">walterscore: walterscore+1
--
You think the priest was [[right to say-&gt;wportrait9]] what he did say. 

</tw-passagedata><tw-passagedata pid="241" name="wportrait9" tags="" position="3293.666666666667,1480.3333333333335" size="100,100">walterscore: walterscore+1
--
You give in. You place the portrait back up. 

The portrait is the only thing you have of sentimental value on the boat that you&#39;re taking in order to go to jail. You thought about having a portrait of Lola, but all that reminds you of is what you lost. Having a portrait of Phyllis, however.

It reminds you of what you have yet to become. And somehow, that is enough. You will build yourself up, foundation first. [[You bow your head in prayer.-&gt;Final]]</tw-passagedata><tw-passagedata pid="242" name="first" tags="" position="508,159.00000000000006" size="100,100">I would heed you to remember, however, that it is not the choices you make at the end that matter the most, but instead the [[choices you make at the beginning.-&gt;introquote]]</tw-passagedata><tw-passagedata pid="243" name="seb13" tags="" position="3594,1891.6666666666677" size="100,100">n

o

t

h

i

n

[[g.-&gt;Final]]</tw-passagedata></tw-storydata><script>!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.set=t.defaults=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.init=function(){var e=(0,u.name)();if(void 0===e)throw new Error("Cannot set up state: the story has no name");d="chapbook-state-"+e},t.reset=v,t.sameObject=function(e,t){for(var n=e.split("."),r=t.split("."),o=0;o<n.length&&o<r.length;o++)if(n[o]!==r[o])return!1;return!0},t.setDefault=function(e,t){var n=y(e);f('Defaulting "'+e+'" to '+JSON.stringify(t)),(0,i.default)(h,e,t),m(window,e),null==n&&a.default.emit("state-change",{name:e,value:t,previous:n})},t.setLookup=function(e,t){var n=y(e);f("Adding lookup variable "+e),(0,i.default)(g,e,t),m(window,e),null==n&&a.default.emit("state-change",{name:e,value:y(e),previous:n})},t.saveToObject=w,t.restoreFromObject=_,t.canSaveToStorage=x,t.saveToStorage=k,t.canRestoreFromStorage=function(){return x()&&null!==window.localStorage.getItem(d)},t.restoreFromStorage=function(){f("Restoring variables from local storage"),_(JSON.parse(window.localStorage.getItem(d))),f("Restore complete")},t.purgeFromStorage=function(e){e||f("Purging variables from local storage");_(JSON.parse(window.localStorage.getItem(d))),e||f("Purge complete")},t.varNames=function(e){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object.keys(e).reduce(function(o,i){if("object"===r(e[i])&&e[i]&&!Array.isArray(e[i]))t(e[i],n?n+"."+i:i,o);else{var s=n?n+"."+i:i;-1===o.indexOf(s)&&o.push(s)}return o},o)}if(e)return t(h,null,t(p,null)).sort();return t(p).sort()};var o=c(n(34)),i=c(n(35)),s=c(n(37)),a=c(n(1)),l=c(n(4)),u=n(6);function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,l.default)("state").log,d=void 0,p={},h={},g={};function m(e,t){if(!e[t]){Object.defineProperty(e,t,{get:function(){return y(t)},set:function(e){b(t,e)},configurable:!0});var n=t.split(".");n.length>1&&(n.pop(),m(e,n.join(".")))}}function v(){!function e(t,n){Object.keys(t).forEach(function(o){var i,l,u=""===n?o:n+"."+o;if("object"!==r(t[o])||Array.isArray(t[o])){var c=t[o];delete t[o],i=window,l=n,(0,s.default)(i,l),a.default.emit("state-change",{name:u,value:y(u),previous:c})}else e(t[o],u)})}(p,""),a.default.emit("state-reset"),y("config.state.autosave")&&k()}function b(e,t){var n=y(e);(0,i.default)(p,e,t),m(window,e),t!==n&&a.default.emit("state-change",{name:e,previous:n,value:t}),y("config.state.autosave")&&k()}function y(e){var t=(0,o.default)(g,e);if("function"==typeof t)return t(y,b);var n=(0,o.default)(p,e);return null==n?(0,o.default)(h,e):n}function w(){return Object.assign({},p)}function _(e){v(),Object.keys(e).forEach(function(t){return b(t,e[t])})}function x(){try{return window.localStorage.setItem("chapbook-test","a"),window.localStorage.removeItem("chapbook-test"),!0}catch(e){return!1}}function k(){f("Saving to local storage: "+JSON.stringify(w())),window.localStorage.setItem(d,JSON.stringify(w())),f("Save complete")}t.defaults={"config.state.autosave":!0},t.set=b,t.get=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(30),i=(r=o)&&r.__esModule?r:{default:r};t.default=(0,i.default)()},function(e,t,n){"use strict";n.r(t),n.d(t,"h",function(){return a}),n.d(t,"createElement",function(){return a}),n.d(t,"cloneElement",function(){return f}),n.d(t,"createRef",function(){return q}),n.d(t,"Component",function(){return D}),n.d(t,"render",function(){return R}),n.d(t,"rerender",function(){return g}),n.d(t,"options",function(){return o});var r=function(){},o={},i=[],s=[];function a(e,t){var n,a,l,u,c=s;for(u=arguments.length;u-- >2;)i.push(arguments[u]);for(t&&null!=t.children&&(i.length||i.push(t.children),delete t.children);i.length;)if((a=i.pop())&&void 0!==a.pop)for(u=a.length;u--;)i.push(a[u]);else"boolean"==typeof a&&(a=null),(l="function"!=typeof e)&&(null==a?a="":"number"==typeof a?a=String(a):"string"!=typeof a&&(l=!1)),l&&n?c[c.length-1]+=a:c===s?c=[a]:c.push(a),n=l;var f=new r;return f.nodeName=e,f.children=c,f.attributes=null==t?void 0:t,f.key=null==t?void 0:t.key,void 0!==o.vnode&&o.vnode(f),f}function l(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function f(e,t){return a(e.nodeName,l(l({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var d=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,p=[];function h(e){!e._dirty&&(e._dirty=!0)&&1==p.push(e)&&(o.debounceRendering||c)(g)}function g(){for(var e;e=p.pop();)e._dirty&&$(e)}function m(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function v(e){var t=l({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function y(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)u(n,null),u(r,e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"==typeof r[i]&&!1===d.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,w,s):e.removeEventListener(t,w,s),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var a=o&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function w(e){return this._listeners[e.type](o.event&&o.event(e)||e)}var _=[],x=0,k=!1,S=!1;function j(){for(var e;e=_.shift();)o.afterMount&&o.afterMount(e),e.componentDidMount&&e.componentDidMount()}function O(e,t,n,r,o,i){x++||(k=null!=o&&void 0!==o.ownerSVGElement,S=null!=e&&!("__preactattr_"in e));var s=C(e,t,n,r,i);return o&&s.parentNode!==o&&o.appendChild(s),--x||(S=!1,i||j()),s}function C(e,t,n,r,o){var i=e,s=k;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),M(e,!0))),i.__preactattr_=!0,i;var a,l,u=t.nodeName;if("function"==typeof u)return function(e,t,n,r){var o=e&&e._component,i=o,s=e,a=o&&e._componentConstructor===t.nodeName,l=a,u=v(t);for(;o&&!l&&(o=o._parentComponent);)l=o.constructor===t.nodeName;o&&l&&(!r||o._component)?(N(o,u,3,n,r),e=o.base):(i&&!a&&(T(i),e=s=null),o=L(t.nodeName,u,n),e&&!o.nextBase&&(o.nextBase=e,s=null),N(o,u,1,n,r),e=o.base,s&&e!==s&&(s._component=null,M(s,!1)));return e}(e,t,n,r);if(k="svg"===u||"foreignObject"!==u&&k,u=String(u),(!e||!m(e,u))&&(a=u,(l=k?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,i=l,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),M(e,!0)}var c=i.firstChild,f=i.__preactattr_,d=t.children;if(null==f){f=i.__preactattr_={};for(var p=i.attributes,h=p.length;h--;)f[p[h].name]=p[h].value}return!S&&d&&1===d.length&&"string"==typeof d[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=d[0]&&(c.nodeValue=d[0]):(d&&d.length||null!=c)&&function(e,t,n,r,o){var i,s,a,l,u,c=e.childNodes,f=[],d={},p=0,h=0,g=c.length,v=0,y=t?t.length:0;if(0!==g)for(var w=0;w<g;w++){var _=c[w],x=_.__preactattr_,k=y&&x?_._component?_._component.__key:x.key:null;null!=k?(p++,d[k]=_):(x||(void 0!==_.splitText?!o||_.nodeValue.trim():o))&&(f[v++]=_)}if(0!==y)for(var w=0;w<y;w++){l=t[w],u=null;var k=l.key;if(null!=k)p&&void 0!==d[k]&&(u=d[k],d[k]=void 0,p--);else if(h<v)for(i=h;i<v;i++)if(void 0!==f[i]&&(S=s=f[i],O=o,"string"==typeof(j=l)||"number"==typeof j?void 0!==S.splitText:"string"==typeof j.nodeName?!S._componentConstructor&&m(S,j.nodeName):O||S._componentConstructor===j.nodeName)){u=s,f[i]=void 0,i===v-1&&v--,i===h&&h++;break}u=C(u,l,n,r),a=c[w],u&&u!==e&&u!==a&&(null==a?e.appendChild(u):u===a.nextSibling?b(a):e.insertBefore(u,a))}var S,j,O;if(p)for(var w in d)void 0!==d[w]&&M(d[w],!1);for(;h<=v;)void 0!==(u=f[v--])&&M(u,!1)}(i,d,n,r,S||null!=f.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||y(e,r,n[r],n[r]=void 0,k);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||y(e,r,n[r],n[r]=t[r],k)}(i,t.attributes,f),k=s,i}function M(e,t){var n=e._component;n?T(n):(null!=e.__preactattr_&&u(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||b(e),A(e))}function A(e){for(e=e.lastChild;e;){var t=e.previousSibling;M(e,!0),e=t}}var E=[];function L(e,t,n){var r,o=E.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),D.call(r,t,n)):((r=new D(t,n)).constructor=e,r.render=P);o--;)if(E[o].constructor===e)return r.nextBase=E[o].nextBase,E.splice(o,1),r;return r}function P(e,t,n){return this.constructor(e,n)}function N(e,t,n,r,i){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===o.syncComponentUpdates&&e.base?h(e):$(e,1,i)),u(e.__ref,e))}function $(e,t,n,r){if(!e._disable){var i,s,a,u=e.props,c=e.state,f=e.context,d=e.prevProps||u,p=e.prevState||c,h=e.prevContext||f,g=e.base,m=e.nextBase,b=g||m,y=e._component,w=!1,k=h;if(e.constructor.getDerivedStateFromProps&&(c=l(l({},c),e.constructor.getDerivedStateFromProps(u,c)),e.state=c),g&&(e.props=d,e.state=p,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,c,f)?w=!0:e.componentWillUpdate&&e.componentWillUpdate(u,c,f),e.props=u,e.state=c,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!w){i=e.render(u,c,f),e.getChildContext&&(f=l(l({},f),e.getChildContext())),g&&e.getSnapshotBeforeUpdate&&(k=e.getSnapshotBeforeUpdate(d,p));var S,C,A=i&&i.nodeName;if("function"==typeof A){var E=v(i);(s=y)&&s.constructor===A&&E.key==s.__key?N(s,E,1,f,!1):(S=s,e._component=s=L(A,E,f),s.nextBase=s.nextBase||m,s._parentComponent=e,N(s,E,0,f,!1),$(s,1,n,!0)),C=s.base}else a=b,(S=y)&&(a=e._component=null),(b||1===t)&&(a&&(a._component=null),C=O(a,i,f,n||!g,b&&b.parentNode,!0));if(b&&C!==b&&s!==y){var P=b.parentNode;P&&C!==P&&(P.replaceChild(C,b),S||(b._component=null,M(b,!1)))}if(S&&T(S),e.base=C,C&&!r){for(var D=e,R=e;R=R._parentComponent;)(D=R).base=C;C._component=D,C._componentConstructor=D.constructor}}for(!g||n?_.push(e):w||(e.componentDidUpdate&&e.componentDidUpdate(d,p,k),o.afterUpdate&&o.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);x||r||j()}}function T(e){o.beforeUnmount&&o.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?T(n):t&&(null!=t.__preactattr_&&u(t.__preactattr_.ref,null),e.nextBase=t,b(t),E.push(e),A(t)),u(e.__ref,null)}function D(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function R(e,t,n){return O(n,e,{},!1,t,!1)}function q(){return{}}l(D.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=l(l({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),h(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),$(this,2)},render:function(){}});var z={h:a,createElement:a,cloneElement:f,createRef:q,Component:D,render:R,rerender:g,options:o};t.default=z},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warn=t.log=t.defaults=void 0,t.default=function(e){return{log:function(t){l(e,t)},warn:function(t){u(e,t)}}};var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},s=n(0);t.defaults={"config.logger.show.parse":!1,"config.logger.show.render":!1,"config.logger.show.sound":!1,"config.logger.show.state":!1,"config.logger.show.story":!1,"config.logger.show.style":!1};function a(e){return e+": "}function l(e,t){(0,s.get)("config.logger.show."+e)&&console.log(a(e)+t),i.default.emit("log",{source:e,message:t})}function u(e,t){console.warn(a(e)+t),i.default.emit("log-warning",{source:e,message:t})}t.log=l,t.warn=u,window.logger={log:l,warn:u}},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=document.createElement(e);return Object.keys(t).forEach(function(e){void 0!==t[e]&&r.setAttribute(e,t[e])}),n.forEach(function(e){"string"==typeof e?r.appendChild(document.createTextNode(e)):r.appendChild(e)}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.domify=r,t.default=function(){return r.apply(void 0,arguments).outerHTML}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFromData=function(e){["name","creator","ifid","options"].forEach(function(t){return u[t]=e.getAttribute(t)}),u.startNode=parseInt(e.getAttribute("startnode")),u.creatorVersion=e.getAttribute("creator-version");var t=function(e){return e.map(function(e){return e.textContent})};u.customScripts=t((0,s.selectAll)(e,'[type="text/twine-javascript"]')),u.customStyles=t((0,s.selectAll)(e,'[type="text/twine-css"]')),c=(0,s.selectAll)(e,"tw-passagedata").map(function(e){var t={id:parseInt(e.getAttribute("pid")),name:e.getAttribute("name"),source:e.textContent},n=e.getAttribute("tags");return n&&(t.tags=n.split(" ")),t})},t.init=function(){(0,a.setDefault)("trail",[f().name]),(0,a.setDefault)("config.testing","string"==typeof u.options&&-1!==u.options.indexOf("debug")||!1),document.title=u.name},t.runCustomScripts=function(){l.log("Running custom scripts ("+u.customScripts.length+")"),u.customScripts.forEach(function(e){new Function(e).apply(window)})},t.addCustomStyles=function(){l.log("Adding custom styles ("+u.customStyles.length+")"),u.customStyles.forEach(function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)})},t.name=function(){return u.name},t.startPassage=f,t.passageNamed=function(e){return c.find(function(t){return t.name===e})},t.passageWithId=function(e){return c.find(function(t){return t.id===e})};var r,o=n(4),i=(r=o)&&r.__esModule?r:{default:r},s=n(7),a=n(0);var l=(0,i.default)("story"),u={customScripts:[],customStyles:[]},c=[];function f(){return c.find(function(e){return e.id===u.startNode})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t){return e.querySelector(t)},t.selectAll=function(e,t){return Array.from(e.querySelectorAll(t))}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n(46);t.default=class extends r.Component{constructor(e){super(e),this.state={open:void 0===this.props.initiallyOpen||this.props.initiallyOpen}}toggle(){this.setState({open:!this.state.open})}render(){return(0,r.h)("div",{class:"panel"+(this.state.open?" open":"")},(0,r.h)("h2",null,(0,r.h)("button",{onClick:()=>this.toggle()},this.props.title)),this.state.open&&(0,r.h)("div",{class:"content"},this.props.children))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.render=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,s.default)((0,i.default)(e),(0,a.get)("config.template.inserts")||[],(0,a.get)("config.template.modifiers")||[],t)};var r=l(n(60)),o=l(n(84)),i=l(n(94)),s=l(n(96)),a=n(0);function l(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.template.inserts":r.default,"config.template.modifiers":o.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.init=function(){(0,a.init)(),(0,l.init)(),h=document.querySelector("#page article"),m=document.querySelector("#page #spinner"),g={},["header","footer"].forEach(function(e){g[e]={container:document.querySelector("#page "+e)},["left","center","right"].forEach(function(t){g[e][t]=document.querySelector("#page "+e+" ."+t)})}),o.default.on("state-change",function(e){var t=e.name;return y("trail"===t)}),["change","click"].forEach(function(e){document.body.addEventListener(e,function(e){for(var t=e.target;t;)t.dataset&&Object.keys(t.dataset).some(function(e){return/^cb[A-Z]/.test(e)})&&o.default.emit("dom-"+e.type,t),t=t.parentNode})})},t.changeBody=function(e){(0,d.selectAll)(h,"input").forEach(function(e){e.setAttribute("value",e.value)}),(0,d.selectAll)(h,"select").forEach(function(e){for(var t=0;t<e.options.length;t++)t===e.options.selectedIndex?e.options[t].setAttribute("selected",""):e.options[t].removeAttribute("selected")});var t={x:window.scrollX,y:window.scrollY},n=h.innerHTML,r=document.createElement("div");for(;h.firstChild;)r.insertBefore(h.firstChild,r.firstChild);h.innerHTML=n,e(r),window.scrollX=t.x,window.scrollY=t.y,b(h,r.innerHTML,(0,s.get)("config.body.transition.name"),(0,s.get)("config.body.transition.duration"))};var r=p(n(20)),o=p(n(1)),i=n(64),s=n(0),a=n(66),l=n(69),u=n(6),c=n(11),f=p(n(71));n(72);var d=n(7);function p(e){return e&&e.__esModule?e:{default:e}}var h=void 0,g=void 0,m=void 0,v={crossfade:i.crossfade,fadeInOut:i.fadeInOut,none:i.none};t.defaults={"config.body.transition.name":"crossfade","config.body.transition.duration":"500ms","config.header.left":"","config.header.center":"","config.header.right":"","config.header.transition.name":"none","config.header.transition.duration":"500ms","config.footer.left":"_{story.name}_","config.footer.center":"","config.footer.right":"{restart link}","config.footer.transition.name":"none","config.footer.transition.duration":"500ms"};function b(e,t,n,r){v[n]?v[n](e,t,r):v.none(e,t)}var y=(0,r.default)(function(e){if(e.some(function(e){return e[0]})){var t=(0,s.get)("trail"),n=(0,u.passageNamed)(t[t.length-1]);if(!n)throw new Error('There is no passage named "'+t[t.length-1]+'".');b(h,(0,c.render)(n.source),(0,s.get)("config.body.transition.name"),(0,s.get)("config.body.transition.duration")),(0,f.default)(h,m)}["header","footer"].forEach(function(e){g[e].container.classList.remove("has-content"),["left","center","right"].forEach(function(t){var n=(0,c.render)((0,s.get)("config."+e+"."+t));""!==n&&g[e].container.classList.add("has-content"),b(g[e][t],n,(0,s.get)("config."+e+".transition.name"),(0,s.get)("config."+e+".transition.duration"))})})})},function(e,t,n){"use strict";e.exports=function(e,t,n){n=Object.assign({},r,n||{});let o=0,s=function(e){let t={ms:.001,s:1,m:60,h:3600};return t.d=e.hoursPerDay*t.h,t.w=e.daysPerWeek*t.d,t.mth=e.daysPerYear/e.monthsPerYear*t.d,t.y=e.daysPerYear*t.d,t}(n),a=e.toLowerCase().replace(/[^.\w+-]+/g,"").match(/[-+]?[0-9.]+[a-z]+/g);null!==a&&a.forEach(e=>{let t=e.match(/[0-9.]+/g)[0],n=e.match(/[a-z]+/g)[0];o+=function(e,t,n){return e*n[i(t)]}(t,n,s)});if(t)return function(e,t,n){return e/n[i(t)]}(o,t,s);return o};const r={hoursPerDay:24,daysPerWeek:7,weeksPerMonth:4,monthsPerYear:12,daysPerYear:365.25},o={ms:["ms","milli","millisecond","milliseconds"],s:["s","sec","secs","second","seconds"],m:["m","min","mins","minute","minutes"],h:["h","hr","hrs","hour","hours"],d:["d","day","days"],w:["w","week","weeks"],mth:["mon","mth","mths","month","months"],y:["y","yr","yrs","year","years"]};function i(e){for(let t of Object.keys(o))if(o[t].indexOf(e)>-1)return t;throw new Error(`The unit [${e}] is not supported by timestring`)}},function(e,t){function n(e,t){if(!e)throw new Error(t||"AssertionError")}n.notEqual=function(e,t,r){n(e!=t,r)},n.notOk=function(e,t){n(!e,t)},n.equal=function(e,t,r){n(e==t,r)},n.ok=n,e.exports=n},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderLink=s,t.default=function(e){return e.replace(/\[\[(.*?)\]\]/g,function(e,t){var n=t,r=t.indexOf("|");if(-1!==r)n=t.substr(0,r),t=t.substr(r+1);else{var o=t.indexOf("->");if(-1!==o)n=t.substr(0,o),t=t.substr(o+2);else{var i=t.indexOf("<-");-1!==i&&(n=t.substr(i+2),t=t.substr(0,i))}}return s(t,n||t)})};var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};function s(e,t){return/^\w+:\/\/\/?\w/i.test(e)?(0,i.default)("a",{href:e},[t||e]):(0,i.default)("a",{href:"javascript:void(0)","data-cb-go":e},[t||e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.history=t.defaults=void 0,t.rewindTo=function(e){if(!a[e])throw new Error("There is no history at index "+e+" to rewind to.");l=!1,(0,s.restoreFromObject)(a[e].state),a.length=e+1,l=!0,i.default.emit("backstage-recorder-update")},t.init=function(){i.default.on("state-change",c),i.default.on("state-reset",u)};var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},s=n(0);t.defaults={"config.backstage.trail.maxLength":100};var a=t.history=[],l=!0;function u(){l&&(t.history=a=[],i.default.emit("backstage-recorder-update"))}function c(e){var t=e.name,n=e.value;l&&(a.length===(0,s.get)("config.backstage.trail.maxLength")&&a.shift(),a.push({change:{name:t,value:n},state:(0,s.saveToObject)()}),i.default.emit("backstage-recorder-update"))}},function(e,t,n){(function(t){var n=1/0,r="[object Symbol]",o=/[&<>"'`]/g,i=RegExp(o.source),s="object"==typeof t&&t&&t.Object===Object&&t,a="object"==typeof self&&self&&self.Object===Object&&self,l=s||a||Function("return this")();var u,c=(u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==u?void 0:u[e]}),f=Object.prototype.toString,d=l.Symbol,p=d?d.prototype:void 0,h=p?p.toString:void 0;function g(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":g(t))&&i.test(e)?e.replace(o,c):e}}).call(this,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=!1;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n||(n=!0,Promise.resolve().then(function(){try{e(t)}catch(e){window.setTimeout(function(){throw e},0)}t=[],n=!1})),t.push(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="<span"+Object.keys(t).reduce(function(e,n){return e+" "+n+'="'+t[n]+'"'},"")+">",r=n+e.replace(/[\r\n]{2,}/g,"</span>$&"+n)+"</span>";return r=r.replace(/(<span.*?>)\s*(#+)/gi,"$2 $1")}},function(e,t,n){(function(t){!function(t){"use strict";var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:m,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:m,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:m,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function r(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||_.defaults,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.options.tables?this.rules=n.tables:this.rules=n.gfm)}n._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,n.def=d(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d{1,9}\.)/,n.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,n.item=d(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=d(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=d(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=d(n.paragraph).replace("hr",n.hr).replace("heading",n.heading).replace("lheading",n.lheading).replace("tag",n._tag).getRegex(),n.blockquote=d(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=v({},n),n.gfm=v({},n.normal,{fences:/^ {0,3}(`{3,}|~{3,})([^`\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),n.gfm.paragraph=d(n.paragraph).replace("(?!","(?!"+n.gfm.fences.source.replace("\\1","\\2")+"|"+n.list.source.replace("\\1","\\3")+"|").getRegex(),n.tables=v({},n.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),n.pedantic=v({},n.normal,{html:d("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),r.rules=n,r.lex=function(e,t){return new r(t).lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,t){var r,o,i,s,a,l,u,c,f,d,p,h,g,m,v,w;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:y(i,"\n")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2]?i[2].trim():i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if((i=this.rules.nptable.exec(e))&&(l={type:"table",header:b(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),p=0;p<l.align.length;p++)/^ *-+: *$/.test(l.align[p])?l.align[p]="right":/^ *:-+: *$/.test(l.align[p])?l.align[p]="center":/^ *:-+ *$/.test(l.align[p])?l.align[p]="left":l.align[p]=null;for(p=0;p<l.cells.length;p++)l.cells[p]=b(l.cells[p],l.header.length);this.tokens.push(l)}else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),u={type:"list_start",ordered:m=(s=i[2]).length>1,start:m?+s:"",loose:!1},this.tokens.push(u),c=[],r=!1,g=(i=i[0].match(this.rules.item)).length,p=0;p<g;p++)d=(l=i[p]).length,~(l=l.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(d-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+d+"}","gm"),"")),p!==g-1&&(a=n.bullet.exec(i[p+1])[0],(s.length>1?1===a.length:a.length>1||this.options.smartLists&&a!==s)&&(e=i.slice(p+1).join("\n")+e,p=g-1)),o=r||/\n\n(?!\s*$)/.test(l),p!==g-1&&(r="\n"===l.charAt(l.length-1),o||(o=r)),o&&(u.loose=!0),w=void 0,(v=/^\[[ xX]\] /.test(l))&&(w=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),f={type:"list_item_start",task:v,checked:w,loose:o},c.push(f),this.tokens.push(f),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(u.loose)for(g=c.length,p=0;p<g;p++)c[p].loose=!0;this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),h=i[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[h]||(this.tokens.links[h]={href:i[2],title:i[3]});else if((i=this.rules.table.exec(e))&&(l={type:"table",header:b(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),p=0;p<l.align.length;p++)/^ *-+: *$/.test(l.align[p])?l.align[p]="right":/^ *:-+: *$/.test(l.align[p])?l.align[p]="center":/^ *:-+ *$/.test(l.align[p])?l.align[p]="left":l.align[p]=null;for(p=0;p<l.cells.length;p++)l.cells[p]=b(l.cells[p].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var o={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:m,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:m,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function i(e,t){if(this.options=t||_.defaults,this.links=e,this.rules=o.normal,this.renderer=this.options.renderer||new s,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=o.pedantic:this.options.gfm&&(this.options.breaks?this.rules=o.breaks:this.rules=o.gfm)}function s(e){this.options=e||_.defaults}function a(){}function l(e){this.tokens=[],this.token=null,this.options=e||_.defaults,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new u}function u(){this.seen={}}function c(e,t){if(t){if(c.escapeTest.test(e))return e.replace(c.escapeReplace,function(e){return c.replacements[e]})}else if(c.escapeTestNoEncode.test(e))return e.replace(c.escapeReplaceNoEncode,function(e){return c.replacements[e]});return e}function f(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function d(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function p(e,t,n){if(e){try{var r=decodeURIComponent(f(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!g.test(n)&&(n=function(e,t){h[" "+e]||(/^[^:]+:\/*[^\/]*$/.test(e)?h[" "+e]=e+"/":h[" "+e]=y(e,"/",!0));return e=h[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}o._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",o.em=d(o.em).replace(/punctuation/g,o._punctuation).getRegex(),o._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,o._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,o._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,o.autolink=d(o.autolink).replace("scheme",o._scheme).replace("email",o._email).getRegex(),o._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,o.tag=d(o.tag).replace("comment",n._comment).replace("attribute",o._attribute).getRegex(),o._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|`(?!`)|[^\[\]\\`])*?/,o._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*)/,o._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,o.link=d(o.link).replace("label",o._label).replace("href",o._href).replace("title",o._title).getRegex(),o.reflink=d(o.reflink).replace("label",o._label).getRegex(),o.normal=v({},o),o.pedantic=v({},o.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",o._label).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",o._label).getRegex()}),o.gfm=v({},o.normal,{escape:d(o.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),o.gfm.url=d(o.gfm.url,"i").replace("email",o.gfm._extended_email).getRegex(),o.breaks=v({},o.gfm,{br:d(o.br).replace("{2,}","*").getRegex(),text:d(o.gfm.text).replace(/\{2,\}/g,"*").getRegex()}),i.rules=o,i.output=function(e,t,n){return new i(t,n).output(e)},i.prototype.output=function(e){for(var t,n,r,o,s,a,l="";e;)if(s=this.rules.escape.exec(e))e=e.substring(s[0].length),l+=c(s[1]);else if(s=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.inRawBlock=!1),e=e.substring(s[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):c(s[0]):s[0];else if(s=this.rules.link.exec(e)){var u=w(s[2],"()");if(u>-1){var f=s[0].length-(s[2].length-u)-(s[3]||"").length;s[2]=s[2].substring(0,u),s[0]=s[0].substring(0,f).trim(),s[3]=""}e=e.substring(s[0].length),this.inLink=!0,r=s[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=t[1],o=t[3]):o="":o=s[3]?s[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(s,{href:i.escapes(r),title:i.escapes(o)}),this.inLink=!1}else if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){if(e=e.substring(s[0].length),t=(s[2]||s[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){l+=s[0].charAt(0),e=s[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(s,t),this.inLink=!1}else if(s=this.rules.strong.exec(e))e=e.substring(s[0].length),l+=this.renderer.strong(this.output(s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.em.exec(e))e=e.substring(s[0].length),l+=this.renderer.em(this.output(s[6]||s[5]||s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.code.exec(e))e=e.substring(s[0].length),l+=this.renderer.codespan(c(s[2].trim(),!0));else if(s=this.rules.br.exec(e))e=e.substring(s[0].length),l+=this.renderer.br();else if(s=this.rules.del.exec(e))e=e.substring(s[0].length),l+=this.renderer.del(this.output(s[1]));else if(s=this.rules.autolink.exec(e))e=e.substring(s[0].length),r="@"===s[2]?"mailto:"+(n=c(this.mangle(s[1]))):n=c(s[1]),l+=this.renderer.link(r,null,n);else if(this.inLink||!(s=this.rules.url.exec(e))){if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.inRawBlock?l+=this.renderer.text(s[0]):l+=this.renderer.text(c(this.smartypants(s[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===s[2])r="mailto:"+(n=c(s[0]));else{do{a=s[0],s[0]=this.rules._backpedal.exec(s[0])[0]}while(a!==s[0]);n=c(s[0]),r="www."===s[1]?"http://"+n:n}e=e.substring(s[0].length),l+=this.renderer.link(r,null,n)}return l},i.escapes=function(e){return e?e.replace(i.rules._escapes,"$1"):e},i.prototype.outputLink=function(e,t){var n=t.href,r=t.title?c(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,c(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,o=0;o<r;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},s.prototype.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(e,r);null!=o&&o!==e&&(n=!0,e=o)}return r?'<pre><code class="'+this.options.langPrefix+c(r,!0)+'">'+(n?e:c(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:c(e,!0))+"</code></pre>"},s.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},s.prototype.html=function(e){return e},s.prototype.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},s.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},s.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},s.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},s.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},s.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},s.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},s.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},s.prototype.strong=function(e){return"<strong>"+e+"</strong>"},s.prototype.em=function(e){return"<em>"+e+"</em>"},s.prototype.codespan=function(e){return"<code>"+e+"</code>"},s.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.prototype.del=function(e){return"<del>"+e+"</del>"},s.prototype.link=function(e,t,n){if(null===(e=p(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+c(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},s.prototype.image=function(e,t,n){if(null===(e=p(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},s.prototype.text=function(e){return e},a.prototype.strong=a.prototype.em=a.prototype.codespan=a.prototype.del=a.prototype.text=function(e){return e},a.prototype.link=a.prototype.image=function(e,t,n){return""+n},a.prototype.br=function(){return""},l.parse=function(e,t){return new l(t).parse(e)},l.prototype.parse=function(e){this.inline=new i(e.links,this.options),this.inlineText=new i(e.links,v({},this.options,{renderer:new a})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},l.prototype.next=function(){return this.token=this.tokens.pop()},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,f(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,o="",i="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(n)}return this.renderer.table(o,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var s=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,s,a);case"list_item_start":i="";var l=this.token.loose,u=this.token.checked,c=this.token.task;for(this.token.task&&(i+=this.renderer.checkbox(u));"list_item_end"!==this.next().type;)i+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(i,c,u);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var d='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(d);console.log(d)}},u.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var n=t;do{this.seen[n]++,t=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},c.escapeTest=/[&<>"']/,c.escapeReplace=/[&<>"']/g,c.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,c.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var h={},g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function m(){}function v(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function b(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,o=t;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function y(e,t,n){if(0===e.length)return"";for(var r=0;r<e.length;){var o=e.charAt(e.length-r-1);if(o!==t||n){if(o===t||!n)break;r++}else r++}return e.substr(0,e.length-r)}function w(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&--n<0)return r;return-1}function _(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null);var o,i,s=(t=v({},_.defaults,t||{})).highlight,a=0;try{o=r.lex(e,t)}catch(e){return n(e)}i=o.length;var u=function(e){if(e)return t.highlight=s,n(e);var r;try{r=l.parse(o,t)}catch(t){e=t}return t.highlight=s,e?n(e):n(null,r)};if(!s||s.length<3)return u();if(delete t.highlight,!i)return u();for(;a<o.length;a++)!function(e){"code"!==e.type?--i||u():s(e.text,e.lang,function(t,n){return t?u(t):null==n||n===e.text?--i||u():(e.text=n,e.escaped=!0,void(--i||u()))})}(o[a])}else try{return t&&(t=v({},_.defaults,t)),l.parse(r.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||_.defaults).silent)return"<p>An error occurred:</p><pre>"+c(e.message+"",!0)+"</pre>";throw e}}m.exec=m,_.options=_.setOptions=function(e){return v(_.defaults,e),_},_.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new s,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},_.defaults=_.getDefaults(),_.Parser=l,_.parser=l.parse,_.Renderer=s,_.TextRenderer=a,_.Lexer=r,_.lexer=r.lex,_.InlineLexer=i,_.inlineLexer=i.output,_.Slugger=u,_.parse=_,e.exports=_}(this||"undefined"!=typeof window&&window)}).call(this,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.init=function(){(p=document.createElement("div")).setAttribute("hidden",!0),p.dataset.cbSounds="",document.body.appendChild(p),i.default.on("state-change",function(e){var t=e.name,n=e.value,o=(0,a.sameObject)(t,"sound.ambient"),i=(0,a.sameObject)(t,"sound.effect");if(o){var s=(0,a.get)("sound.ambient");s&&Object.keys(s).forEach(function(e){s[e].url&&h(e,s[e].url,!1),s[e].volume&&v(e,s[e].volume),void 0!==s[e].muted&&b(e,s[e].muted),s[e].playing&&g(e,!0).catch(function(t){return f('Could not resume playing ambient sound "'+e+'" ('+t.message+")")})})}if(i){var l=(0,a.get)("sound.effect");l&&Object.keys(l).forEach(function(e){l[e].url&&h(e,l[e].url,!0),l[e].volume&&v(e,l[e].volume),void 0!==l[e].muted&&b(e,l[e].muted),l[e].playing&&g(e,!1).then(function(){return(0,a.set)("sound.effect."+e+".playing",!1)}).catch(function(t){return f('Could not resume playing sound effect "'+e+'" ('+t.message)})})}if(!o&&!i){var u=/^sound\.(ambient|effect)\.(.+?)\.(.+)$/i.exec(t);if(u)switch(u[3].toLowerCase()){case"playing":n?"ambient"===u[1]?g(u[2],!0,(0,r.default)((0,a.get)(u[2]+".transitionDuration")||(0,a.get)("sound.transitionDuration")||"0s","ms")):g(u[2],!1).then(function(){return(0,a.set)(t,!1)}):"ambient"===u[1]?m(u[2],(0,r.default)((0,a.get)(u[2]+".transitionDuration")||(0,a.get)("sound.transitionDuration")||"0s","ms")):m(u[2]);break;case"url":h(u[2],n,"effect"===u[1]);break;case"volume":v(u[2],n)}}})};var r=l(n(13)),o=l(n(4)),i=l(n(1)),s=l(n(99)),a=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,o.default)("sound"),c=u.log,f=u.warn,d={},p=void 0;t.defaults={"sound.mute":!1,"sound.volume":1,"sound.transitionDuration":"1s"};function h(e,t,n){d[e]?(d[e].setAttribute("src",t),n?d[e].setAttribute("preload","auto"):d[e].removeAttribute("preload"),c('Updated <audio> element in sound bank for "'+e+'" to use '+t)):(d[e]=document.createElement("audio"),d[e].setAttribute("src",t),n&&d[e].setAttribute("preload","auto"),p.appendChild(d[e]),c('Added new <audio> element to sound bank for "'+e+'" for '+t))}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!d[e])throw new Error("There is no sound loaded named "+e+".");return c('Playing sound "'+e+'" (looping: '+t+")"),n>0&&(d[e].volume=0,(0,s.default)(d[e],1,n)),t?(d[e].loop=!0,d[e].play()):(d[e].loop=!1,new Promise(function(t,n){try{d[e].addEventListener("ended",function n(){d[e].removeEventListener("ended",n),t()}),d[e].play().catch(function(e){return n(e)})}catch(e){n(e)}}))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!d[e])throw new Error("There is no sound loaded named "+e+".");if(t<=0)d[e].pause(),d[e].currentTime=0;else{var n=d[e].volume;(0,s.default)(d[e],0,t).then(function(){d[e].pause(),d[e].volume=n,d[e].currentTime=0})}}function v(e,t){if(!d[e])throw new Error("There is no sound loaded named "+e+".");if(t<0||t>1)throw new Error("A sound volume must be between 0 and 1.");d[e].volume=t}function b(e,t){if(!d[e])throw new Error("There is no sound loaded named "+e+".");d[e].muted=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.default=function(e){e("random.coinFlip",function(){var e=l();return(0,o.default)(u),e>.5}),e("random.fraction",function(){var e=l();return(0,o.default)(u),e}),[4,5,6,8,10,12,20,25,50,100,1e3].forEach(function(t){e("random.d"+t,function(){var e=1+Math.round(l()*(t-1));return(0,o.default)(u),e})})};var r=a(n(106)),o=a(n(20)),i=a(n(1)),s=n(0);function a(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.random.seed":function(){return new Date},"config.random.privateState":null};var l=(0,r.default)(new Date,{state:!0});function u(){(0,s.set)("config.random.privateState",l.state())}i.default.on("state-change",function(e){var t=e.name,n=e.value;"config.random.seed"===t&&(l=(0,r.default)(n,{state:!0}))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.style=d,t.init=function(){(0,s.init)(),f.dataset.cbAuthorStyles="",document.head.appendChild(f),o.default.on("state-change",function(e){var t=e.name,n=e.value;if((0,i.sameObject)(t,"config.style.backdrop")&&(u("Setting backdrop color"),d("#backdrop",{"background-color":(0,a.parseColor)((0,i.get)("config.style.backdrop")).color})),(0,i.sameObject)(t,"config.style.page.fork.divider.color")&&(u("Setting fork divider color"),d("#page .fork p a + a",{"border-top-color":(0,a.parseColor)((0,i.get)("config.style.page.fork.divider.color")).color})),(0,i.sameObject)(t,"config.style.page.fork.divider.size")&&(u("Setting fork divider size"),d("#page .fork p a + a",{"border-top-width":(0,i.get)("config.style.page.fork.divider.size")+"px"})),(0,i.sameObject)(t,"config.style.page.fork.divider.style")&&(u("Setting fork divider style"),d("#page .fork p a + a",{"border-top-style":(0,i.get)("config.style.page.fork.divider.style")})),(0,i.sameObject)(t,"config.style.page.style")||(0,i.sameObject)(t,"config.style.page.style.borderColor"))switch(u("Setting page style"),(0,i.get)("config.style.page.style")){case"none":d("#page",{border:"none","box-shadow":"none"});break;case"shadow":d("#page",{border:"none","box-shadow":"0 4px 8px hsla(0, 0%, 0%, 0.25)"});break;case"thick-line":d("#page",{border:"4px solid "+(0,a.parseColor)((0,i.get)("config.style.page.style.borderColor")).color,"box-shadow":"none"});break;case"thin-line":d("#page",{border:"1px solid "+(0,a.parseColor)((0,i.get)("config.style.page.style.borderColor")).color,"box-shadow":"none"})}if((0,i.sameObject)(t,"config.style.page.verticalAlign"))switch(u("Setting page vertical alignment"),(0,i.get)("config.style.page.verticalAlign")){case"top":d("#page article",{"align-items":"flex-start"});break;case"center":d("#page article",{"align-items":"center"});break;case"bottom":d("#page article",{"align-items":"flex-end"})}if(/^config\.style\.page\..*\.((line)?color|font)$/i.test(t)&&p(t,n),(0,i.sameObject)(t,"config.style.page")){["config.style.page","config.style.page.header","config.style.page.footer"].forEach(function(e){var t=(0,i.get)(e);t&&function(e,t){["color","font","lineColor"].forEach(function(n){t[n]&&p(e+"."+n,t[n]),t.link&&(t.link[n]&&p(e+".link."+n,t.link[n]),t.link.active&&t.link.active[n]&&p(e+".link.active."+n,t.link.active[n]))})}(e,t)})}})};var r=l(n(4)),o=l(n(1)),i=n(0),s=n(117),a=n(118);function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.default)("style").log,c=(t.defaults={"config.style.backdrop":"gray-0","config.style.page.style":"shadow","config.style.page.style.borderColor":"gray-2","config.style.page.font":"Iowan Old Style/Constantia/Georgia/serif 18","config.style.page.color":"gray-9 on white","config.style.page.fork.divider.color":"gray-3","config.style.page.fork.divider.style":"dashed","config.style.page.fork.divider.size":1,"config.style.page.link.color":"gray-9","config.style.page.link.lineColor":"red-8","config.style.page.link.font":"underline","config.style.page.link.active.color":"red-8 on red-0","config.style.page.verticalAlign":"center","config.style.page.header.font":"16","config.style.page.header.link.font":"small caps","config.style.page.footer.font":"16","config.style.page.footer.link.font":"small caps"},{}),f=document.createElement("style");function d(e,t){c[e]=c[e]||{},Object.assign(c[e],t),function(){f.innerHTML=Object.keys(c).reduce(function(e,t){return e+(n=t,r=c[t],n+"{"+Object.keys(r).sort().reduce(function(e,t){return r[t]?e+t+":"+r[t].toString()+";":e},"")+"}");var n,r},"")}()}function p(e,t){var n="#page",r=e.replace(/^config\.style\.page\./i,"").split(".");switch("header"===r[0].toLowerCase()?(n+=" header",r.shift()):"footer"===r[0].toLowerCase()&&(n+=" footer",r.shift()),"link"===r[0].toLowerCase()&&(n+=" a",r.shift()),"active"===r[0].toLowerCase()&&(n=n+":hover, "+n+":active",r.shift()),r[0].toLowerCase()){case"color":u("Setting color for "+n),d(n,(0,a.parseColor)(t));break;case"linecolor":u("Setting line color for "+n);var o=(0,a.parseColor)(t).color;d(n,{"text-decoration-color":o,"-webkit-text-decoration-color":o});break;case"font":u("Setting font for "+n),d(n,(0,a.parseFont)(t))}}},function(e,t){var n=/-?\d+(\.\d+)?%?/g;e.exports=function(e){return e.match(n)}},function(e,t){e.exports=function(e,t,n){return Math.min(Math.max(e,t),n)}},function(e,t,n){"use strict";var r=n(29),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(44)),i=p(n(59)),s=n(0),a=n(23),l=p(n(100)),u=p(n(116)),c=n(12),f=n(6),d=n(25);function p(e){return e&&e.__esModule?e:{default:e}}n(126),(0,f.loadFromData)(document.querySelector("tw-storydata")),(0,i.default)(),(0,s.init)(),Object.assign(window,{go:r.go,restart:r.restart}),(0,d.init)(),(0,u.default)(),(0,l.default)(),(0,c.init)(),(0,a.init)(),(0,f.init)(),o&&(0,s.get)("config.testing")&&o.init(),!(0,s.get)("config.testing")&&(0,s.canRestoreFromStorage)()&&(0,s.restoreFromStorage)(),(0,f.addCustomStyles)(),(0,f.runCustomScripts)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go=f,t.restart=d;var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},s=n(0),a=n(4),l=n(6),u=n(43);function c(e){(0,a.log)("actions",e)}function f(e){c('Going to passage "'+e+'"');var t=(0,l.passageNamed)(e);if(!t)throw new Error('There is no passage with the name "'+e+'"');(0,u.transferToState)(),(0,s.set)("trail",(0,s.get)("trail").concat(t.name))}function d(){c("Restarting"),(0,s.reset)(),window.location.reload()}i.default.on("dom-click",function(e){e.dataset.cbGo&&(0,u.validate)().then(function(){return f(e.dataset.cbGo)})}),i.default.on("dom-click",function(e){e.dataset.cbRestart&&d()})},function(e,t,n){var r=n(31),o=n(32),i=n(14);function s(e){if(!(this instanceof s))return new s(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}e.exports=s,s.prototype.emit=function(e){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.emit: eventName should be type string or symbol");for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var s=o(this._name+"('"+e.toString()+"')"),a=this._listeners[e];return a&&a.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,s.uuid),s(),this},s.prototype.on=s.prototype.addListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.on: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.on: listener should be type function"),"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},s.prototype.prependListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},s.prototype.once=function(e,t){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.once: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.once: listener should be type function");var n=this;return this.on(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},s.prototype.prependOnceListener=function(e,t){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependOnceListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var n=this;return this.prependListener(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},s.prototype.removeListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.removeListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.removeListener: listener should be type function"),"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(r(e,n,1),!0):void 0}}},s.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},s.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,o=0;o<r;o++)n.push(t[o]);return n},s.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t].concat(n,r):[t].concat(n));for(var o=e.length,i=0;i<o;i++){var s=e[i];s.apply(s,n)}}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o=e.length;if(!(t>=o||0===n)){var i=o-(n=t+n>o?o-t:n);for(r=t;r<i;++r)e[r]=e[r+n];e.length=i}}},function(e,t,n){var r,o=n(33)(),i=n(14);s.disabled=!0;try{r=window.performance,s.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!r.mark}catch(e){}function s(e){if(i.equal(typeof e,"string","nanotiming: name should be type string"),s.disabled)return a;var t=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function l(i){var s="end-"+t+"-"+e;r.mark(s),o.push(function(){var o=null;try{var a=e+" ["+t+"]";r.measure(a,n,s),r.clearMarks(n),r.clearMarks(s)}catch(e){o=e}i&&i(o,e)})}return r.mark(n),l.uuid=t,l}function a(e){e&&o.push(function(){e(new Error("nanotiming: performance API unavailable"))})}e.exports=s},function(e,t,n){var r=n(14),o="undefined"!=typeof window;function i(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}i.prototype.push=function(e){r.equal(typeof e,"function","nanoscheduler.push: cb should be type function"),this.queue.push(e),this.schedule()},i.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},i.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},e.exports=function(){var e;return o?(window._nanoScheduler||(window._nanoScheduler=new i(!0)),e=window._nanoScheduler):e=new i,e}},function(e,t,n){
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
const r=n(15);function o(e,t,n){return"function"==typeof n.join?n.join(e):e[0]+t+e[1]}function i(e,t,n){return"function"!=typeof n.isValid||n.isValid(e,t)}function s(e){return r(e)||Array.isArray(e)||"function"==typeof e}e.exports=function(e,t,n){if(r(n)||(n={default:n}),!s(e))return void 0!==n.default?n.default:e;"number"==typeof t&&(t=String(t));const a=Array.isArray(t),l="string"==typeof t,u=n.separator||".",c=n.joinChar||("string"==typeof u?u:".");if(!l&&!a)return e;if(l&&t in e)return i(t,e,n)?e[t]:n.default;let f=a?t:function(e,t,n){if("function"==typeof n.split)return n.split(e);return e.split(t)}(t,u,n),d=f.length,p=0;do{let t=f[p];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=o([t.slice(0,-1),f[++p]||""],c,n);if(t in e){if(!i(t,e,n))return n.default;e=e[t]}else{let r=!1,s=p+1;for(;s<d;)if(r=(t=o([t,f[s++]],c,n))in e){if(!i(t,e,n))return n.default;e=e[t],p=s-1;break}if(!r)return n.default}}while(++p<d&&s(e));return p===d?e:n.default}},function(e,t,n){"use strict";
/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */const r=n(36);function o(e,t,n,r){if(!a(e))return e;let l=r||{};const u=Array.isArray(t);if(!u&&"string"!=typeof t)return e;let c=l.merge;c&&"function"!=typeof c&&(c=Object.assign);const f=(u?t:function(e,t){const n=function(e,t){let n=e;if(void 0===t)return n+"";const r=Object.keys(t);for(let e=0;e<r.length;e++){const o=r[e];n+=";"+o+"="+String(t[o])}return n}(e,t);if(o.memo[n])return o.memo[n];const r=t&&t.separator?t.separator:".";let i=[],s=[];i=t&&"function"==typeof t.split?t.split(e):e.split(r);for(let e=0;e<i.length;e++){let t=i[e];for(;t&&"\\"===t.slice(-1)&&i[e+1];)t=t.slice(0,-1)+r+i[++e];s.push(t)}return o.memo[n]=s,s}(t,l)).filter(s),d=f.length,p=e;if(!r&&1===f.length)return i(e,f[0],n,c),e;for(let t=0;t<d;t++){let r=f[t];if(a(e[r])||(e[r]={}),t===d-1){i(e,r,n,c);break}e=e[r]}return p}function i(e,t,n,o){o&&r(e[t])&&r(n)?e[t]=o({},e[t],n):e[t]=n}function s(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}function a(e){return null!==e&&("object"==typeof e||"function"==typeof e)}o.memo={},e.exports=o},function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(15);function o(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==o(e)&&("function"==typeof(t=e.constructor)&&(!1!==o(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},function(e,t,n){"use strict";
/*!
 * unset-value <https://github.com/jonschlinkert/unset-value>
 *
 * Copyright (c) 2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(15),o=n(38);e.exports=function(e,t){if(!r(e))throw new TypeError("expected an object.");if(e.hasOwnProperty(t))return delete e[t],!0;if(o(e,t)){for(var n=t.split("."),i=n.pop();n.length&&"\\"===n[n.length-1].slice(-1);)i=n.pop().slice(0,-1)+"."+i;for(;n.length;)e=e[t=n.shift()];return delete e[i]}return!0}},function(e,t,n){"use strict";
/*!
 * has-value <https://github.com/jonschlinkert/has-value>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r=n(39),o=n(41),i=n(42);e.exports=function(e,t,n){return r(e)?o(i(e,t),n):o(e,t)}},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r=n(40);e.exports=function(e){return null!=e&&"object"==typeof e&&!1===r(e)}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";
/*!
 * has-values <https://github.com/jonschlinkert/has-values>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */e.exports=function(e,t){if(null==e)return!1;if("boolean"==typeof e)return!0;if("number"==typeof e)return 0!==e||!0!==t;if(void 0!==e.length)return 0!==e.length;for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}},function(e,t){function n(e){return e?Array.isArray(e)?e.join("."):e:""}
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e,t,r,o,i){if(null===(s=e)||"object"!=typeof s&&"function"!=typeof s||!t)return e;var s;if(t=n(t),r&&(t+="."+n(r)),o&&(t+="."+n(o)),i&&(t+="."+n(i)),t in e)return e[t];for(var a=t.split("."),l=a.length,u=-1;e&&++u<l;){for(var c=a[u];"\\"===c[c.length-1];)c=c.slice(0,-1)+"."+a[++u];e=e[c]}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validate=function(){var e=document.querySelector("form#cb-validation"),t=(0,r.selectAll)(e,"input, select");return new Promise(function(n,r){var o=function n(){e.removeEventListener("submit",i),t.forEach(function(e){return e.removeEventListener("invalid",n)}),r()},i=function r(){e.removeEventListener("submit",r),t.forEach(function(e){return e.removeEventListener("invalid",o)}),n()};t.forEach(function(e){return e.addEventListener("invalid",o)}),e.addEventListener("submit",i),document.querySelector("button#cb-validation-tester").click()})},t.transferToState=function(){(0,r.selectAll)(document,"[data-cb-set]").forEach(function(e){var t=e.dataset.set;switch(e.nodeName){case"INPUT":(0,o.set)(t,e.value);break;case"SELECT":(0,o.set)(t,e.options[e.selectedIndex].value);break;default:(0,o.set)(t,e.textContent)}})};var r=n(7),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Backstage=void 0,t.init=function(){(0,o.init)(),(0,r.render)((0,r.h)(f,null),document.body)};var r=n(2),o=n(18),i=c(n(45)),s=c(n(48)),a=c(n(49)),l=c(n(52)),u=c(n(56));function c(e){return e&&e.__esModule?e:{default:e}}n(58);class f extends r.Component{constructor(e){super(e),this.state={open:!0}}setBodyClass(){this.state.open?document.body.classList.add("backstage-visible"):document.body.classList.remove("backstage-visible")}toggle(){this.setState({open:!this.state.open})}render(){const e=this.state.open?{icon:"→",text:"Close"}:{icon:"←",text:"Open"};return(0,r.h)("div",{id:"backstage",class:this.state.open&&"open"},(0,r.h)("button",{onClick:e=>this.toggle(),title:e.text+" backstage panel",class:"toggle-visibility"},e.icon),(0,r.h)(u.default,null,(0,r.h)(a.default,{label:"State"}),(0,r.h)(i.default,{label:"History"}),(0,r.h)(l.default,{label:"Style"}),(0,r.h)(s.default,{label:"Notes"})))}componentDidMount(){this.setBodyClass()}componentDidUpdate(){this.setBodyClass()}}t.Backstage=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=l(n(10)),i=l(n(1)),s=n(18),a=n(0);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(0===e.length)return[];const t=[];let n,r=[];return e.forEach(({change:e},o)=>{"trail"===e.name?(t.push({historyIndex:o-1,passage:n,varChanges:r}),r=[],n=e.value[e.value.length-1]):r.push({name:e.name,value:e.value})}),t.push({historyIndex:e.length-1,passage:n,varChanges:r}),console.log("Parsed",e,t),t}function c({historyIndex:e,passage:t,varChanges:n}){const o=[(0,r.h)("tr",null,(0,r.h)("td",{class:"actions",rowspan:n.length+1},(0,r.h)("button",{onClick:e>=0?()=>(0,s.rewindTo)(e):a.reset},"↪")),(0,r.h)("td",{class:"go",rowspan:n.length+1,colspan:n.length>0?1:2},t?`Go to "${t}"`:"Startup"))];return n.forEach(e=>{o.push((0,r.h)("tr",null,(0,r.h)("td",null,e.name," ← ",JSON.stringify(e.value))))}),o}n(47);t.default=class extends r.Component{constructor(e){super(e),this.state={history:u(s.history)},this.updateBound=(()=>this.update())}update(){this.setState({history:u(s.history)})}render(){let e;return e=this.state.history.length>0?(0,r.h)("table",{class:"history"},this.state.history.map(c)):(0,r.h)("table",{class:"history"},(0,r.h)("tr",null,(0,r.h)("td",{class:"actions"},(0,r.h)("button",{onClick:a.reset},"↪")),(0,r.h)("td",{class:"go"},"Startup"))),(0,r.h)(o.default,{title:"History"},e)}componentDidMount(){i.default.on("backstage-recorder-update",this.updateBound)}componentDidUnmount(){i.default.removeEventListener("backstage-recorder-update",this.updateBound)}}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(19)),o=n(2),i=l(n(1)),s=n(7),a=n(0);function l(e){return e&&e.__esModule?e:{default:e}}t.default=class extends o.Component{constructor(e){super(e);const t=(0,a.get)("trail");this.state={currentPassage:t[t.length-1],notes:{}},this.restore(),this.syncBound=(e=>this.sync(e))}sync({name:e,value:t}){"trail"===e&&this.setState({currentPassage:t[t.length-1]})}restore(){const e=window.localStorage.getItem(`cb-passage-notes-${(0,a.get)("config.state.saveKey")}`);e&&this.setState({notes:JSON.parse(e)})}save(){window.localStorage.setItem(`cb-passage-notes-${(0,a.get)("config.state.saveKey")}`,JSON.stringify(this.state.notes))}saveNote(e,t){const n=Object.assign({},this.state.notes);n[e]=t,this.setState({notes:n}),this.save()}export(){const e=Object.keys(this.state.notes).reduce((e,t)=>e+`<li class="note"><span class="passage">${(0,r.default)(t)}</span><pre>${(0,r.default)(this.state.notes[t])}</pre></li>`,""),t=document.createElement("a");t.setAttribute("download",`${(0,a.get)("story.name")} Notes - ${(new Date).toDateString()} ${(new Date).toTimeString()}.html`),t.setAttribute("href","data:text/html;base64,"+window.btoa(`<style>body {font-family: sans-serif}</style><h1>Notes for &ldquo;${(0,r.default)((0,a.get)("story.name"))}&rdquo;</h1><ul data-cb-backstage-notes data-cb-version="${(0,a.get)("engine.version")}">${e}</ul>`)),document.body.appendChild(t),t.click(),document.body.removeChild(t)}startImport(){this.upload.click()}import(e){const t=this.upload.files[0];if(!t)return;const n=new FileReader(t);n.onload=(e=>{const t=document.createElement("div"),n=Object.assign({},this.state.notes);let r=0;t.innerHTML=e.target.result;const o=(0,s.selectAll)(t,"ul[data-cb-backstage-notes] li");0!==o.length?(o.forEach(e=>{const t=(0,s.select)(e,"span.passage"),o=(0,s.select)(e,"pre");t&&o&&(n[t.textContent]=(n[t.textContent]||"")+"\n\n"+o.textContent,r++)}),this.setState({notes:n}),this.save(),window.alert(`${r} note(s) were imported.`)):window.alert("No notes were found in this file.")}),n.readAsText(t)}deleteAll(){window.confirm("Are you sure? This will delete all text entered in the Notes panel of Backstage, and cannot be undone.")&&(this.setState({notes:{}}),this.save())}render(){return(0,o.h)("div",null,(0,o.h)("p",null,(0,o.h)("label",null,"Notes on “",this.state.currentPassage,"”")),(0,o.h)("p",null,(0,o.h)("textarea",{value:this.state.notes[this.state.currentPassage],onInput:e=>this.saveNote(this.state.currentPassage,e.target.value)})),(0,o.h)("p",null,(0,o.h)("button",{onClick:()=>this.export()},"Export All Notes"),(0,o.h)("button",{onClick:()=>this.startImport()},"Import Notes From File"),(0,o.h)("button",{onClick:()=>this.deleteAll()},"Delete All Notes")),(0,o.h)("input",{type:"file",hidden:!0,ref:e=>this.upload=e,onChange:()=>this.import()}))}componentDidMount(){i.default.on("state-change",this.syncBound)}componentDidUnmount(){i.default.removeListener("state-change",this.syncBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.h)("div",null,(0,r.h)(i.default,null),(0,r.h)(o.default,null))};var r=n(2),o=s(n(50)),i=s(n(51));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(0),s=n(10),a=(r=s)&&r.__esModule?r:{default:r};t.default=class extends o.Component{constructor(e){super(e),this.state={snapshots:[]},this.restore()}addSnapshot(){const e=window.prompt("Enter a name for this snapshot:");e&&this.setState({snapshots:this.state.snapshots.concat({name:e,state:(0,i.saveToObject)()})})}loadSnapshot(e){(0,i.restoreFromObject)(this.state.snapshots[e].state)}deleteSnapshot(e){window.confirm(`Are you sure you want to delete the snapshot "${this.state.snapshots[e].name}"? This cannot be undone.`)&&this.setState({snapshots:this.state.snapshots.filter((t,n)=>n!==e)})}save(){window.localStorage.setItem(`cb-snapshots-${(0,i.get)("config.state.saveKey")}`,JSON.stringify(this.state.snapshots))}restore(){const e=window.localStorage.getItem(`cb-snapshots-${(0,i.get)("config.state.saveKey")}`);e&&this.setState({snapshots:JSON.parse(e)})}render(){const e=this.state.snapshots.map((e,t)=>(0,o.h)("div",{class:"segmented-button block"},(0,o.h)("button",{onClick:()=>this.loadSnapshot(t),title:'Load snapshot "{s.name}"'},e.name),(0,o.h)("button",{onClick:()=>this.deleteSnapshot(t),class:"fixed",title:'Delete snapshot "{s.name}"'},(0,o.h)("strong",null,"×"))));return(0,o.h)(a.default,{title:"Snapshots"},e,(0,o.h)("button",{class:"block",onClick:()=>this.addSnapshot()},"Add Snapshot"))}componentDidUpdate(){this.save()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=a(n(10)),i=n(0),s=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}t.default=class extends r.Component{constructor(e){super(e),this.state={varNames:[],showDefaults:!1},this.syncBound=(()=>this.syncWithState())}syncWithState(){this.setState({varNames:(0,i.varNames)(this.state.showDefaults)})}onChangeDefaults(e){this.setState({showDefaults:e.target.checked})}onChangeVar(e,t){(0,i.set)(t,JSON.parse(e.target.value))}render(){return(0,r.h)(o.default,{title:"Variables"},(0,r.h)("p",null,(0,r.h)("input",{type:"checkbox",id:"cb-backstage-show-defaults",checked:this.state.showDefaults,onChange:e=>this.onChangeDefaults(e)}),(0,r.h)("label",{for:"cb-backstage-show-defaults"},"Show Defaults")),(0,r.h)("table",null,this.state.varNames.map(e=>(0,r.h)("tr",null,(0,r.h)("td",null,e),(0,r.h)("td",null,(0,r.h)("input",{type:"text",value:JSON.stringify((0,i.get)(e)),onChange:t=>this.onChangeVar(t,e)}))))))}componentWillMount(){this.syncWithState(),s.default.on("state-change",this.syncBound)}componentDidUpdate(e,t){t.showDefaults!==this.state.showDefaults&&this.syncWithState()}componentWillUnmount(){s.default.removeListener("state-change",this.syncBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.h)("div",null,(0,r.h)(o.default,null),(0,r.h)(i.default,{title:"Page",prefix:"page"}),(0,r.h)(i.default,{title:"Header",prefix:"page.header"}),(0,r.h)(i.default,{title:"Footer",prefix:"page.footer"}))};var r=n(2),o=s(n(53)),i=s(n(54));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=l.reduce((e,t)=>{const n=(0,i.get)(t);return n?e+`${t}: ${JSON.stringify(n)}\n`:e},"").trim();return(0,o.h)(a.default,{title:"Config"},(0,o.h)("p",null,(0,o.h)("label",{for:"cb-backstage-style-config"},"Enter this code into your first passage’s vars section to permanently use this style:")),(0,o.h)("p",null,(0,o.h)("textarea",{readonly:!0,id:"cb-backstage-style-config",onClick:e=>e.target.select()},e)))};var r,o=n(2),i=n(0),s=n(10),a=(r=s)&&r.__esModule?r:{default:r};const l=["page","page.header","page.footer"].reduce((e,t)=>e.concat([`config.style.${t}.font`,`config.style.${t}.color`,`config.style.${t}.link.font`,`config.style.${t}.link.color`,`config.style.${t}.link.lineColor`,`config.style.${t}.link.active.font`,`config.style.${t}.link.active.color`,`config.style.${t}.link.active.lineColor`]),[])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({title:e,prefix:t}){return(0,r.h)(o.default,{title:e,initiallyOpen:!1},(0,r.h)(i.default,{label:"Font",binding:`config.style.${t}.font`}),(0,r.h)(i.default,{label:"Color",binding:`config.style.${t}.color`}),(0,r.h)(i.default,{label:"Link Font",binding:`config.style.${t}.link.font`}),(0,r.h)(i.default,{label:"Link Color",binding:`config.style.${t}.link.color`}),(0,r.h)(i.default,{label:"Link Line Color",binding:`config.style.${t}.link.lineColor`}),(0,r.h)(i.default,{label:"Active Link Font",binding:`config.style.${t}.link.active.font`}),(0,r.h)(i.default,{label:"Active Link Color",binding:`config.style.${t}.link.active.color`}),(0,r.h)(i.default,{label:"Active Link Line Color",binding:`config.style.${t}.link.active.lineColor`}))};var r=n(2),o=s(n(10)),i=s(n(55));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({label:e,binding:t}){return(0,r.h)("p",{class:"input-group"},(0,r.h)("label",{for:`cb-backstage-${t}`},e),(0,r.h)("input",{type:"text",id:`cb-backstage-${t}`,value:(0,o.get)(t),onChange:e=>(0,o.set)(t,e.target.value)}))};var r=n(2),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n(57);t.default=class extends r.Component{constructor(e){super(e),this.state={selected:0}}select(e){this.setState({selected:e})}render(){const e=this.props.children.map((e,t)=>(0,r.h)("li",null,(0,r.h)("button",{onClick:()=>this.select(t),class:t===this.state.selected&&"active"},e.attributes.label)));return(0,r.h)("div",null,(0,r.h)("ul",{class:"tabs"},e),(0,r.h)("div",{class:"tab-content"},this.props.children[this.state.selected]))}}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){window.engine={extend:function(e,t){var n=s.get("engine.version"),r=d(e),o=d(n);o[0]<r[0]?f("The current engine version ("+n+") has a lower major version than requested ("+e+"); skipping"):(o[0]>r[0]?f("The current engine version ("+n+") has a higher major version than requested ("+e+"); running code but you may encounter problems"):(o[1]<r[1]&&f("The current engine version ("+n+") has a lower minor version than requested ("+e+"); running code but you may encounter problems"),o[1]===r[1]&&o[2]<r[2]&&f("The current engine version ("+n+") has a lower patch version than requested ("+e+"); running code but you may encounter problems")),t())},event:r.default,log:o.log,render:l.render,state:s,story:a,warn:o.warn}};var r=c(n(1)),o=n(4),i=c(o),s=u(n(0)),a=u(n(6)),l=n(11);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,i.default)("extensibility").warn;function d(e){return e.split(".").map(window.parseInt)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(n(61)),o=v(n(62)),i=v(n(63)),s=v(n(73)),a=v(n(74)),l=v(n(75)),u=v(n(76)),c=v(n(77)),f=v(n(78)),d=v(n(79)),p=v(n(80)),h=v(n(81)),g=v(n(82)),m=v(n(83));function v(e){return e&&e.__esModule?e:{default:e}}t.default=[r.default,o.default,i.default,s.default,a.default,l.default,u.default,c.default,f.default,d.default,p.default,h.default,g.default,m.default]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={match:/^(no )?ambient\s+sound/i,render:function(e,t){var n=(0,r.get)("sound.ambient");if(Object.keys(n).forEach(function(t){t!==e&&n[t].playing&&(0,r.set)("sound.ambient."+t+".playing",!1)}),e){var o=(0,r.get)("sound.ambient."+e+".description")||"";return t.volume&&(0,r.set)("sound.ambient."+e+".volume",t.volume),(0,r.set)("sound.ambient."+e+".playing",!0),"<audio>"+o+"</audio>"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),o=n(0);t.default={match:/^back\s+link/i,render:function(e,t){var n=(0,o.get)("trail");return(0,r.renderLink)(n.length>1?n[n.length-2]:n[0],t.label||"Back")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=n(0),i=a(n(1)),s=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^cycling\s+link(\s+for)?/i,render:function(e,t){var n=void 0;return e?void 0===(n=(0,o.get)(e))&&((0,o.set)(e,t.choices[0]),n=t.choices[0]):n=t.choices[0],(0,s.default)("a",{href:"javascript:void(0)","data-cb-cycle-set":e||void 0,"data-cb-cycle-choices":JSON.stringify(t.choices)},[n])}},i.default.on("dom-click",function(e){if(e.dataset.cbCycleChoices){var t=JSON.parse(e.dataset.cbCycleChoices),n=t.indexOf(e.textContent)+1;n===t.length&&(n=0),(0,r.changeBody)(function(){return e.textContent=t[n]}),e.dataset.cbCycleSet&&(0,o.set)(e.dataset.cbCycleSet,t[n])}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.none=function(e,t){return new Promise(function(n){e.innerHTML="<div>"+t+"</div>",n()})},t.fadeInOut=function(e,t,n){return new Promise(function(r){var o=e.style.pointerEvents,s=(0,i.default)(n,"s")/2;a(e),e.style.pointerEvents="none";var u=document.createElement("div");if(u.innerHTML=t,u.style.visibility="hidden",u.style.animationDuration=s+"s",u.addEventListener("animationend",function t(){u.removeEventListener("animationend",t),u.className="",u.style.animationDuration=s+"s",e.style.pointerEvents=o,r()}),""!==e.innerHTML.trim()){var c=l(e);c.style.position="absolute",c.style.top="0",c.style.left="0",c.className="fade-out",c.style.animationDuration=s+"s",c.addEventListener("animationend",function e(){c.removeEventListener("animationend",e),c.parentNode.removeChild(c),u.style.visibility="visible",u.className="fade-in"}),e.innerHTML="",e.appendChild(u),e.appendChild(c)}else u.className="fade-in",u.animationDuration=2*s,u.style.visibility="visible",u.className="fade-in",e.appendChild(u)})},t.crossfade=function(e,t,n){return new Promise(function(r){var o=e.style.pointerEvents,s=(0,i.default)(n,"s");a(e),e.style.pointerEvents="none";var u=document.createElement("div");if(u.innerHTML=t,u.className="fade-in",u.style.animationDuration=s+"s",u.addEventListener("animationend",function t(){u.removeEventListener("animationend",t),u.style.animationDuration=null,u.className="",e.style.pointerEvents=o,r()}),""!==e.innerHTML.trim()){var c=l(e);c.style.position="absolute",c.style.top="0",c.style.left="0",c.className="fade-out",c.style.animationDuration=s+"s",c.addEventListener("animationend",function e(){c.removeEventListener("animationend",e),c.style.opacity=.5,c.parentNode.removeChild(c)}),e.innerHTML="",e.appendChild(u),e.appendChild(c)}else e.innerHTML="",e.appendChild(u)})};var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},s=n(7);function a(e){"static"===window.getComputedStyle(e).position&&(e.style.position="relative")}function l(e){var t=document.createElement(e.nodeName.toLowerCase());return t.innerHTML=e.innerHTML,t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",t.setAttribute("aria-hidden",!0),t.style.pointerEvents="none",(0,s.selectAll)(t,"audio").forEach(function(e){return e.parentNode.removeChild(e)}),t}n(65)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){window.addEventListener("error",a),window.addEventListener("unhandledrejection",function(e){return a(e.reason)})};var r,o=n(67),i=(r=o)&&r.__esModule?r:{default:r},s=n(0);function a(e){try{var t="";t=(t=e.error&&e.error.stack?e.message+"\n\nStack trace:\n"+e.error.stack:e.message+"\n\n[No stack trace available]").replace("\nPlease report this to https://github.com/chjj/marked.","");var n=document.createElement("div"),r=document.querySelector("#page article"),o=(0,s.get)("trail");n.className="error",n.innerHTML="\n\t\t\t<p>\n\t\t\tAn unexpected error has occurred.\n\t\t\t</p>\n\t\t\t<pre>"+((0,s.get)("config.testing")?t:"")+'</pre>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" '+(o.length>1?"data-cb-back":"data-cb-refresh")+'>Go back</a> to the previous passage.\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" data-cb-hard-restart>Hard restart</a>, clearing all progress and beginning from the start.\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t',n.addEventListener("click",function(e){if((0,i.default)(e.target,"[data-cb-back]",!0)){var t=(0,s.get)("trail");Array.isArray(t)?(0,s.set)("trail",t.slice(0,t.length-1)):window.alert("Sorry, going back was not successful. Please try hard restarting.")}else{if((0,i.default)(e.target,"[data-cb-refresh]",!0))(0,s.set)("trail",[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,s.get)("trail"))));else(0,i.default)(e.target,"[data-cb-hard-restart]",!0)&&((0,s.purgeFromStorage)(!0),window.location.reload())}}),r.innerHTML="",r.appendChild(n)}catch(e){console.error(e)}}},function(e,t,n){var r=n(68);e.exports=function(e,t,n){for(var o=n?e:e.parentNode;o&&o!==document;){if(r(o,t))return o;o=o.parentNode}}},function(e,t){var n=Element.prototype,r=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;e.exports=function(e,t){if(r)return r.call(e,t);for(var n=e.parentNode.querySelectorAll(t),o=0;o<n.length;++o)if(n[o]==e)return!0;return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){var e=window.console.warn,t=document.querySelector("#page .warnings");console.warn=function(){for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];if((0,o.get)("config.testing"))try{t.removeAttribute("hidden"),i.forEach(function(e){var n=document.createElement("li");n.className="warning",n.innerHTML="Warning: "+(0,r.default)(e),t.appendChild(n)})}catch(e){}e.apply(window.console,i)},i.default.on("state-change",function(e){var n=e.name;"trail"===n&&(t.setAttribute("hidden",""),t.innerHTML="")})};var r=s(n(19)),o=n(0),i=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}n(70)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Date.now(),r=void 0,o=(0,s.selectAll)(e,"[data-cb-skippable]").map(function(e){return{el:e,delay:1e3*(0,i.default)(window.getComputedStyle(e).animationDelay)}}).sort(function(e,t){return e.delay-t.delay});if(0===o.length)return;function a(){var e=Date.now()-n,t=Object.assign({},o.find(function(t){return t.delay>e}));t?(o.forEach(function(e){e.delay<=t.delay?(e.delay=0,e.el.classList.add("skip-animation")):(e.delay-=t.delay,e.el.style.animationDelay=e.delay+"ms")}),n=Date.now(),window.clearTimeout(r),l()):u()}function l(){r&&window.clearTimeout(r),r=window.setTimeout(u,o[o.length-1].delay)}function u(){t.classList.remove("visible"),document.body.removeEventListener("click",a),document.body.removeEventListener("keyup",a)}t.classList.add("visible"),l(),window.setTimeout(function(){document.body.addEventListener("click",a),document.body.addEventListener("keyup",a)},50)};var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},s=n(7)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+flickr(\s+image)?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:/img src="(.+?)"/.exec(e)[1]}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+image?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:e}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(11);t.default={match:/^embed\s+passage(\s+named)?/i,render:function(e){return(0,o.render)((0,r.passageNamed)(e).source)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+unsplash(\s+image)?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:"https://source.unsplash.com/"+e.replace(/.*\//,"")+"/"+t.width+"x"+t.height}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+youtube(\s+video)?/i,render:function(e,t){var n="https://www.youtube-nocookie.com/embed/"+e.replace(/.*\?v=/,"")+"?modestbranding=1&rel=0&controls="+(t.controls?1:0)+"&";return t.autoplay&&(n+="autoplay=1&"),t.loop&&(n+="loop=1&"),(0,i.default)("div",{style:"position: relative; height: 0; padding-bottom: 56.25%; margin-bottom: 1em"},[(0,o.domify)("iframe",{src:n,frameBorder:0,style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%"})])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17);t.default={match:/^link\s+to/i,render:function(e,t){return(0,r.renderLink)(e,t.label)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=n(0),i=n(5),s=a(i);function a(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^dropdown menu(\s+for)?/i,render:function(e,t){var n=void 0;return e&&void 0===(n=(0,o.get)(e))&&((0,o.set)(e,t.choices[0]),n=t.choices[0]),(0,s.default)("select",{"data-cb-menu-set":e||void 0},t.choices.map(function(t){var r={value:t};return e&&n===t&&(r.selected=""),(0,i.domify)("option",r,[t])}))}},r.default.on("dom-change",function(e){e.dataset.cbMenuSet&&(0,o.set)(e.dataset.cbMenuSet,e.querySelectorAll("option")[e.selectedIndex].value)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^restart\s+link/i,render:function(e,t){return(0,i.default)("a",{href:"javascript:void(0)","data-cb-restart":!0},[t.label||"Restart"])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=l(n(1)),i=l(n(5)),s=n(6),a=n(11);function l(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^reveal\s+link/i,render:function(e,t){return t.text?(0,i.default)("a",{href:"javascript:void(0)","data-cb-reveal-text":t.text},[e]):t.passage?(0,i.default)("a",{href:"javascript:void(0)","data-cb-reveal-passage":t.passage},[e]):void 0}},o.default.on("dom-click",function(e){var t=e.dataset.cbRevealText;if(e.dataset.cbRevealPassage&&(t=(0,s.passageNamed)(e.dataset.cbRevealPassage).source),t){var n=document.createElement("div");n.innerHTML=(0,a.render)(t).trim(),(0,r.changeBody)(function(){var t=n.children.length;if(t>0){var r=document.createElement("span");if(r.innerHTML=n.firstChild.innerHTML,e.parentNode.insertBefore(r,e),n.removeChild(n.firstChild),t>1){for(var o=n.lastChild;n.lastChild;)e.parentNode.parentNode.insertBefore(n.lastChild,e.parentNode.nextSibling);for(;e.nextSibling;)o.insertBefore(e.nextSibling,null)}}e.parentNode.removeChild(e)})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={match:/^sound\s+effect/i,render:function(e,t){var n=(0,r.get)("sound.effect."+e+".description")||"";return t.volume&&(0,r.set)("sound.effect."+e+".volume",t.volume),(0,r.set)("sound.effect."+e+".playing",!0),"<audio>"+n+"</audio>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(1)),o=n(0),i=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^text\s+input(\s+for)?/i,render:function(e,t){return(0,i.default)("input",{type:"text",value:e?(0,o.get)(e):"","data-cb-text-field-set":e||void 0,required:!1!==t.required?"":void 0})}},r.default.on("dom-change",function(e){e.dataset.cbTextFieldSet&&(0,o.set)(e.dataset.cbTextFieldSet,e.value)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(85)),o=f(n(86)),i=f(n(87)),s=f(n(88)),a=f(n(89)),l=f(n(90)),u=f(n(91)),c=f(n(93));function f(e){return e&&e.__esModule?e:{default:e}}t.default=[r.default,o.default,i.default,s.default,a.default,l.default,u.default,c.default]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(13)),o=i(n(21));function i(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^after\s/i,process:function(e,t){var n=t.invocation,i=(0,r.default)(n.replace(/^after\s/i,""),"ms");e.text=(0,o.default)(e.text,{"data-cb-skippable":"",class:"fade-in",style:"animation-delay: "+i+"ms"})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(21),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^align\s+(left|right|center)/i,process:function(e,t){var n=t.invocation.replace(/^align\s+/i,"");e.text=(0,i.default)(e.text,{style:"display: block; text-align: "+n})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^append$/i,process:function(e){e.startsNewParagraph=!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^if(always|never)?\s|else$|unless\s/i,processRaw:function(e,t){var n=t.invocation,r=t.state,o=n.replace(/\s.*/,"").toLowerCase(),i=void 0;switch("else"!==o&&(i=new Function("return "+n.replace(/.*?\s/,""))),o){case"if":r.conditionEval=i.apply(window);break;case"ifalways":r.conditionEval=!0;break;case"ifnever":r.conditionEval=!1;break;case"unless":r.conditionEval=!i.apply(window);break;case"else":if(void 0===r.conditionEval)throw new Error("There was no matching if modifier for an else modifier.");r.conditionEval=!r.conditionEval}r.conditionEval||(e.text="")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^continued?|cont('d)?$/i,process:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^css$/i,process:function(e){e.text="<style>"+e.text+"</style>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(92),i=(r=o)&&r.__esModule?r:{default:r},s=n(0);t.default={match:/^javascript$/i,process:function(e){try{var t=new Function("\n\t\t\t\t\t\tfunction write() { write.__out += write.__join.call(arguments, ''); }\n\t\t\t\t\t\twrite.__out = '';\n\t\t\t\t\t\twrite.__join = Array.prototype.join;\n\t\t\t\t\t\t"+(0,i.default)(e.text)+";\n\t\t\t\t\t\treturn write.__out;\n\t\t\t\t\t");e.text=t.apply(window)}catch(t){if(!(0,s.get)("config.testing"))throw t;var n="unknown error";n=t.error&&t.error.stack?t.error.stack:t.message+"\n[No stack trace available]",e.text='<div class="error">An error occured evaluating:<pre>'+e.text+"</pre><p><pre>"+n+"</pre></p></div>"}}}},function(e,t,n){(function(t){var n=1/0,r="[object Symbol]",o=/&(?:amp|lt|gt|quot|#39|#96);/g,i=RegExp(o.source),s="object"==typeof t&&t&&t.Object===Object&&t,a="object"==typeof self&&self&&self.Object===Object&&self,l=s||a||Function("return this")();var u,c=(u={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},function(e){return null==u?void 0:u[e]}),f=Object.prototype.toString,d=l.Symbol,p=d?d.prototype:void 0,h=p?p.toString:void 0;function g(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":g(t))&&i.test(e)?e.replace(o,c):e}}).call(this,n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^(note(\s+to\s+self)?|n?b?|todo|fixme)$/i,process:function(e){e.text=""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,n={vars:[],blocks:[]},i=e.split(t.varsSep,2),s=void 0,c=void 0;if(2===i.length){a("Detected vars section");var f=r(i,2);s=f[0],c=f[1],(0,o.default)(s).forEach(function(e){if(""!==e.trim()){var t=e.indexOf(":");if(-1!==t){var r=e.substr(0,t).trim(),o=e.substr(t+1).trim(),i={name:r,value:new Function("return ("+o+")")},s=r.match(/\(.+\)/);s?(i.condition=new Function("return ("+s[0]+")"),i.name=(i.name.substr(0,s.index)+i.name.substr(s.index+s[0].length)).trim(),a('Setting variable "'+i.name+'" to "'+o+'" with condition ('+s[0]+")")):a('Setting variable "'+r+'" to "'+o+'" without condition'),n.vars.push(i)}else l('The line "'+e+'" in the vars section is missing a colon. It was ignored.')}})}else a("No vars section detected"),c=i[0];var d=function(e,t){var r=t.trim();""!==r&&(a("Creating '"+e+"' block with content: \""+r+'"'),n.blocks.push({type:e,content:r}))},p=new RegExp(t.modifierPattern),h=0,g=p.exec(c);for(;g;){d("text",c.substring(h,g.index));for(var m=g[1],v="",b=0;b<m.length;b++)switch(m[b]){case'"':for(v+='"',b+=1;b<m.length&&(v+=m[b],'"'!==m[b]||"\\"===m[b-1]);b++);break;case";":d("modifier",v),v="";break;default:v+=m[b]}d("modifier",v),h=p.lastIndex,g=p.exec(c)}return d("text",c.substring(h)),n};var o=i(n(95));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,i(n(4)).default)("parse"),a=s.log,l=s.warn,u={varsSep:/^--$/m,modifierPattern:/^\[([^[].+[^\]])\]$/gm}},function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string in the first argument, got "+typeof e);if(!(t&&t.preserveNewlines))return e.split(/\r?\n/);for(var n=e.split(/(\r?\n)/),r=[],o=0;o<n.length;o+=2)r.push(n[o]+(n[o+1]||""));return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markedOptions=void 0,t.default=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.vars)throw new Error("The renderer was given an object with no vars property.");if(!e.blocks)throw new Error("The renderer was given an object with no blocks property.");var i="";o||(c("Setting vars ("+e.vars.length+")"),e.vars.forEach(function(e){if(e.condition){var t=e.condition();t?(c('Setting var "'+name+'" (condition is currently true)'),(0,l.set)(e.name,e.value())):c('Not setting var "'+name+'" (condition is currently false)')}else c('Setting var "'+name+'"'),(0,l.set)(e.name,e.value())}));var u=[],d={};return e.blocks.forEach(function(e){switch(e.type){case"text":var r={text:e.content,startsNewParagraph:!0},o=u.filter(function(e){return!!e.mod.processRaw});c("Running "+o.length+" modifiers on raw source block"),o.forEach(function(e){e.mod.processRaw(r,{state:d[e.mod],invocation:e.invocation})}),r.text=(0,s.default)((0,a.default)(r.text),t);var l=u.filter(function(e){return!!e.mod.process});c("Running "+l.length+" modifiers on source block"),l.forEach(function(e){return e.mod.process(r,{state:d[e.mod],invocation:e.invocation})}),c("Output after modifiers: "+JSON.stringify(r)),""!==r.text.trim()&&(""!==i&&(i+=r.startsNewParagraph?"\n\n":" "),i+=r.text),u=[];break;case"modifier":var f=n.filter(function(t){return t.match.test(e.content)});if(1===f.length){var p=f[0];c('Activated "'+p.name+'" modifier matching ['+e.content+"]"),d[p]=d[p]||{},u.push({mod:p,invocation:e.content})}else 0===f.length?i+="\n\n["+e.content+"]\n\n":(console.warn('More than one modifier matched "['+e.content+']".'),i+="\n\n["+e.content+"]\n\n");break;default:throw new Error("Don't know how to render a block with type \""+e.type+'".')}}),r.default.setOptions(f),c("Final Markdown:\n"+i),(0,r.default)(i)};var r=u(n(22)),o=u(n(4)),i=u(n(97)),s=u(n(98)),a=u(n(17)),l=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.default)("render").log,f=t.markedOptions={renderer:i.default,smartypants:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(22);var i=new((r=o)&&r.__esModule?r:{default:r}).default.Renderer;Object.assign(i,{blockquote:function(e){return'<div class="fork">'+e+"</div>"},del:function(e){return'<span class="small-caps">'+e+"</span>"}}),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="",r=0,i=e.indexOf("{");if(-1===i)return e;for(var s=!1,a=void 0,l=i+1;l<e.length;l++)switch(e[l]){case"{":i=l,s=!1;break;case'"':case"'":l>0&&"\\"!==e[l-1]&&(s?s&&a===e[l]&&(s=!1):(s=!0,a=e[l]));break;case"}":if(!s){var u=e.substring(i,l+1),c="";try{c=o(u,t)}catch(e){console.warn('An error occurred while rendering "'+u+'": '+e.message),c=u}void 0===c&&(c=""),n+=e.substring(r,i)+c,r=l+1,-1===(i=e.indexOf("{",r))&&(l=e.index)}}return n+e.substring(r)};var r=n(0);function o(e,t){var n=e.substr(1,e.length-2).trim();if(/\s/.test(n)){var o=n.match(/^[^:,]+/)[0],i=t.find(function(e){return e.match.test(o)});if(i){var s=n.replace(o,"");if(":"===s[0]){var a=new Function('return {"'+o+'" '+s+"}")(),l=a[o];return delete a[o],i.render(l,a,n)}if(","===s[0]){var u=new Function("return {"+s.substr(1)+"}")();return i.render(null,u,n)}if(""===s)return i.render(null,{},n)}}else{var c=(0,r.get)(n);if(void 0!==c)return c}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=e.volume,o=t-r,i=void 0,s=0;return new Promise(function(t){return window.requestAnimationFrame(function(a){i=a,window.requestAnimationFrame(function a(l){s+=l-i;e.volume=function(e,t,n,r){if((e/=r/2)<1)return n/2*e*e+t;return-n/2*(--e*(e-2)-1)+t}(s,r,o,n);s<n?(i=l,window.requestAnimationFrame(a)):t()})})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,r.default)(u.setLookup),(0,o.default)(u.setLookup),(0,i.default)(u.setLookup),(0,s.default)(u.setLookup),(0,a.default)(u.setLookup),(0,l.default)(u.setLookup)};var r=c(n(101)),o=c(n(102)),i=c(n(104)),s=c(n(105)),a=c(n(24)),l=c(n(115)),u=n(0);function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("browser.height",function(){return window.innerHeight}),e("browser.online",function(){return window.navigator.onLine}),e("browser.width",function(){return window.innerWidth})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("engine.version",function(){return i.default.version})};var r,o=n(103),i=(r=o)&&r.__esModule?r:{default:r}},function(e){e.exports={name:"Chapbook",author:"Chris Klimas <chris@twinery.org>",description:'A Twine story format emphasizing ease of authoring, multimedia, and playability on many different types of devices. Visit <a href="https://klembot.github.io/chapbook/guide/">guide</a> for more information.',version:"1.1.0",main:"index.js",license:"MIT",devDependencies:{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","babel-core":"^6.26.0","babel-loader":"^7.1.4","babel-preset-env":"^1.6.1","babel-preset-preact":"^1.1.0","child-process-promise":"^2.2.1",cpy:"^7.2.0","cpy-cli":"^2.0.0","cross-env":"^5.2.0","css-loader":"^0.28.11",eslint:"^4.14.0","eslint-config-prettier":"^6.11.0","gitbook-cli":"^2.3.2","html-webpack-plugin":"^3.2.0",husky:"^4.2.5",jest:"^24.7.1","jest-localstorage-mock":"^2.2.0",jsdoc:"^3.6.2","jstransformer-marked":"^1.0.3","lodash.escape":"^4.0.1","mini-css-extract-plugin":"^0.4.0","mock-local-storage":"^1.0.5","node-sass":"^4.9.0","npm-run-all":"^4.1.3",prettier:"^2.0.5",pug:"^2.0.3",rimraf:"^2.6.3","rollup-plugin-uglify":"^3.0.0","sass-loader":"^7.0.3","title-case":"^2.1.1","twine-utils":"^1.2.6","url-loader":"^1.1.2",webpack:"^4.28.2","webpack-cli":"^3.1.2","webpack-dev-server":"^3.1.12",yargs:"^11.0.0"},dependencies:{closest:"^0.0.1","get-value":"^3.0.1","lodash.unescape":"^4.0.1",marked:"^0.6.2",nanobus:"^4.3.3","open-color":"^1.6.3",preact:"^8.2.9","pure-color":"^1.3.0",seedrandom:"^2.4.3","set-value":"^3.0.1","split-lines":"^1.1.0",timestring:"^5.0.0","unset-value":"^1.0.0"},scripts:{start:"webpack-dev-server",build:"npm-run-all --parallel build:main build:micro --serial build:format clean","build:format":"node scripts/build-format.js","build:main":"cross-env NODE_ENV=production webpack","build:micro":"cross-env NODE_ENV=production CHAPBOOK_MICRO=y webpack",clean:"rimraf dist/full; rimraf dist/micro",examples:"node scripts/build-examples.js",guide:"gitbook serve guide","guide:init":"cd guide && gitbook install && cd ..","guide:release":"cd guide && gitbook build",lint:"eslint src/",prettier:'prettier --write "src/**/*.{js,scss}"',release:"run-s -l build examples guide:release website",test:"jest","test:watch":"jest --watch","test:coverage":"jest --coverage",website:"node scripts/build-website.js"},config:{commitizen:{path:"cz-conventional-changelog"}},husky:{hooks:{"commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},jest:{setupFiles:["jest-localstorage-mock"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("now.second",function(){return(new Date).getSeconds()}),e("now.minute",function(){return(new Date).getMinutes()}),e("now.hour",function(){return(new Date).getHours()}),e("now.day",function(){return(new Date).getDate()}),e("now.weekday",function(){return(new Date).getDay()+1}),e("now.weekdayName",function(){return(new Date).toLocaleString(navigator.language,{weekday:"long"})}),e("now.month",function(){return(new Date).getMonth()+1}),e("now.monthName",function(){return(new Date).toLocaleString(navigator.language,{month:"long"})}),e("now.year",function(){return(new Date).getFullYear()}),e("now.timestamp",function(){return(new Date).toLocaleString(navigator.language,{hour:"numeric",minute:"numeric",second:"numeric"})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("passage.name",function(){var e=(0,r.get)("trail");if(e)return e[e.length-1]}),e("passage.visits",function(){var e=(0,r.get)("trail"),t=(0,r.get)("passage.name");if(e)return e.reduce(function(e,n){return n===t?e+1:e},0)})};var r=n(0)},function(e,t,n){var r=n(107),o=n(108),i=n(109),s=n(110),a=n(111),l=n(112),u=n(113);u.alea=r,u.xor128=o,u.xorwow=i,u.xorshift7=s,u.xor4096=a,u.tychei=l,e.exports=u},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new s(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.alea=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor128=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorwow=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorshift7=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,s,a=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),o=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(s=s+1640531527|0,o=0==(n=a[127&i]^=r+s)?o+1:0);for(o>=128&&(a[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=a[o+34&127],n=a[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[o]=r^n;e.w=s,e.X=a,e.i=o}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor4096=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new s(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&a(r,n),o.state=function(){return a(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.tychei=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){var r;!function(o,i){var s,a=(0,eval)("this"),l=256,u=6,c="random",f=i.pow(l,u),d=i.pow(2,52),p=2*d,h=l-1;function g(e,t,n){var r=[],h=b(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(o)]}}():e,3),r),g=new m(r),w=function(){for(var e=g.g(u),t=f,n=0;e<d;)e=(e+n)*l,t*=l,n=g.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t};return w.int32=function(){return 0|g.g(4)},w.quick=function(){return g.g(4)/4294967296},w.double=w,b(y(g.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,g),e.state=function(){return v(g,{})}),n?(i[c]=e,t):e})(w,h,"global"in t?t.global:this==i,t.state)}function m(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<l;)s[o]=o++;for(o=0;o<l;o++)s[o]=s[i=h&i+e[o%n]+(t=s[o])],s[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,s=r.S;e--;)t=s[o=h&o+1],n=n*l+s[h&(s[o]=s[i=h&i+t])+(s[i]=t)];return r.i=o,r.j=i,n})(l)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function b(e,t){for(var n,r=e+"",o=0;o<r.length;)t[h&o]=h&(n^=19*t[h&o])+r.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i["seed"+c]=g,b(i.random(),o),e.exports){e.exports=g;try{s=n(114)}catch(e){}}else void 0===(r=function(){return g}.call(t,n,t,e))||(e.exports=r)}([],Math)},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("story.name",r.name)};var r=n(6)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){[r.defaults,o.defaults,i.defaults,s.defaults,a.defaults,l.defaults,u.defaults].forEach(function(e){return Object.keys(e).forEach(function(t){"function"==typeof e[t]?(0,a.setDefault)(t,e[t]()):(0,a.setDefault)(t,e[t])})})};var r=n(12),o=n(4),i=n(24),s=n(23),a=n(0),l=n(25),u=n(11)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){l.dataset.cbGoogleFontLoader="",l.setAttribute("hidden",!0),u.dataset.cbTypekitFontLoader="",u.setAttribute("hidden",!0),c.dataset.cbUrlFontLoader="",c.setAttribute("hidden",!0),document.body.appendChild(l),document.body.appendChild(u),document.body.appendChild(c),o.default.on("state-change",function(e){var t=e.name,n="config"===t||"config.style"===t||"config.style.fonts"===t;if(n){var r=(0,i.get)("config.style.fonts");if(!r)return;Object.keys(r).forEach(function(e){var t=r[e].name,n=r[e].url;t&&n&&d(e,n,t)})}else{var o=t.match(/^config\.style\.fonts\.([^.]+)/i);if(o){var s=o[1],c=(0,i.get)("config.style.fonts."+s+".name"),f=(0,i.get)("config.style.fonts."+s+".url");return void(f&&c&&(a("Adding font from URL ("+c+")"),d(s,f,c)))}}(0,i.sameObject)(t,"config.style.googleFont")&&(a("Adding Google font"),l.innerHTML=(0,i.get)("config.style.googleFont")),(0,i.sameObject)(t,"config.style.typekitFont")&&(a("Adding Typekit font"),u.innerHTML=(0,i.get)("config.style.typekitFont"))})};var r=s(n(4)),o=s(n(1)),i=n(0);function s(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("style").log,l=document.createElement("div"),u=document.createElement("div"),c=document.createElement("div"),f={};function d(e,t,n){var r=t.match(/\.(.+)$/);if(r&&r[1]){var o=r[1],i=f[e]||document.createElement("style");i.dataset.cbFontLoader=e,i.innerHTML='@font-face { font-family: "'+n+'"; src: url("'+t+'") format("'+o+'"); }',i.parentNode||c.appendChild(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autopx=function(e){if("number"==typeof e)return e+"px";return e},t.parseColorValue=a,t.parseColor=function(e){if("string"!=typeof e)throw new Error("Only strings can be parsed as colors.");var t={color:"inherit","background-color":"inherit"},n=e.split(/ on /i);t.color=a(n[0].trim().toLowerCase()),2===n.length&&(t["background-color"]=a(n[1].trim().toLowerCase()));return t},t.parseFont=function(e){var t={"font-family":"inherit","font-size":"inherit","font-style":"inherit","font-weight":"inherit","letter-spacing":"inherit","text-decoration":"inherit","text-transform":"inherit"};function n(e,t){e["font-family"]=t.split("/").map(function(e){var t=e;return'"'!==t[0]&&(t='"'+t),'"'!==t[t.length-1]&&(t+='"'),t}).join(",")}function r(e){e["font-weight"]="bold"}function o(e){e["font-style"]="italic"}function i(e){e["font-style"]="none",e["font-weight"]="normal",e["letter-spacing"]="normal",e["text-decoration"]="none",e["text-transform"]="none"}function s(e){e["letter-spacing"]="0.075em",e["text-transform"]="uppercase",e["font-size"]&&"inherit"!==e["font-size"]?e["font-size"]="calc(0.7 * "+e["font-size"]+")":e["font-size"]="70%"}function a(e){e["text-decoration"]="underline"}var l=/\b\d+(?:\.\d+)?(ch|cm|ex|in|mm|pc|pt|px|r?em|vh|vmax|vmin|vw|%)?/i.exec(e);if(l){/^\d+$/.test(l[0])?t["font-size"]=l[0]+"px":t["font-size"]=l[0],0!==l.index&&n(t,e.substr(0,l.index).trim());var u=e.substr(l.index);/\bregular\b/i.test(u)?(t["font-style"]="none",t["font-weight"]="normal",t["letter-spacing"]="normal",t["text-decoration"]="none",t["text-transform"]="none"):(/\bbold\b/.test(u)&&r(t),/\bitalics?\b/.test(u)&&o(t),/\bunderlined?/.test(u)&&a(t),/\bsmall caps?\b/.test(u)&&s(t))}else{for(var c=void 0,f=e;c=/(bold|italics?|regular|small caps|underlined?)$/.exec(f);){switch(c[0]){case"bold":r(t);break;case"italic":case"italics":o(t);break;case"regular":i(t);break;case"small caps":s(t);break;case"underline":case"underlined":a(t)}f=f.substr(0,c.index).trim()}""!==f.trim()&&n(t,f)}return t};var r=s(n(119)),o=s(n(120)),i=s(n(125));function s(e){return e&&e.__esModule?e:{default:e}}function a(e){if("string"!=typeof e)throw new Error("Only strings can be parsed as color values.");r.default[e]&&(e=Array.isArray(r.default[e])?r.default[e][r.default[e].length-1]:r.default[e]);var t=/^(\w+)-(\d)$/.exec(e);t&&r.default[t[1]]&&(e=r.default[t[1]][t[2]]);var n=(0,o.default)(e),s=(0,i.default)(n);return s[3]=void 0!==n[3]?n[3]:1,"hsla("+s[0]+", "+s[1]+"%, "+s[2]+"%, "+s[3]+")"}},function(e){e.exports={white:"#ffffff",black:"#000000",gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]}},function(e,t,n){var r=n(121),o=n(122),i=n(123),s=n(124);var a={"#":o,hsl:function(e){var t=r(e),n=s(t);return 4===t.length&&n.push(t[3]),n},rgb:i};function l(e){for(var t in a)if(0===e.indexOf(t))return a[t](e)}l.rgb=i,l.hsl=r,l.hex=o,e.exports=l},function(e,t,n){var r=n(26),o=n(27);function i(e,t){switch(e=parseFloat(e),t){case 0:return o(e,0,360);case 1:case 2:return o(e,0,100);case 3:return o(e,0,1)}}e.exports=function(e){return r(e).map(i)}},function(e,t){e.exports=function(e){4!==e.length&&5!==e.length||(e=function(e){for(var t="#",n=1;n<e.length;n++){var r=e.charAt(n);t+=r+r}return t}(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var n=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(n)}return t}},function(e,t,n){var r=n(26),o=n(27);function i(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*o(parseInt(e,10),0,100)/100):o(parseInt(e,10),0,255):o(parseFloat(e),0,1)}e.exports=function(e){return r(e).map(i)}},function(e,t){e.exports=function(e){var t,n,r,o,i,s=e[0]/360,a=e[1]/100,l=e[2]/100;if(0==a)return[i=255*l,i,i];t=2*l-(n=l<.5?l*(1+a):l+a-l*a),o=[0,0,0];for(var u=0;u<3;u++)(r=s+1/3*-(u-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,o[u]=255*i;return o}},function(e,t){e.exports=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,s=Math.min(r,o,i),a=Math.max(r,o,i),l=a-s;return a==s?t=0:r==a?t=(o-i)/l:o==a?t=2+(i-r)/l:i==a&&(t=4+(r-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(s+a)/2,[t,100*(a==s?0:n<=.5?l/(a+s):l/(2-a-s)),100*n]}},function(e,t,n){}]);</script></body></html>
